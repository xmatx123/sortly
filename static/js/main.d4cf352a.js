/*! For license information please see main.d4cf352a.js.LICENSE.txt */
(()=>{var e={43(e,t,n){"use strict";e.exports=n(202)},122(e){"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!==i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(s=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!==i--;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;0!==i--;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n}},148(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;"undefined"!==typeof window&&("undefined"===typeof window.gtag&&(window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)}),(r=window).gtag.apply(r,t))};t.default=n},153(e,t,n){"use strict";var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:a.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},173(e,t,n){e.exports=n(497)()},202(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function v(){}function _(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=_.prototype=new v;w.constructor=_,g(w,y.prototype),w.isPureReactComponent=!0;var b=Array.isArray,E=Object.prototype.hasOwnProperty,S={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)E.call(t,i)&&!C.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:S.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var k=/\/+/g;function x(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function N(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+x(l,0):s,b(o)?(i="",null!=e&&(i=e.replace(k,"$&/")+"/"),N(o,t,i,"",function(e){return e})):null!=o&&(I(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(k,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",b(e))for(var c=0;c<e.length;c++){var u=s+x(a=e[c],c);l+=N(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=N(a=a.value,t,i,u=s+x(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",function(e){return t.call(n,e,i++)}),r}function O(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},A={transition:null},R={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:A,ReactCurrentOwner:S};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:P,forEach:function(e,t,n){P(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return P(e,function(){t++}),t},toArray:function(e){return P(e,function(e){return e})||[]},only:function(e){if(!I(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=_,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.act=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=g({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=S.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)E.call(t,c)&&!C.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:O}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=A.transition;A.transition={};try{e()}finally{A.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.3.1"},218(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},234(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,g=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function b(e){if(m=!1,w(e),!g)if(null!==r(c))g=!0,A(E);else{var t=r(u);null!==t&&R(b,t.startTime-e)}}function E(e,n){g=!1,m&&(m=!1,v(I),I=-1),p=!0;var s=f;try{for(w(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!N());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(c)&&i(c),w(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&R(b,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,C=!1,T=null,I=-1,k=5,x=-1;function N(){return!(t.unstable_now()-x<k)}function P(){if(null!==T){var e=t.unstable_now();x=e;var n=!0;try{n=T(!0,e)}finally{n?S():(C=!1,T=null)}}else C=!1}if("function"===typeof _)S=function(){_(P)};else if("undefined"!==typeof MessageChannel){var O=new MessageChannel,D=O.port2;O.port1.onmessage=P,S=function(){D.postMessage(null)}}else S=function(){y(P,0)};function A(e){T=e,C||(C=!0,S())}function R(e,n){I=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,A(E))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(m?(v(I),I=-1):m=!0,R(b,s-o))):(e.sortIndex=a,n(c,e),g||p||(g=!0,A(E))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},279(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}t.Ay=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=o?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(i,a,l):i[a]=e[a]}i.default=e,n&&n.set(e,i);return i}(n(979));function s(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}i.GA4;var o=i.default;t.Ay=o},324(e){e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var s=Object.keys(e),o=Object.keys(t);if(s.length!==o.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(t),l=0;l<s.length;l++){var c=s[l];if(!a(c))return!1;var u=e[c],h=t[c];if(!1===(i=n?n.call(r,u,h,c):void 0)||void 0===i&&u!==h)return!1}return!0}},366(e){var t="undefined"!==typeof Element,n="function"===typeof Map,r="function"===typeof Set,i="function"===typeof ArrayBuffer&&!!ArrayBuffer.isView;function s(e,o){if(e===o)return!0;if(e&&o&&"object"==typeof e&&"object"==typeof o){if(e.constructor!==o.constructor)return!1;var a,l,c,u;if(Array.isArray(e)){if((a=e.length)!=o.length)return!1;for(l=a;0!==l--;)if(!s(e[l],o[l]))return!1;return!0}if(n&&e instanceof Map&&o instanceof Map){if(e.size!==o.size)return!1;for(u=e.entries();!(l=u.next()).done;)if(!o.has(l.value[0]))return!1;for(u=e.entries();!(l=u.next()).done;)if(!s(l.value[1],o.get(l.value[0])))return!1;return!0}if(r&&e instanceof Set&&o instanceof Set){if(e.size!==o.size)return!1;for(u=e.entries();!(l=u.next()).done;)if(!o.has(l.value[0]))return!1;return!0}if(i&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(o)){if((a=e.length)!=o.length)return!1;for(l=a;0!==l--;)if(e[l]!==o[l])return!1;return!0}if(e.constructor===RegExp)return e.source===o.source&&e.flags===o.flags;if(e.valueOf!==Object.prototype.valueOf&&"function"===typeof e.valueOf&&"function"===typeof o.valueOf)return e.valueOf()===o.valueOf();if(e.toString!==Object.prototype.toString&&"function"===typeof e.toString&&"function"===typeof o.toString)return e.toString()===o.toString();if((a=(c=Object.keys(e)).length)!==Object.keys(o).length)return!1;for(l=a;0!==l--;)if(!Object.prototype.hasOwnProperty.call(o,c[l]))return!1;if(t&&e instanceof Element)return!1;for(l=a;0!==l--;)if(("_owner"!==c[l]&&"__v"!==c[l]&&"__o"!==c[l]||!e.$$typeof)&&!s(e[c[l]],o[c[l]]))return!1;return!0}return e!==e&&o!==o}e.exports=function(e,t){try{return s(e,t)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}}},380(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=e||"";t&&(s=e.toString().trim().replace(/[A-Za-z0-9\u00C0-\u00FF]+[^\s-]*/g,function(e,t,r){return t>0&&t+e.length!==r.length&&e.search(n)>-1&&":"!==r.charAt(t-2)&&("-"!==r.charAt(t+e.length)||"-"===r.charAt(t-1))&&r.charAt(t-1).search(/[^\s-]/)<0?e.toLowerCase():e.substr(1).search(/[A-Z]|\../)>-1?e:e.charAt(0).toUpperCase()+e.substr(1)}));i&&(s=function(e){if(function(e){return"string"===typeof e&&-1!==e.indexOf("@")}(e))return console.warn("This arg looks like an email address, redacting."),r;return e}(s));return s};var n=/^(a|an|and|as|at|but|by|en|for|if|in|nor|of|on|or|per|the|to|vs?\.?|via)$/i;var r="REDACTED (Potential Email Address)"},391(e,t,n){"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},497(e,t,n){"use strict";var r=n(218);function i(){}function s(){}s.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,s,o){if(o!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:i};return n.PropTypes=n,n}},579(e,t,n){"use strict";e.exports=n(153)},730(e,t,n){"use strict";var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){m[e]=new g(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){m[e]=new g(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){m[e]=new g(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){m[e]=new g(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){m[e]=new g(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function _(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)}),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),E=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),k=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var A=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var M,j=Object.assign;function F(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function z(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case E:return"Portal";case T:return"Profiler";case C:return"StrictMode";case N:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case k:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case x:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case O:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return j({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function J(e,t){X(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return j({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function se(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ye=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function _e(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,Se=null,Ce=null;function Te(e){if(e=_i(e)){if("function"!==typeof Ee)throw Error(s(280));var t=e.stateNode;t&&(t=bi(t),Ee(e.stateNode,e.type,t))}}function Ie(e){Se?Ce?Ce.push(e):Ce=[e]:Se=e}function ke(){if(Se){var e=Se,t=Ce;if(Ce=Se=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function xe(e,t){return e(t)}function Ne(){}var Pe=!1;function Oe(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return xe(e,t,n)}finally{Pe=!1,(null!==Se||null!==Ce)&&(Ne(),ke())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=bi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Ae=!1;if(u)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){Ae=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(ue){Ae=!1}function Le(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Me=!1,je=null,Fe=!1,Ue=null,Ve={onError:function(e){Me=!0,je=e}};function ze(e,t,n,r,i,s,o,a,l){Me=!1,je=null,Le.apply(Ve,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(qe(e)!==e)throw Error(s(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return He(i),e;if(o===r)return He(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,$e=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!==(s&=o)&&(r=ht(s))}else 0!==(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var _t=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,Et,St,Ct,Tt,It=!1,kt=[],xt=null,Nt=null,Pt=null,Ot=new Map,Dt=new Map,At=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":xt=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Ot.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=_i(t))&&Et(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function jt(e){var t=vi(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Be(n)))return e.blockedOn=t,void Tt(e.priority,function(){St(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=_i(n))&&Et(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function Vt(){It=!1,null!==xt&&Ft(xt)&&(xt=null),null!==Nt&&Ft(Nt)&&(Nt=null),null!==Pt&&Ft(Pt)&&(Pt=null),Ot.forEach(Ut),Dt.forEach(Ut)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,It||(It=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function qt(e){function t(t){return zt(t,e)}if(0<kt.length){zt(kt[0],e);for(var n=1;n<kt.length;n++){var r=kt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==xt&&zt(xt,e),null!==Nt&&zt(Nt,e),null!==Pt&&zt(Pt,e),Ot.forEach(t),Dt.forEach(t),n=0;n<At.length;n++)(r=At[n]).blockedOn===e&&(r.blockedOn=null);for(;0<At.length&&null===(n=At[0]).blockedOn;)jt(n),null===n.blockedOn&&At.shift()}var Bt=w.ReactCurrentBatchConfig,Ht=!0;function Wt(e,t,n,r){var i=_t,s=Bt.transition;Bt.transition=null;try{_t=1,Kt(e,t,n,r)}finally{_t=i,Bt.transition=s}}function Gt(e,t,n,r){var i=_t,s=Bt.transition;Bt.transition=null;try{_t=4,Kt(e,t,n,r)}finally{_t=i,Bt.transition=s}}function Kt(e,t,n,r){if(Ht){var i=Yt(e,t,n,r);if(null===i)Hr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return xt=Mt(xt,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return Pt=Mt(Pt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ot.set(s,Mt(Ot.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Dt.set(s,Mt(Dt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Rt.indexOf(e)){for(;null!==i;){var s=_i(i);if(null!==s&&bt(s),null===(s=Yt(e,t,n,r))&&Hr(e,t,r,Qt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=vi(e=be(r))))if(null===(t=qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),hn=j({},cn,{view:0,detail:0}),dn=sn(hn),fn=j({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),gn=sn(j({},fn,{dataTransfer:0})),mn=sn(j({},hn,{relatedTarget:0})),yn=sn(j({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=j({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=sn(vn),wn=sn(j({},cn,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Tn(){return Cn}var In=j({},hn,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),kn=sn(In),xn=sn(j({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=sn(j({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),Pn=sn(j({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),On=j({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=sn(On),An=[9,13,27,32],Rn=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Mn=u&&"TextEvent"in window&&!Ln,jn=u&&(!Rn||Ln&&8<Ln&&11>=Ln),Fn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==An.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Bn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ie(r),0<(t=Gr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Kn=null;function Qn(e){Fr(e,0)}function Yn(e){if(K(wi(e)))return e}function $n(e,t){if("change"===e)return t}var Xn=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Kn=Gn=null)}function nr(e){if("value"===e.propertyName&&Yn(Kn)){var t=[];Wn(t,Kn,e,be(e)),Oe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Kn)}function sr(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=u&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,vr=null,_r=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Gr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function br(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Er={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},Sr={},Cr={};function Tr(e){if(Sr[e])return Sr[e];if(!Er[e])return e;var t,n=Er[e];for(t in n)if(n.hasOwnProperty(t)&&t in Cr)return Sr[e]=n[t];return e}u&&(Cr=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);var Ir=Tr("animationend"),kr=Tr("animationiteration"),xr=Tr("animationstart"),Nr=Tr("transitionend"),Pr=new Map,Or="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Pr.set(e,t),l(t,[e])}for(var Ar=0;Ar<Or.length;Ar++){var Rr=Or[Ar];Dr(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Dr(Ir,"onAnimationEnd"),Dr(kr,"onAnimationIteration"),Dr(xr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function jr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,c){if(ze.apply(this,arguments),Me){if(!Me)throw Error(s(198));var u=je;Me=!1,je=null,Fe||(Fe=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;jr(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;jr(i,a,c),s=l}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Ur(e,t){var n=t[gi];void 0===n&&(n=t[gi]=new Set);var r=e+"__bubble";n.has(r)||(Br(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),Br(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function qr(e){if(!e[zr]){e[zr]=!0,o.forEach(function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function Br(e,t,n,r){switch($t(t)){case 1:var i=Wt;break;case 4:i=Gt;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!Ae||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=vi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Oe(function(){var r=s,i=be(n),o=[];e:{var a=Pr.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=kn;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Nn;break;case Ir:case kr:case xr:l=yn;break;case Nr:l=Pn;break;case"scroll":l=dn;break;case"wheel":l=Dn;break;case"copy":case"cut":case"paste":l=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=xn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==d&&(null!=(g=De(p,d))&&u.push(Wr(p,g,f)))),h)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(h=qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,g="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=xn,g="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:wi(l),f=null==c?a:wi(c),(a=new u(g,p+"leave",l,n,i)).target=h,a.relatedTarget=f,g=null,vi(i)===r&&((u=new u(d,p+"enter",c,n,i)).target=f,u.relatedTarget=h,g=u),h=g,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Kr(f))p++;for(f=0,g=d;g;g=Kr(g))f++;for(;0<p-f;)u=Kr(u),p--;for(;0<f-p;)d=Kr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Kr(u),d=Kr(d)}u=null}else u=null;null!==l&&Qr(o,a,l,u,!1),null!==c&&null!==h&&Qr(o,h,c,u,!0)}if("select"===(l=(a=r?wi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=$n;else if(Hn(a))if(Xn)m=or;else{m=ir;var y=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=sr);switch(m&&(m=m(e,r))?Wn(o,m,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?wi(r):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,vr=null);break;case"focusout":vr=yr=mr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,wr(o,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":wr(o,n,i)}var v;if(Rn)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else qn?Vn(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(jn&&"ko"!==n.locale&&(qn||"onCompositionStart"!==_?"onCompositionEnd"===_&&qn&&(v=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,qn=!0)),0<(y=Gr(r,_)).length&&(_=new wn(_,e,null,n,i),o.push({event:_,listeners:y}),v?_.data=v:null!==(v=zn(n))&&(_.data=v))),(v=Mn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!Rn&&Vn(e,t)?(e=en(),Zt=Jt=Xt=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v))}Fr(o,t)})}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=De(e,n))&&r.unshift(Wr(e,s,i)),null!=(s=De(e,t))&&r.push(Wr(e,s,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=De(n,s))&&o.unshift(Wr(n,l,a)):i||null!=(l=De(n,s))&&o.push(Wr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace($r,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout(function(){throw e})}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void qt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);qt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,gi="__reactEvents$"+hi,mi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function vi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function _i(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function bi(e){return e[fi]||null}var Ei=[],Si=-1;function Ci(e){return{current:e}}function Ti(e){0>Si||(e.current=Ei[Si],Ei[Si]=null,Si--)}function Ii(e,t){Si++,Ei[Si]=e.current,e.current=t}var ki={},xi=Ci(ki),Ni=Ci(!1),Pi=ki;function Oi(e,t){var n=e.type.contextTypes;if(!n)return ki;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Di(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ai(){Ti(Ni),Ti(xi)}function Ri(e,t,n){if(xi.current!==ki)throw Error(s(168));Ii(xi,t),Ii(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,B(e)||"Unknown",i));return j({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ki,Pi=xi.current,Ii(xi,e),Ii(Ni,Ni.current),!0}function ji(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Li(e,t,Pi),r.__reactInternalMemoizedMergedChildContext=e,Ti(Ni),Ti(xi),Ii(xi,e)):Ti(Ni),Ii(Ni,n)}var Fi=null,Ui=!1,Vi=!1;function zi(e){null===Fi?Fi=[e]:Fi.push(e)}function qi(){if(!Vi&&null!==Fi){Vi=!0;var e=0,t=_t;try{var n=Fi;for(_t=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Ui=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ke(Ze,qi),i}finally{_t=t,Vi=!1}}return null}var Bi=[],Hi=0,Wi=null,Gi=0,Ki=[],Qi=0,Yi=null,$i=1,Xi="";function Ji(e,t){Bi[Hi++]=Gi,Bi[Hi++]=Wi,Wi=e,Gi=t}function Zi(e,t,n){Ki[Qi++]=$i,Ki[Qi++]=Xi,Ki[Qi++]=Yi,Yi=e;var r=$i;e=Xi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|r,Xi=s+e}else $i=1<<s|n<<i|r,Xi=e}function es(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ts(e){for(;e===Wi;)Wi=Bi[--Hi],Bi[Hi]=null,Gi=Bi[--Hi],Bi[Hi]=null;for(;e===Yi;)Yi=Ki[--Qi],Ki[Qi]=null,Xi=Ki[--Qi],Ki[Qi]=null,$i=Ki[--Qi],Ki[Qi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:$i,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=ci(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var gs=w.ReactCurrentBatchConfig;function ms(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function ys(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vs(e){return(0,e._init)(e._payload)}function _s(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Mc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===S?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===D&&vs(s)===t.type)?((r=i(t,n.props)).ref=ms(e,t,n),r.return=e,r):((r=Ac(n.type,n.key,n.props,null,e.mode,r)).ref=ms(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Rc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Ac(t.type,t.key,t.props,null,e.mode,n)).ref=ms(e,null,t),n.return=e,n;case E:return(t=jc(t,e.mode,n)).return=e,t;case D:return d(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Rc(t,e.mode,n,null)).return=e,t;ys(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?c(e,t,n,r):null;case E:return n.key===i?u(e,t,n,r):null;case D:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);ys(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case E:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case D:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);ys(t,r)}return null}function g(i,s,a,l){for(var c=null,u=null,h=s,g=s=0,m=null;null!==h&&g<a.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var y=f(i,h,a[g],l);if(null===y){null===h&&(h=m);break}e&&h&&null===y.alternate&&t(i,h),s=o(y,s,g),null===u?c=y:u.sibling=y,u=y,h=m}if(g===a.length)return n(i,h),is&&Ji(i,g),c;if(null===h){for(;g<a.length;g++)null!==(h=d(i,a[g],l))&&(s=o(h,s,g),null===u?c=h:u.sibling=h,u=h);return is&&Ji(i,g),c}for(h=r(i,h);g<a.length;g++)null!==(m=p(h,i,g,a[g],l))&&(e&&null!==m.alternate&&h.delete(null===m.key?g:m.key),s=o(m,s,g),null===u?c=m:u.sibling=m,u=m);return e&&h.forEach(function(e){return t(i,e)}),is&&Ji(i,g),c}function m(i,a,l,c){var u=L(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,g=a,m=a=0,y=null,v=l.next();null!==g&&!v.done;m++,v=l.next()){g.index>m?(y=g,g=null):y=g.sibling;var _=f(i,g,v.value,c);if(null===_){null===g&&(g=y);break}e&&g&&null===_.alternate&&t(i,g),a=o(_,a,m),null===h?u=_:h.sibling=_,h=_,g=y}if(v.done)return n(i,g),is&&Ji(i,m),u;if(null===g){for(;!v.done;m++,v=l.next())null!==(v=d(i,v.value,c))&&(a=o(v,a,m),null===h?u=v:h.sibling=v,h=v);return is&&Ji(i,m),u}for(g=r(i,g);!v.done;m++,v=l.next())null!==(v=p(g,i,m,v.value,c))&&(e&&null!==v.alternate&&g.delete(null===v.key?m:v.key),a=o(v,a,m),null===h?u=v:h.sibling=v,h=v);return e&&g.forEach(function(e){return t(i,e)}),is&&Ji(i,m),u}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===S&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case b:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===S){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&vs(c)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=ms(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===S?((s=Rc(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Ac(o.type,o.key,o.props,null,r.mode,l)).ref=ms(r,s,o),l.return=r,r=l)}return a(r);case E:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=jc(o,r.mode,l)).return=r,r=s}return a(r);case D:return e(r,s,(u=o._init)(o._payload),l)}if(te(o))return g(r,s,o,l);if(L(o))return m(r,s,o,l);ys(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Mc(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var ws=_s(!0),bs=_s(!1),Es=Ci(null),Ss=null,Cs=null,Ts=null;function Is(){Ts=Cs=Ss=null}function ks(e){var t=Es.current;Ti(Es),e._currentValue=t}function xs(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ns(e,t){Ss=e,Ts=Cs=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(_a=!0),e.firstContext=null)}function Ps(e){var t=e._currentValue;if(Ts!==e)if(e={context:e,memoizedValue:t,next:null},null===Cs){if(null===Ss)throw Error(s(308));Cs=e,Ss.dependencies={lanes:0,firstContext:e}}else Cs=Cs.next=e;return t}var Os=null;function Ds(e){null===Os?Os=[e]:Os.push(e)}function As(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ds(t)):(n.next=i.next,i.next=n),t.interleaved=n,Rs(e,r)}function Rs(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ls=!1;function Ms(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function js(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Us(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&kl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Rs(e,n)}return null===(i=r.interleaved)?(t.next=t,Ds(r)):(t.next=i.next,i.next=t),r.interleaved=t,Rs(e,n)}function Vs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function zs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function qs(e,t,n,r){var i=e.updateQueue;Ls=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(o=0,u=c=l=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,g=a;switch(d=t,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=g.payload)?p.call(f,h,d):p)||void 0===d)break e;h=j({},h,d);break e;case 2:Ls=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Ll|=o,e.lanes=o,e.memoizedState=h}}function Bs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Hs={},Ws=Ci(Hs),Gs=Ci(Hs),Ks=Ci(Hs);function Qs(e){if(e===Hs)throw Error(s(174));return e}function Ys(e,t){switch(Ii(Ks,t),Ii(Gs,e),Ii(Ws,Hs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ti(Ws),Ii(Ws,t)}function $s(){Ti(Ws),Ti(Gs),Ti(Ks)}function Xs(e){Qs(Ks.current);var t=Qs(Ws.current),n=le(t,e.type);t!==n&&(Ii(Gs,e),Ii(Ws,n))}function Js(e){Gs.current===e&&(Ti(Ws),Ti(Gs))}var Zs=Ci(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function no(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var ro=w.ReactCurrentDispatcher,io=w.ReactCurrentBatchConfig,so=0,oo=null,ao=null,lo=null,co=!1,uo=!1,ho=0,fo=0;function po(){throw Error(s(321))}function go(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function mo(e,t,n,r,i,o){if(so=o,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ro.current=null===e||null===e.memoizedState?Zo:ea,e=n(r,i),uo){o=0;do{if(uo=!1,ho=0,25<=o)throw Error(s(301));o+=1,lo=ao=null,t.updateQueue=null,ro.current=ta,e=n(r,i)}while(uo)}if(ro.current=Jo,t=null!==ao&&null!==ao.next,so=0,lo=ao=oo=null,co=!1,t)throw Error(s(300));return e}function yo(){var e=0!==ho;return ho=0,e}function vo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lo?oo.memoizedState=lo=e:lo=lo.next=e,lo}function _o(){if(null===ao){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=ao.next;var t=null===lo?oo.memoizedState:lo.next;if(null!==t)lo=t,ao=e;else{if(null===e)throw Error(s(310));e={memoizedState:(ao=e).memoizedState,baseState:ao.baseState,baseQueue:ao.baseQueue,queue:ao.queue,next:null},null===lo?oo.memoizedState=lo=e:lo=lo.next=e}return lo}function wo(e,t){return"function"===typeof t?t(e):t}function bo(e){var t=_o(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=ao,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,c=null,u=o;do{var h=u.lane;if((so&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,a=r):c=c.next=d,oo.lanes|=h,Ll|=h}u=u.next}while(null!==u&&u!==o);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(_a=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,oo.lanes|=o,Ll|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Eo(e){var t=_o(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(_a=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function So(){}function Co(e,t){var n=oo,r=_o(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,_a=!0),r=r.queue,Mo(ko.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==lo&&1&lo.memoizedState.tag){if(n.flags|=2048,Oo(9,Io.bind(null,n,r,i,t),void 0,null),null===xl)throw Error(s(349));0!==(30&so)||To(n,t,i)}return i}function To(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Io(e,t,n,r){t.value=n,t.getSnapshot=r,xo(t)&&No(e)}function ko(e,t,n){return n(function(){xo(t)&&No(e)})}function xo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function No(e){var t=Rs(e,1);null!==t&&tc(t,e,1,-1)}function Po(e){var t=vo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wo,lastRenderedState:e},t.queue=e,e=e.dispatch=Qo.bind(null,oo,e),[t.memoizedState,e]}function Oo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Do(){return _o().memoizedState}function Ao(e,t,n,r){var i=vo();oo.flags|=e,i.memoizedState=Oo(1|t,n,void 0,void 0===r?null:r)}function Ro(e,t,n,r){var i=_o();r=void 0===r?null:r;var s=void 0;if(null!==ao){var o=ao.memoizedState;if(s=o.destroy,null!==r&&go(r,o.deps))return void(i.memoizedState=Oo(t,n,s,r))}oo.flags|=e,i.memoizedState=Oo(1|t,n,s,r)}function Lo(e,t){return Ao(8390656,8,e,t)}function Mo(e,t){return Ro(2048,8,e,t)}function jo(e,t){return Ro(4,2,e,t)}function Fo(e,t){return Ro(4,4,e,t)}function Uo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Vo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ro(4,4,Uo.bind(null,t,e),n)}function zo(){}function qo(e,t){var n=_o();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&go(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Bo(e,t){var n=_o();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&go(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ho(e,t,n){return 0===(21&so)?(e.baseState&&(e.baseState=!1,_a=!0),e.memoizedState=n):(ar(n,t)||(n=gt(),oo.lanes|=n,Ll|=n,e.baseState=!0),t)}function Wo(e,t){var n=_t;_t=0!==n&&4>n?n:4,e(!0);var r=io.transition;io.transition={};try{e(!1),t()}finally{_t=n,io.transition=r}}function Go(){return _o().memoizedState}function Ko(e,t,n){var r=ec(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Yo(e))$o(t,n);else if(null!==(n=As(e,t,n,r))){tc(n,e,r,Zl()),Xo(n,t,r)}}function Qo(e,t,n){var r=ec(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Yo(e))$o(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(i.next=i,Ds(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=As(e,t,i,r))&&(tc(n,e,r,i=Zl()),Xo(n,t,r))}}function Yo(e){var t=e.alternate;return e===oo||null!==t&&t===oo}function $o(e,t){uo=co=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xo(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Jo={readContext:Ps,useCallback:po,useContext:po,useEffect:po,useImperativeHandle:po,useInsertionEffect:po,useLayoutEffect:po,useMemo:po,useReducer:po,useRef:po,useState:po,useDebugValue:po,useDeferredValue:po,useTransition:po,useMutableSource:po,useSyncExternalStore:po,useId:po,unstable_isNewReconciler:!1},Zo={readContext:Ps,useCallback:function(e,t){return vo().memoizedState=[e,void 0===t?null:t],e},useContext:Ps,useEffect:Lo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ao(4194308,4,Uo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ao(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ao(4,2,e,t)},useMemo:function(e,t){var n=vo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=vo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ko.bind(null,oo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},vo().memoizedState=e},useState:Po,useDebugValue:zo,useDeferredValue:function(e){return vo().memoizedState=e},useTransition:function(){var e=Po(!1),t=e[0];return e=Wo.bind(null,e[1]),vo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=oo,i=vo();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===xl)throw Error(s(349));0!==(30&so)||To(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Lo(ko.bind(null,r,o,e),[e]),r.flags|=2048,Oo(9,Io.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=vo(),t=xl.identifierPrefix;if(is){var n=Xi;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=ho++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:Ps,useCallback:qo,useContext:Ps,useEffect:Mo,useImperativeHandle:Vo,useInsertionEffect:jo,useLayoutEffect:Fo,useMemo:Bo,useReducer:bo,useRef:Do,useState:function(){return bo(wo)},useDebugValue:zo,useDeferredValue:function(e){return Ho(_o(),ao.memoizedState,e)},useTransition:function(){return[bo(wo)[0],_o().memoizedState]},useMutableSource:So,useSyncExternalStore:Co,useId:Go,unstable_isNewReconciler:!1},ta={readContext:Ps,useCallback:qo,useContext:Ps,useEffect:Mo,useImperativeHandle:Vo,useInsertionEffect:jo,useLayoutEffect:Fo,useMemo:Bo,useReducer:Eo,useRef:Do,useState:function(){return Eo(wo)},useDebugValue:zo,useDeferredValue:function(e){var t=_o();return null===ao?t.memoizedState=e:Ho(t,ao.memoizedState,e)},useTransition:function(){return[Eo(wo)[0],_o().memoizedState]},useMutableSource:So,useSyncExternalStore:Co,useId:Go,unstable_isNewReconciler:!1};function na(e,t){if(e&&e.defaultProps){for(var n in t=j({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ra(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:j({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ia={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Zl(),i=ec(e),s=Fs(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,i))&&(tc(t,e,i,r),Vs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Zl(),i=ec(e),s=Fs(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,i))&&(tc(t,e,i,r),Vs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Zl(),r=ec(e),i=Fs(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Us(e,i,r))&&(tc(t,e,r,n),Vs(t,e,r))}};function sa(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function oa(e,t,n){var r=!1,i=ki,s=t.contextType;return"object"===typeof s&&null!==s?s=Ps(s):(i=Di(t)?Pi:xi.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Oi(e,i):ki),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ia,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function aa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ia.enqueueReplaceState(t,t.state,null)}function la(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ms(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Ps(s):(s=Di(t)?Pi:xi.current,i.context=Oi(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ra(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ia.enqueueReplaceState(i,i.state,null),qs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function ca(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ua(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ha(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var da="function"===typeof WeakMap?WeakMap:Map;function fa(e,t,n){(n=Fs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Bl||(Bl=!0,Hl=r),ha(0,t)},n}function pa(e,t,n){(n=Fs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ha(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){ha(0,t),"function"!==typeof r&&(null===Wl?Wl=new Set([this]):Wl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new da;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function ma(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ya(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fs(-1,1)).tag=2,Us(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var va=w.ReactCurrentOwner,_a=!1;function wa(e,t,n,r){t.child=null===e?bs(t,null,n,r):ws(t,e.child,n,r)}function ba(e,t,n,r,i){n=n.render;var s=t.ref;return Ns(t,i),r=mo(e,t,n,r,s,i),n=yo(),null===e||_a?(is&&n&&es(t),t.flags|=1,wa(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ba(e,t,i))}function Ea(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Oc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ac(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Sa(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Ba(e,t,i)}return t.flags|=1,(e=Dc(s,r)).ref=t.ref,e.return=t,t.child=e}function Sa(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(_a=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Ba(e,t,i);0!==(131072&e.flags)&&(_a=!0)}}return Ia(e,t,n,r,i)}function Ca(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ii(Dl,Ol),Ol|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ii(Dl,Ol),Ol|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ii(Dl,Ol),Ol|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ii(Dl,Ol),Ol|=r;return wa(e,t,i,n),t.child}function Ta(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ia(e,t,n,r,i){var s=Di(n)?Pi:xi.current;return s=Oi(t,s),Ns(t,i),n=mo(e,t,n,r,s,i),r=yo(),null===e||_a?(is&&r&&es(t),t.flags|=1,wa(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ba(e,t,i))}function ka(e,t,n,r,i){if(Di(n)){var s=!0;Mi(t)}else s=!1;if(Ns(t,i),null===t.stateNode)qa(e,t),oa(t,n,r),la(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ps(c):c=Oi(t,c=Di(n)?Pi:xi.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==c)&&aa(t,o,r,c),Ls=!1;var d=t.memoizedState;o.state=d,qs(t,r,o,i),l=t.memoizedState,a!==r||d!==l||Ni.current||Ls?("function"===typeof u&&(ra(t,n,u,r),l=t.memoizedState),(a=Ls||sa(t,n,a,r,d,l,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,js(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:na(t.type,a),o.props=c,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ps(l):l=Oi(t,l=Di(n)?Pi:xi.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&aa(t,o,r,l),Ls=!1,d=t.memoizedState,o.state=d,qs(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||Ni.current||Ls?("function"===typeof f&&(ra(t,n,f,r),p=t.memoizedState),(c=Ls||sa(t,n,c,r,d,p,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return xa(e,t,n,r,s,i)}function xa(e,t,n,r,i,s){Ta(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&ji(t,n,!1),Ba(e,t,s);r=t.stateNode,va.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=ws(t,e.child,null,s),t.child=ws(t,null,a,s)):wa(e,t,a,s),t.memoizedState=r.state,i&&ji(t,n,!0),t.child}function Na(e){var t=e.stateNode;t.pendingContext?Ri(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ri(0,t.context,!1),Ys(e,t.containerInfo)}function Pa(e,t,n,r,i){return fs(),ps(i),t.flags|=256,wa(e,t,n,r),t.child}var Oa,Da,Aa,Ra={dehydrated:null,treeContext:null,retryLane:0};function La(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ma(e,t,n){var r,i=t.pendingProps,o=Zs.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ii(Zs,1&o),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Lc(l,i,0,null),e=Rc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=La(n),t.memoizedState=Ra,e):ja(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,Fa(e,t,a,r=ua(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Lc({mode:"visible",children:r.children},i,0,null),(o=Rc(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&ws(t,e.child,null,a),t.child.memoizedState=La(a),t.memoizedState=Ra,o);if(0===(1&t.mode))return Fa(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Fa(e,t,a,r=ua(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),_a||l){if(null!==(r=xl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Rs(e,i),tc(r,e,i,-1))}return pc(),Fa(e,t,a,r=ua(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ic.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Ki[Qi++]=$i,Ki[Qi++]=Xi,Ki[Qi++]=Yi,$i=e.id,Xi=e.overflow,Yi=t),t=ja(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Dc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Dc(r,a):(a=Rc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?La(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Ra,i}return e=(a=e.child).sibling,i=Dc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function ja(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fa(e,t,n,r){return null!==r&&ps(r),ws(t,e.child,null,n),(e=ja(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ua(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xs(e.return,t,n)}function Va(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function za(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(wa(e,t,r.children,n),0!==(2&(r=Zs.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ua(e,n,t);else if(19===e.tag)Ua(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ii(Zs,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===eo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Va(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===eo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Va(t,!0,n,null,s);break;case"together":Va(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ba(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ll|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ha(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wa(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ga(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wa(t),null;case 1:case 17:return Di(t.type)&&Ai(),Wa(t),null;case 3:return r=t.stateNode,$s(),Ti(Ni),Ti(xi),no(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(sc(ss),ss=null))),Wa(t),null;case 5:Js(t);var i=Qs(Ks.current);if(n=t.type,null!==e&&null!=t.stateNode)Da(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Wa(t),null}if(e=Qs(Ws.current),hs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":$(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var l in ve(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":G(r),Z(r,o,!0);break;case"textarea":G(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[fi]=r,Oa(e,t),t.stateNode=e;e:{switch(l=_e(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":$(e,r),i=Y(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=j({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ve(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?me(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Ur("scroll",e):null!=u&&_(e,o,u,l))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wa(t),null;case 6:if(e&&null!=t.stateNode)Aa(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Qs(Ks.current),Qs(Ws.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Wa(t),null;case 13:if(Ti(Zs),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,o=!1;else if(o=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[di]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wa(t),o=!1}else null!==ss&&(sc(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===Al&&(Al=3):pc())),null!==t.updateQueue&&(t.flags|=4),Wa(t),null);case 4:return $s(),null===e&&qr(t.stateNode.containerInfo),Wa(t),null;case 10:return ks(t.type._context),Wa(t),null;case 19:if(Ti(Zs),null===(o=t.memoizedState))return Wa(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Ha(o,!1);else{if(0!==Al||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=eo(e))){for(t.flags|=128,Ha(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ii(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>zl&&(t.flags|=128,r=!0,Ha(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=eo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ha(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!is)return Wa(t),null}else 2*Xe()-o.renderingStartTime>zl&&1073741824!==n&&(t.flags|=128,r=!0,Ha(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=Zs.current,Ii(Zs,r?1&n|2:1&n),t):(Wa(t),null);case 22:case 23:return uc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ol)&&(Wa(t),6&t.subtreeFlags&&(t.flags|=8192)):Wa(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ka(e,t){switch(ts(t),t.tag){case 1:return Di(t.type)&&Ai(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return $s(),Ti(Ni),Ti(xi),no(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Js(t),null;case 13:if(Ti(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ti(Zs),null;case 4:return $s(),null;case 10:return ks(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Oa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Da=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Qs(Ws.current);var s,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=j({},i,{value:void 0}),r=j({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ur("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Aa=function(e,t,n,r){n!==r&&(t.flags|=4)};var Qa=!1,Ya=!1,$a="function"===typeof WeakSet?WeakSet:Set,Xa=null;function Ja(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function Za(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var el=!1;function tl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&Za(t,n,s)}i=i.next}while(i!==r)}}function nl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function rl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function il(e){var t=e.alternate;null!==t&&(e.alternate=null,il(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[gi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function al(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(al(e,t,n),e=e.sibling;null!==e;)al(e,t,n),e=e.sibling}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}var cl=null,ul=!1;function hl(e,t,n){for(n=n.child;null!==n;)dl(e,t,n),n=n.sibling}function dl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Ya||Ja(n,t);case 6:var r=cl,i=ul;cl=null,hl(e,t,n),ul=i,null!==(cl=r)&&(ul?(e=cl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cl.removeChild(n.stateNode));break;case 18:null!==cl&&(ul?(e=cl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),qt(e)):li(cl,n.stateNode));break;case 4:r=cl,i=ul,cl=n.stateNode.containerInfo,ul=!0,hl(e,t,n),cl=r,ul=i;break;case 0:case 11:case 14:case 15:if(!Ya&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&Za(n,t,o),i=i.next}while(i!==r)}hl(e,t,n);break;case 1:if(!Ya&&(Ja(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Sc(n,t,a)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Ya=(r=Ya)||null!==n.memoizedState,hl(e,t,n),Ya=r):hl(e,t,n);break;default:hl(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $a),t.forEach(function(t){var r=kc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function pl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:cl=l.stateNode,ul=!1;break e;case 3:case 4:cl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===cl)throw Error(s(160));dl(o,a,i),cl=null,ul=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Sc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(pl(t,e),ml(e),4&r){try{tl(3,e,e.return),nl(3,e)}catch(m){Sc(e,e.return,m)}try{tl(5,e,e.return)}catch(m){Sc(e,e.return,m)}}break;case 1:pl(t,e),ml(e),512&r&&null!==n&&Ja(n,n.return);break;case 5:if(pl(t,e),ml(e),512&r&&null!==n&&Ja(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(m){Sc(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&X(i,o),_e(l,a);var u=_e(l,o);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];"style"===h?me(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):_(i,h,d,u)}switch(l){case"input":J(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(m){Sc(e,e.return,m)}}break;case 6:if(pl(t,e),ml(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Sc(e,e.return,m)}}break;case 3:if(pl(t,e),ml(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(m){Sc(e,e.return,m)}break;case 4:default:pl(t,e),ml(e);break;case 13:pl(t,e),ml(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Vl=Xe())),4&r&&fl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ya=(u=Ya)||h,pl(t,e),Ya=u):pl(t,e),ml(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Xa=e,h=e.child;null!==h;){for(d=Xa=h;null!==Xa;){switch(p=(f=Xa).child,f.tag){case 0:case 11:case 14:case 15:tl(4,f,f.return);break;case 1:Ja(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){r=f,n=f.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){Sc(r,n,m)}}break;case 5:Ja(f,f.return);break;case 22:if(null!==f.memoizedState){wl(d);continue}}null!==p?(p.return=f,Xa=p):wl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",a))}catch(m){Sc(e,e.return,m)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){Sc(e,e.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:pl(t,e),ml(e),4&r&&fl(e);case 21:}}function ml(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sl(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),ll(e,ol(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;al(e,ol(e),o);break;default:throw Error(s(161))}}catch(a){Sc(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Xa=e,vl(e,t,n)}function vl(e,t,n){for(var r=0!==(1&e.mode);null!==Xa;){var i=Xa,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Qa;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Ya;a=Qa;var c=Ya;if(Qa=o,(Ya=l)&&!c)for(Xa=i;null!==Xa;)l=(o=Xa).child,22===o.tag&&null!==o.memoizedState?bl(i):null!==l?(l.return=o,Xa=l):bl(i);for(;null!==s;)Xa=s,vl(s,t,n),s=s.sibling;Xa=i,Qa=a,Ya=c}_l(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Xa=s):_l(e)}}function _l(e){for(;null!==Xa;){var t=Xa;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ya||nl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ya)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:na(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Bs(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Bs(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&qt(d)}}}break;default:throw Error(s(163))}Ya||512&t.flags&&rl(t)}catch(f){Sc(t,t.return,f)}}if(t===e){Xa=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xa=n;break}Xa=t.return}}function wl(e){for(;null!==Xa;){var t=Xa;if(t===e){Xa=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xa=n;break}Xa=t.return}}function bl(e){for(;null!==Xa;){var t=Xa;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{nl(4,t)}catch(l){Sc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Sc(t,i,l)}}var s=t.return;try{rl(t)}catch(l){Sc(t,s,l)}break;case 5:var o=t.return;try{rl(t)}catch(l){Sc(t,o,l)}}}catch(l){Sc(t,t.return,l)}if(t===e){Xa=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Xa=a;break}Xa=t.return}}var El,Sl=Math.ceil,Cl=w.ReactCurrentDispatcher,Tl=w.ReactCurrentOwner,Il=w.ReactCurrentBatchConfig,kl=0,xl=null,Nl=null,Pl=0,Ol=0,Dl=Ci(0),Al=0,Rl=null,Ll=0,Ml=0,jl=0,Fl=null,Ul=null,Vl=0,zl=1/0,ql=null,Bl=!1,Hl=null,Wl=null,Gl=!1,Kl=null,Ql=0,Yl=0,$l=null,Xl=-1,Jl=0;function Zl(){return 0!==(6&kl)?Xe():-1!==Xl?Xl:Xl=Xe()}function ec(e){return 0===(1&e.mode)?1:0!==(2&kl)&&0!==Pl?Pl&-Pl:null!==gs.transition?(0===Jl&&(Jl=gt()),Jl):0!==(e=_t)?e:e=void 0===(e=window.event)?16:$t(e.type)}function tc(e,t,n,r){if(50<Yl)throw Yl=0,$l=null,Error(s(185));yt(e,n,r),0!==(2&kl)&&e===xl||(e===xl&&(0===(2&kl)&&(Ml|=n),4===Al&&oc(e,Pl)),nc(e,r),1===n&&0===kl&&0===(1&t.mode)&&(zl=Xe()+500,Ui&&qi()))}function nc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===xl?Pl:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ui=!0,zi(e)}(ac.bind(null,e)):zi(ac.bind(null,e)),oi(function(){0===(6&kl)&&qi()}),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=xc(n,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rc(e,t){if(Xl=-1,Jl=0,0!==(6&kl))throw Error(s(327));var n=e.callbackNode;if(bc()&&e.callbackNode!==n)return null;var r=dt(e,e===xl?Pl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=kl;kl|=2;var o=fc();for(xl===e&&Pl===t||(ql=null,zl=Xe()+500,hc(e,t));;)try{yc();break}catch(l){dc(e,l)}Is(),Cl.current=o,kl=i,null!==Nl?t=0:(xl=null,Pl=0,t=Al)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ic(e,i))),1===t)throw n=Rl,hc(e,0),oc(e,r),nc(e,Xe()),n;if(6===t)oc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,r))&&(0!==(o=pt(e))&&(r=o,t=ic(e,o))),1===t))throw n=Rl,hc(e,0),oc(e,r),nc(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:wc(e,Ul,ql);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=Vl+500-Xe())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){Zl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,Ul,ql),t);break}wc(e,Ul,ql);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sl(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,Ul,ql),r);break}wc(e,Ul,ql);break;default:throw Error(s(329))}}}return nc(e,Xe()),e.callbackNode===n?rc.bind(null,e):null}function ic(e,t){var n=Fl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Ul,Ul=n,null!==t&&sc(t)),e}function sc(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function oc(e,t){for(t&=~jl,t&=~Ml,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function ac(e){if(0!==(6&kl))throw Error(s(327));bc();var t=dt(e,0);if(0===(1&t))return nc(e,Xe()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ic(e,r))}if(1===n)throw n=Rl,hc(e,0),oc(e,t),nc(e,Xe()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Ul,ql),nc(e,Xe()),null}function lc(e,t){var n=kl;kl|=1;try{return e(t)}finally{0===(kl=n)&&(zl=Xe()+500,Ui&&qi())}}function cc(e){null!==Kl&&0===Kl.tag&&0===(6&kl)&&bc();var t=kl;kl|=1;var n=Il.transition,r=_t;try{if(Il.transition=null,_t=1,e)return e()}finally{_t=r,Il.transition=n,0===(6&(kl=t))&&qi()}}function uc(){Ol=Dl.current,Ti(Dl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Nl)for(n=Nl.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ai();break;case 3:$s(),Ti(Ni),Ti(xi),no();break;case 5:Js(r);break;case 4:$s();break;case 13:case 19:Ti(Zs);break;case 10:ks(r.type._context);break;case 22:case 23:uc()}n=n.return}if(xl=e,Nl=e=Dc(e.current,null),Pl=Ol=t,Al=0,Rl=null,jl=Ml=Ll=0,Ul=Fl=null,null!==Os){for(t=0;t<Os.length;t++)if(null!==(r=(n=Os[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}Os=null}return e}function dc(e,t){for(;;){var n=Nl;try{if(Is(),ro.current=Jo,co){for(var r=oo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}co=!1}if(so=0,lo=ao=oo=null,uo=!1,ho=0,Tl.current=null,null===n||null===n.return){Al=1,Rl=t,Nl=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Pl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ma(a);if(null!==p){p.flags&=-257,ya(p,a,l,0,t),1&p.mode&&ga(o,u,t),c=u;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}if(0===(1&t)){ga(o,u,t),pc();break e}c=Error(s(426))}else if(is&&1&l.mode){var y=ma(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ya(y,a,l,0,t),ps(ca(c,l));break e}}o=c=ca(c,l),4!==Al&&(Al=2),null===Fl?Fl=[o]:Fl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,zs(o,fa(0,c,t));break e;case 1:l=c;var v=o.type,_=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Wl||!Wl.has(_)))){o.flags|=65536,t&=-t,o.lanes|=t,zs(o,pa(o,l,t));break e}}o=o.return}while(null!==o)}_c(n)}catch(w){t=w,Nl===n&&null!==n&&(Nl=n=n.return);continue}break}}function fc(){var e=Cl.current;return Cl.current=Jo,null===e?Jo:e}function pc(){0!==Al&&3!==Al&&2!==Al||(Al=4),null===xl||0===(268435455&Ll)&&0===(268435455&Ml)||oc(xl,Pl)}function gc(e,t){var n=kl;kl|=2;var r=fc();for(xl===e&&Pl===t||(ql=null,hc(e,t));;)try{mc();break}catch(i){dc(e,i)}if(Is(),kl=n,Cl.current=r,null!==Nl)throw Error(s(261));return xl=null,Pl=0,Al}function mc(){for(;null!==Nl;)vc(Nl)}function yc(){for(;null!==Nl&&!Ye();)vc(Nl)}function vc(e){var t=El(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===t?_c(e):Nl=t,Tl.current=null}function _c(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ga(n,t,Ol)))return void(Nl=n)}else{if(null!==(n=Ka(n,t)))return n.flags&=32767,void(Nl=n);if(null===e)return Al=6,void(Nl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Nl=t);Nl=t=e}while(null!==t);0===Al&&(Al=5)}function wc(e,t,n){var r=_t,i=Il.transition;try{Il.transition=null,_t=1,function(e,t,n,r){do{bc()}while(null!==Kl);if(0!==(6&kl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===xl&&(Nl=xl=null,Pl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gl||(Gl=!0,xc(tt,function(){return bc(),null})),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Il.transition,Il.transition=null;var a=_t;_t=1;var l=kl;kl|=4,Tl.current=null,function(e,t){if(ei=Ht,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(b){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==o||0!==r&&3!==d.nodeType||(c=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(l=a),f===o&&++h===r&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,Xa=t;null!==Xa;)if(e=(t=Xa).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xa=e;else for(;null!==Xa;){t=Xa;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,y=g.memoizedState,v=t.stateNode,_=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:na(t.type,m),y);v.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(s(163))}}catch(b){Sc(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,Xa=e;break}Xa=t.return}g=el,el=!1}(e,n),gl(n,e),pr(ti),Ht=!!ei,ti=ei=null,e.current=n,yl(n,e,i),$e(),kl=l,_t=a,Il.transition=o}else e.current=n;if(Gl&&(Gl=!1,Kl=e,Ql=i),o=e.pendingLanes,0===o&&(Wl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),nc(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Bl)throw Bl=!1,e=Hl,Hl=null,e;0!==(1&Ql)&&0!==e.tag&&bc(),o=e.pendingLanes,0!==(1&o)?e===$l?Yl++:(Yl=0,$l=e):Yl=0,qi()}(e,t,n,r)}finally{Il.transition=i,_t=r}return null}function bc(){if(null!==Kl){var e=wt(Ql),t=Il.transition,n=_t;try{if(Il.transition=null,_t=16>e?16:e,null===Kl)var r=!1;else{if(e=Kl,Kl=null,Ql=0,0!==(6&kl))throw Error(s(331));var i=kl;for(kl|=4,Xa=e.current;null!==Xa;){var o=Xa,a=o.child;if(0!==(16&Xa.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Xa=u;null!==Xa;){var h=Xa;switch(h.tag){case 0:case 11:case 15:tl(8,h,o)}var d=h.child;if(null!==d)d.return=h,Xa=d;else for(;null!==Xa;){var f=(h=Xa).sibling,p=h.return;if(il(h),h===u){Xa=null;break}if(null!==f){f.return=p,Xa=f;break}Xa=p}}}var g=o.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Xa=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Xa=a;else e:for(;null!==Xa;){if(0!==(2048&(o=Xa).flags))switch(o.tag){case 0:case 11:case 15:tl(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,Xa=v;break e}Xa=o.return}}var _=e.current;for(Xa=_;null!==Xa;){var w=(a=Xa).child;if(0!==(2064&a.subtreeFlags)&&null!==w)w.return=a,Xa=w;else e:for(a=_;null!==Xa;){if(0!==(2048&(l=Xa).flags))try{switch(l.tag){case 0:case 11:case 15:nl(9,l)}}catch(E){Sc(l,l.return,E)}if(l===a){Xa=null;break e}var b=l.sibling;if(null!==b){b.return=l.return,Xa=b;break e}Xa=l.return}}if(kl=i,qi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(E){}r=!0}return r}finally{_t=n,Il.transition=t}}return!1}function Ec(e,t,n){e=Us(e,t=fa(0,t=ca(n,t),1),1),t=Zl(),null!==e&&(yt(e,1,t),nc(e,t))}function Sc(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Wl||!Wl.has(r))){t=Us(t,e=pa(t,e=ca(n,e),1),1),e=Zl(),null!==t&&(yt(t,1,e),nc(t,e));break}}t=t.return}}function Cc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Zl(),e.pingedLanes|=e.suspendedLanes&n,xl===e&&(Pl&n)===n&&(4===Al||3===Al&&(130023424&Pl)===Pl&&500>Xe()-Vl?hc(e,0):jl|=n),nc(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=Zl();null!==(e=Rs(e,t))&&(yt(e,t,n),nc(e,n))}function Ic(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function kc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Tc(e,n)}function xc(e,t){return Ke(e,t)}function Nc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Nc(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ac(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Oc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case S:return Rc(n.children,i,o,t);case C:a=8,i|=8;break;case T:return(e=Pc(12,n,t,2|i)).elementType=T,e.lanes=o,e;case N:return(e=Pc(13,n,t,i)).elementType=N,e.lanes=o,e;case P:return(e=Pc(19,n,t,i)).elementType=P,e.lanes=o,e;case A:return Lc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case I:a=10;break e;case k:a=9;break e;case x:a=11;break e;case O:a=14;break e;case D:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Pc(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Rc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=A,e.lanes=n,e.stateNode={isHidden:!1},e}function Mc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function jc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,r,i,s,o,a,l){return e=new Fc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Pc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ms(s),e}function Vc(e){if(!e)return ki;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Di(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Di(n))return Li(e,n,t)}return t}function zc(e,t,n,r,i,s,o,a,l){return(e=Uc(n,r,!0,e,0,s,0,a,l)).context=Vc(null),n=e.current,(s=Fs(r=Zl(),i=ec(n))).callback=void 0!==t&&null!==t?t:null,Us(n,s,i),e.current.lanes=i,yt(e,i,r),nc(e,r),e}function qc(e,t,n,r){var i=t.current,s=Zl(),o=ec(i);return n=Vc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fs(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Us(i,t,o))&&(tc(e,i,o,s),Vs(e,i,o)),o}function Bc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}El=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)_a=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return _a=!1,function(e,t,n){switch(t.tag){case 3:Na(t),fs();break;case 5:Xs(t);break;case 1:Di(t.type)&&Mi(t);break;case 4:Ys(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ii(Es,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ii(Zs,1&Zs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ma(e,t,n):(Ii(Zs,1&Zs.current),null!==(e=Ba(e,t,n))?e.sibling:null);Ii(Zs,1&Zs.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return za(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ii(Zs,Zs.current),r)break;return null;case 22:case 23:return t.lanes=0,Ca(e,t,n)}return Ba(e,t,n)}(e,t,n);_a=0!==(131072&e.flags)}else _a=!1,is&&0!==(1048576&t.flags)&&Zi(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qa(e,t),e=t.pendingProps;var i=Oi(t,xi.current);Ns(t,n),i=mo(null,t,r,e,i,n);var o=yo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Di(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ms(t),i.updater=ia,t.stateNode=i,i._reactInternals=t,la(t,r,e,n),t=xa(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),wa(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qa(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===x)return 11;if(e===O)return 14}return 2}(r),e=na(r,e),i){case 0:t=Ia(null,t,r,e,n);break e;case 1:t=ka(null,t,r,e,n);break e;case 11:t=ba(null,t,r,e,n);break e;case 14:t=Ea(null,t,r,na(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ia(e,t,r,i=t.elementType===r?i:na(r,i),n);case 1:return r=t.type,i=t.pendingProps,ka(e,t,r,i=t.elementType===r?i:na(r,i),n);case 3:e:{if(Na(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,js(e,t),qs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Pa(e,t,r,n,i=ca(Error(s(423)),t));break e}if(r!==i){t=Pa(e,t,r,n,i=ca(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=bs(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Ba(e,t,n);break e}wa(e,t,r,n)}t=t.child}return t;case 5:return Xs(t),null===e&&cs(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),Ta(e,t),wa(e,t,a,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Ma(e,t,n);case 4:return Ys(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ws(t,null,r,n):wa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ba(e,t,r,i=t.elementType===r?i:na(r,i),n);case 7:return wa(e,t,t.pendingProps,n),t.child;case 8:case 12:return wa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Ii(Es,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Ni.current){t=Ba(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Fs(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),xs(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),xs(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}wa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ns(t,n),r=r(i=Ps(i)),t.flags|=1,wa(e,t,r,n),t.child;case 14:return i=na(r=t.type,t.pendingProps),Ea(e,t,r,i=na(r.type,i),n);case 15:return Sa(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:na(r,i),qa(e,t),t.tag=1,Di(r)?(e=!0,Mi(t)):e=!1,Ns(t,n),oa(t,r,i),la(t,r,i,n),xa(null,t,r,!0,e,n);case 19:return za(e,t,n);case 22:return Ca(e,t,n)}throw Error(s(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Kc(e){this._internalRoot=e}function Qc(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function Jc(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Bc(o);a.call(e)}}qc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Bc(o);s.call(e)}}var o=zc(t,r,e,0,null,!1,0,"",Xc);return e._reactRootContainer=o,e[pi]=o.current,qr(8===e.nodeType?e.parentNode:e),cc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Bc(l);a.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=l,e[pi]=l.current,qr(8===e.nodeType?e.parentNode:e),cc(function(){qc(t,l,n,r)}),l}(n,t,e,i,r);return Bc(o)}Qc.prototype.render=Kc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));qc(e,t,null,null)},Qc.prototype.unmount=Kc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cc(function(){qc(null,e,null,null)}),t[pi]=null}},Qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ct();e={blockedOn:null,target:e,priority:t};for(var n=0;n<At.length&&0!==t&&t<At[n].priority;n++);At.splice(n,0,e),0===n&&jt(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),nc(t,Xe()),0===(6&kl)&&(zl=Xe()+500,qi()))}break;case 13:cc(function(){var t=Rs(e,1);if(null!==t){var n=Zl();tc(t,e,1,n)}}),Wc(e,1)}},Et=function(e){if(13===e.tag){var t=Rs(e,134217728);if(null!==t)tc(t,e,134217728,Zl());Wc(e,134217728)}},St=function(e){if(13===e.tag){var t=ec(e),n=Rs(e,t);if(null!==n)tc(n,e,t,Zl());Wc(e,t)}},Ct=function(){return _t},Tt=function(e,t){var n=_t;try{return _t=e,t()}finally{_t=n}},Ee=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=bi(r);if(!i)throw Error(s(90));K(r),J(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},xe=lc,Ne=cc;var Zc={usingClientEntryPoint:!1,Events:[_i,wi,bi,Ie,ke,lc]},eu={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tu={bundleType:eu.bundleType,version:eu.version,rendererPackageName:eu.rendererPackageName,rendererConfig:eu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:eu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var nu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nu.isDisabled&&nu.supportsFiber)try{it=nu.inject(tu),st=nu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Yc(e))throw Error(s(299));var n=!1,r="",i=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,qr(8===e.nodeType?e.parentNode:e),new Kc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return cc(e)},t.hydrate=function(e,t,n){if(!$c(t))throw Error(s(200));return Jc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,i,0,o,a),e[pi]=t.current,qr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Qc(t)},t.render=function(e,t,n){if(!$c(t))throw Error(s(200));return Jc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$c(e))throw Error(s(40));return!!e._reactRootContainer&&(cc(function(){Jc(null,null,e,!1,function(){e._reactRootContainer=null,e[pi]=null})}),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$c(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Jc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},740(e){"use strict";e.exports=function(e,t,n,r,i,s,o,a){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,s,o,a],u=0;(l=new Error(t.replace(/%s/g,function(){return c[u++]}))).name="Invariant Violation"}throw l.framesToPop=1,l}}},853(e,t,n){"use strict";e.exports=n(234)},950(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},979(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.GA4=void 0;var r=l(n(148)),i=l(n(380)),s=["eventCategory","eventAction","eventLabel","eventValue","hitType"],o=["title","location"],a=["page","hitType"];function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function h(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||g(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){v(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}(e,t)||g(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){if(e){if("string"===typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_(r.key),r)}}function v(e,t,n){return(t=_(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===u(t)?t:String(t)}var w=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),v(this,"reset",function(){t.isInitialized=!1,t._testMode=!1,t._currentMeasurementId,t._hasLoadedGA=!1,t._isQueuing=!1,t._queueGtag=[]}),v(this,"_gtag",function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];t._testMode||t._isQueuing?t._queueGtag.push(n):r.default.apply(void 0,n)}),v(this,"_loadGA",function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"https://www.googletagmanager.com/gtag/js";if("undefined"!==typeof window&&"undefined"!==typeof document&&!t._hasLoadedGA){var i=document.createElement("script");i.async=!0,i.src="".concat(r,"?id=").concat(e),n&&i.setAttribute("nonce",n),document.body.appendChild(i),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},t._hasLoadedGA=!0}}),v(this,"_toGtagOptions",function(e){if(e){var t={cookieUpdate:"cookie_update",cookieExpires:"cookie_expires",cookieDomain:"cookie_domain",cookieFlags:"cookie_flags",userId:"user_id",clientId:"client_id",anonymizeIp:"anonymize_ip",contentGroup1:"content_group1",contentGroup2:"content_group2",contentGroup3:"content_group3",contentGroup4:"content_group4",contentGroup5:"content_group5",allowAdFeatures:"allow_google_signals",allowAdPersonalizationSignals:"allow_ad_personalization_signals",nonInteraction:"non_interaction",page:"page_path",hitCallback:"event_callback"};return Object.entries(e).reduce(function(e,n){var r=p(n,2),i=r[0],s=r[1];return t[i]?e[t[i]]=s:e[i]=s,e},{})}}),v(this,"initialize",function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)throw new Error("Require GA_MEASUREMENT_ID");var r="string"===typeof e?[{trackingId:e}]:e;t._currentMeasurementId=r[0].trackingId;var i=n.gaOptions,s=n.gtagOptions,o=n.nonce,a=n.testMode,l=void 0!==a&&a,c=n.gtagUrl;if(t._testMode=l,l||t._loadGA(t._currentMeasurementId,o,c),t.isInitialized||(t._gtag("js",new Date),r.forEach(function(e){var n=f(f(f({},t._toGtagOptions(f(f({},i),e.gaOptions))),s),e.gtagOptions);Object.keys(n).length?t._gtag("config",e.trackingId,n):t._gtag("config",e.trackingId)})),t.isInitialized=!0,!l){var u=h(t._queueGtag);for(t._queueGtag=[],t._isQueuing=!1;u.length;){var d=u.shift();t._gtag.apply(t,h(d)),"get"===d[0]&&(t._isQueuing=!0)}}}),v(this,"set",function(e){e?"object"===u(e)?(0===Object.keys(e).length&&console.warn("empty `fieldsObject` given to .set()"),t._gaCommand("set",e)):console.warn("Expected `fieldsObject` arg to be an Object"):console.warn("`fieldsObject` is required in .set()")}),v(this,"_gaCommandSendEvent",function(e,n,r,i,s){t._gtag("event",n,f(f({event_category:e,event_label:r,value:i},s&&{non_interaction:s.nonInteraction}),t._toGtagOptions(s)))}),v(this,"_gaCommandSendEventParameters",function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if("string"===typeof n[0])t._gaCommandSendEvent.apply(t,h(n.slice(1)));else{var i=n[0],o=i.eventCategory,a=i.eventAction,l=i.eventLabel,u=i.eventValue,d=(i.hitType,c(i,s));t._gaCommandSendEvent(o,a,l,u,d)}}),v(this,"_gaCommandSendTiming",function(e,n,r,i){t._gtag("event","timing_complete",{name:n,value:r,event_category:e,event_label:i})}),v(this,"_gaCommandSendPageview",function(e,n){if(n&&Object.keys(n).length){var r=t._toGtagOptions(n),i=r.title,s=r.location,a=c(r,o);t._gtag("event","page_view",f(f(f(f({},e&&{page_path:e}),i&&{page_title:i}),s&&{page_location:s}),a))}else e?t._gtag("event","page_view",{page_path:e}):t._gtag("event","page_view")}),v(this,"_gaCommandSendPageviewParameters",function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if("string"===typeof n[0])t._gaCommandSendPageview.apply(t,h(n.slice(1)));else{var i=n[0],s=i.page,o=(i.hitType,c(i,a));t._gaCommandSendPageview(s,o)}}),v(this,"_gaCommandSend",function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i="string"===typeof n[0]?n[0]:n[0].hitType;switch(i){case"event":t._gaCommandSendEventParameters.apply(t,n);break;case"pageview":t._gaCommandSendPageviewParameters.apply(t,n);break;case"timing":t._gaCommandSendTiming.apply(t,h(n.slice(1)));break;case"screenview":case"transaction":case"item":case"social":case"exception":console.warn("Unsupported send command: ".concat(i));break;default:console.warn("Send command doesn't exist: ".concat(i))}}),v(this,"_gaCommandSet",function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];"string"===typeof n[0]&&(n[0]=v({},n[0],n[1])),t._gtag("set",t._toGtagOptions(n[0]))}),v(this,"_gaCommand",function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];switch(e){case"send":t._gaCommandSend.apply(t,r);break;case"set":t._gaCommandSet.apply(t,r);break;default:console.warn("Command doesn't exist: ".concat(e))}}),v(this,"ga",function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if("string"===typeof n[0])t._gaCommand.apply(t,n);else{var i=n[0];t._gtag("get",t._currentMeasurementId,"client_id",function(e){t._isQueuing=!1;var n=t._queueGtag;for(i({get:function(n){return"clientId"===n?e:"trackingId"===n?t._currentMeasurementId:"apiVersion"===n?"1":void 0}});n.length;){var r=n.shift();t._gtag.apply(t,h(r))}}),t._isQueuing=!0}return t.ga}),v(this,"event",function(e,n){if("string"===typeof e)t._gtag("event",e,t._toGtagOptions(n));else{var r=e.action,s=e.category,o=e.label,a=e.value,l=e.nonInteraction,c=e.transport;if(!s||!r)return void console.warn("args.category AND args.action are required in event()");var u={hitType:"event",eventCategory:(0,i.default)(s),eventAction:(0,i.default)(r)};o&&(u.eventLabel=(0,i.default)(o)),"undefined"!==typeof a&&("number"!==typeof a?console.warn("Expected `args.value` arg to be a Number."):u.eventValue=a),"undefined"!==typeof l&&("boolean"!==typeof l?console.warn("`args.nonInteraction` must be a boolean."):u.nonInteraction=l),"undefined"!==typeof c&&("string"!==typeof c?console.warn("`args.transport` must be a string."):(-1===["beacon","xhr","image"].indexOf(c)&&console.warn("`args.transport` must be either one of these values: `beacon`, `xhr` or `image`"),u.transport=c)),t._gaCommand("send",u)}}),v(this,"send",function(e){t._gaCommand("send",e)}),this.reset()}var t,n,l;return t=e,n=[{key:"gtag",value:function(){this._gtag.apply(this,arguments)}}],n&&y(t.prototype,n),l&&y(t,l),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.GA4=w;var b=new w;t.default=b}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;("object"==typeof a||"function"==typeof a)&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach(e=>o[e]=()=>r[e]);return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{"use strict";var e={};n.r(e),n.d(e,{FILE:()=>En,HTML:()=>Tn,TEXT:()=>Cn,URL:()=>Sn});var t,r=n(43),i=n.t(r,2),s=n(391),o=n(950),a=n.t(o,2);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));const c="popstate";function u(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function h(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function d(e,t){return{usr:e.state,key:e.key,idx:t}}function f(e,t,n,r){return void 0===n&&(n=null),l({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?g(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function p(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function g(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function m(e,n,r,i){void 0===i&&(i={});let{window:s=document.defaultView,v5Compat:o=!1}=i,a=s.history,h=t.Pop,g=null,m=y();function y(){return(a.state||{idx:null}).idx}function v(){h=t.Pop;let e=y(),n=null==e?null:e-m;m=e,g&&g({action:h,location:w.location,delta:n})}function _(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:p(e);return n=n.replace(/ $/,"%20"),u(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==m&&(m=0,a.replaceState(l({},a.state,{idx:m}),""));let w={get action(){return h},get location(){return e(s,a)},listen(e){if(g)throw new Error("A history only accepts one active listener");return s.addEventListener(c,v),g=e,()=>{s.removeEventListener(c,v),g=null}},createHref:e=>n(s,e),createURL:_,encodeLocation(e){let t=_(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){h=t.Push;let i=f(w.location,e,n);r&&r(i,e),m=y()+1;let l=d(i,m),c=w.createHref(i);try{a.pushState(l,"",c)}catch(ow){if(ow instanceof DOMException&&"DataCloneError"===ow.name)throw ow;s.location.assign(c)}o&&g&&g({action:h,location:w.location,delta:1})},replace:function(e,n){h=t.Replace;let i=f(w.location,e,n);r&&r(i,e),m=y();let s=d(i,m),l=w.createHref(i);a.replaceState(s,"",l),o&&g&&g({action:h,location:w.location,delta:0})},go:e=>a.go(e)};return w}var y;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(y||(y={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function v(e,t,n){return void 0===n&&(n="/"),_(e,t,n,!1)}function _(e,t,n,r){let i=A(("string"===typeof t?g(t):t).pathname||"/",n);if(null==i)return null;let s=w(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let o=null;for(let a=0;null==o&&a<s.length;++a){let e=D(i);o=P(s[a],e,r)}return o}function w(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(u(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=F([r,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(u(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),w(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:N(a,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of b(e.path))i(e,t,r);else i(e,t)}),t}function b(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=b(r.join("/")),a=[];return a.push(...o.map(e=>""===e?s:[s,e].join("/"))),i&&a.push(...o),a.map(t=>e.startsWith("/")&&""===t?"/":t)}const E=/^:[\w-]+$/,S=3,C=2,T=1,I=10,k=-2,x=e=>"*"===e;function N(e,t){let n=e.split("/"),r=n.length;return n.some(x)&&(r+=k),t&&(r+=C),n.filter(e=>!x(e)).reduce((e,t)=>e+(E.test(t)?S:""===t?T:I),r)}function P(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},s="/",o=[];for(let a=0;a<r.length;++a){let e=r[a],l=a===r.length-1,c="/"===s?t:t.slice(s.length)||"/",u=O({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),h=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=O({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),o.push({params:i,pathname:F([s,u.pathname]),pathnameBase:U(F([s,u.pathnameBase])),route:h}),"/"!==u.pathnameBase&&(s=F([s,u.pathnameBase]))}return o}function O(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);h("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:s,pathnameBase:o,pattern:e}}function D(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(ow){return h(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+ow+")."),e}}function A(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function R(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function L(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function M(e,t){let n=L(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function j(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=g(e):(i=l({},e),u(!i.pathname||!i.pathname.includes("?"),R("?","pathname","search",i)),u(!i.pathname||!i.pathname.includes("#"),R("#","pathname","hash",i)),u(!i.search||!i.search.includes("#"),R("#","search","hash",i)));let s,o=""===e||""===i.pathname,a=o?"/":i.pathname;if(null==a)s=n;else{let e=t.length-1;if(!r&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let c=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?g(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:V(r),hash:z(i)}}(i,s),h=a&&"/"!==a&&a.endsWith("/"),d=(o||"."===a)&&n.endsWith("/");return c.pathname.endsWith("/")||!h&&!d||(c.pathname+="/"),c}const F=e=>e.join("/").replace(/\/\/+/g,"/"),U=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),V=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",z=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function q(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const B=["post","put","patch","delete"],H=(new Set(B),["get",...B]);new Set(H),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W.apply(this,arguments)}const G=r.createContext(null);const K=r.createContext(null);const Q=r.createContext(null);const Y=r.createContext(null);const $=r.createContext({outlet:null,matches:[],isDataRoute:!1});const X=r.createContext(null);function J(){return null!=r.useContext(Y)}function Z(){return J()||u(!1),r.useContext(Y).location}function ee(e){J()||u(!1);let{pathname:t}=Z();return r.useMemo(()=>O(e,D(t)),[t,e])}function te(e){r.useContext(Q).static||r.useLayoutEffect(e)}function ne(){let{isDataRoute:e}=r.useContext($);return e?function(){let{router:e}=fe(he.UseNavigateStable),t=ge(de.UseNavigateStable),n=r.useRef(!1);return te(()=>{n.current=!0}),r.useCallback(function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,W({fromRouteId:t},i)))},[e,t])}():function(){J()||u(!1);let e=r.useContext(G),{basename:t,future:n,navigator:i}=r.useContext(Q),{matches:s}=r.useContext($),{pathname:o}=Z(),a=JSON.stringify(M(s,n.v7_relativeSplatPath)),l=r.useRef(!1);return te(()=>{l.current=!0}),r.useCallback(function(n,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof n)return void i.go(n);let s=j(n,JSON.parse(a),o,"path"===r.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:F([t,s.pathname])),(r.replace?i.replace:i.push)(s,r.state,r)},[t,i,a,o,e])}()}function re(){let{matches:e}=r.useContext($),t=e[e.length-1];return t?t.params:{}}function ie(e,t){let{relative:n}=void 0===t?{}:t,{future:i}=r.useContext(Q),{matches:s}=r.useContext($),{pathname:o}=Z(),a=JSON.stringify(M(s,i.v7_relativeSplatPath));return r.useMemo(()=>j(e,JSON.parse(a),o,"path"===n),[e,a,o,n])}function se(e,n,i,s){J()||u(!1);let{navigator:o}=r.useContext(Q),{matches:a}=r.useContext($),l=a[a.length-1],c=l?l.params:{},h=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let d,f=Z();if(n){var p;let e="string"===typeof n?g(n):n;"/"===h||(null==(p=e.pathname)?void 0:p.startsWith(h))||u(!1),d=e}else d=f;let m=d.pathname||"/",y=m;if("/"!==h){let e=h.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(e.length).join("/")}let _=v(e,{pathname:y});let w=ue(_&&_.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:F([h,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:F([h,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),a,i,s);return n&&w?r.createElement(Y.Provider,{value:{location:W({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:t.Pop}},w):w}function oe(){let e=function(){var e;let t=r.useContext(X),n=pe(de.UseRouteError),i=ge(de.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=q(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:s},n):null,null)}const ae=r.createElement(oe,null);class le extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement($.Provider,{value:this.props.routeContext},r.createElement(X.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ce(e){let{routeContext:t,match:n,children:i}=e,s=r.useContext(G);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement($.Provider,{value:t},i)}function ue(e,t,n,i){var s;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===i&&(i=null),null==e){var o;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(o=i)&&o.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let a=e,l=null==(s=n)?void 0:s.errors;if(null!=l){let e=a.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||u(!1),a=a.slice(0,Math.min(a.length,e+1))}let c=!1,h=-1;if(n&&i&&i.v7_partialHydration)for(let r=0;r<a.length;r++){let e=a[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(h=r),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){c=!0,a=h>=0?a.slice(0,h+1):[a[0]];break}}}return a.reduceRight((e,i,s)=>{let o,u=!1,d=null,f=null;var p;n&&(o=l&&i.route.id?l[i.route.id]:void 0,d=i.route.errorElement||ae,c&&(h<0&&0===s?(p="route-fallback",!1||me[p]||(me[p]=!0),u=!0,f=null):h===s&&(u=!0,f=i.route.hydrateFallbackElement||null)));let g=t.concat(a.slice(0,s+1)),m=()=>{let t;return t=o?d:u?f:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(ce,{match:i,routeContext:{outlet:e,matches:g,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===s)?r.createElement(le,{location:n.location,revalidation:n.revalidation,component:d,error:o,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()},null)}var he=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(he||{}),de=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(de||{});function fe(e){let t=r.useContext(G);return t||u(!1),t}function pe(e){let t=r.useContext(K);return t||u(!1),t}function ge(e){let t=function(){let e=r.useContext($);return e||u(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||u(!1),n.route.id}const me={};i.startTransition;function ye(e){let{to:t,replace:n,state:i,relative:s}=e;J()||u(!1);let{future:o,static:a}=r.useContext(Q),{matches:l}=r.useContext($),{pathname:c}=Z(),h=ne(),d=j(t,M(l,o.v7_relativeSplatPath),c,"path"===s),f=JSON.stringify(d);return r.useEffect(()=>h(JSON.parse(f),{replace:n,state:i,relative:s}),[h,f,s,n,i]),null}function ve(e){u(!1)}function _e(e){let{basename:n="/",children:i=null,location:s,navigationType:o=t.Pop,navigator:a,static:l=!1,future:c}=e;J()&&u(!1);let h=n.replace(/^\/*/,"/"),d=r.useMemo(()=>({basename:h,navigator:a,static:l,future:W({v7_relativeSplatPath:!1},c)}),[h,c,a,l]);"string"===typeof s&&(s=g(s));let{pathname:f="/",search:p="",hash:m="",state:y=null,key:v="default"}=s,_=r.useMemo(()=>{let e=A(f,h);return null==e?null:{location:{pathname:e,search:p,hash:m,state:y,key:v},navigationType:o}},[h,f,p,m,y,v,o]);return null==_?null:r.createElement(Q.Provider,{value:d},r.createElement(Y.Provider,{children:i,value:_}))}function we(e){let{children:t,location:n}=e;return se(be(t),n)}new Promise(()=>{});r.Component;function be(e,t){void 0===t&&(t=[]);let n=[];return r.Children.forEach(e,(e,i)=>{if(!r.isValidElement(e))return;let s=[...t,i];if(e.type===r.Fragment)return void n.push.apply(n,be(e.props.children,s));e.type!==ve&&u(!1),e.props.index&&e.props.children&&u(!1);let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=be(e.props.children,s)),n.push(o)}),n}function Ee(){return Ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ee.apply(this,arguments)}function Se(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function Ce(e){return void 0===e&&(e=""),new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(e=>[n,e]):[[n,r]])},[]))}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Te=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];try{window.__reactRouterVersion="6"}catch(sk){}new Map;const Ie=i.startTransition;a.flushSync,i.useId;function ke(e){let{basename:t,children:n,future:i,window:s}=e,o=r.useRef();var a;null==o.current&&(o.current=(void 0===(a={window:s,v5Compat:!0})&&(a={}),m(function(e,t){let{pathname:n="/",search:r="",hash:i=""}=g(e.location.hash.substr(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),f("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){let n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");r=-1===n?t:t.slice(0,n)}return r+"#"+("string"===typeof t?t:p(t))},function(e,t){h("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")},a)));let l=o.current,[c,u]=r.useState({action:l.action,location:l.location}),{v7_startTransition:d}=i||{},y=r.useCallback(e=>{d&&Ie?Ie(()=>u(e)):u(e)},[u,d]);return r.useLayoutEffect(()=>l.listen(y),[l,y]),r.createElement(_e,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:i})}const xe="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ne=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Pe=r.forwardRef(function(e,t){let n,{onClick:i,relative:s,reloadDocument:o,replace:a,state:l,target:c,to:h,preventScrollReset:d,unstable_viewTransition:f}=e,g=Se(e,Te),{basename:m}=r.useContext(Q),y=!1;if("string"===typeof h&&Ne.test(h)&&(n=h,xe))try{let e=new URL(window.location.href),t=h.startsWith("//")?new URL(e.protocol+h):new URL(h),n=A(t.pathname,m);t.origin===e.origin&&null!=n?h=n+t.search+t.hash:y=!0}catch(sk){}let v=function(e,t){let{relative:n}=void 0===t?{}:t;J()||u(!1);let{basename:i,navigator:s}=r.useContext(Q),{hash:o,pathname:a,search:l}=ie(e,{relative:n}),c=a;return"/"!==i&&(c="/"===a?i:F([i,a])),s.createHref({pathname:c,search:l,hash:o})}(h,{relative:s}),_=function(e,t){let{target:n,replace:i,state:s,preventScrollReset:o,relative:a,unstable_viewTransition:l}=void 0===t?{}:t,c=ne(),u=Z(),h=ie(e,{relative:a});return r.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==i?i:p(u)===p(h);c(e,{replace:n,state:s,preventScrollReset:o,relative:a,unstable_viewTransition:l})}},[u,c,h,i,s,n,e,o,a,l])}(h,{replace:a,state:l,target:c,preventScrollReset:d,relative:s,unstable_viewTransition:f});return r.createElement("a",Ee({},g,{href:n||v,onClick:y||o?i:function(e){i&&i(e),e.defaultPrevented||_(e)},ref:t,target:c}))});var Oe,De;function Ae(e){let t=r.useRef(Ce(e)),n=r.useRef(!1),i=Z(),s=r.useMemo(()=>function(e,t){let n=Ce(e);return t&&t.forEach((e,r)=>{n.has(r)||t.getAll(r).forEach(e=>{n.append(r,e)})}),n}(i.search,n.current?null:t.current),[i.search]),o=ne(),a=r.useCallback((e,t)=>{const r=Ce("function"===typeof e?e(s):e);n.current=!0,o("?"+r,t)},[o,s]);return[s,a]}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Oe||(Oe={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(De||(De={}));var Re=n(579);function Le(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Me="function"===typeof Symbol&&Symbol.observable||"@@observable",je=function(){return Math.random().toString(36).substring(7).split("").join(".")},Fe={INIT:"@@redux/INIT"+je(),REPLACE:"@@redux/REPLACE"+je(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+je()}};function Ue(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Ve(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(Le(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(Le(1));return n(Ve)(e,t)}if("function"!==typeof e)throw new Error(Le(2));var i=e,s=t,o=[],a=o,l=!1;function c(){a===o&&(a=o.slice())}function u(){if(l)throw new Error(Le(3));return s}function h(e){if("function"!==typeof e)throw new Error(Le(4));if(l)throw new Error(Le(5));var t=!0;return c(),a.push(e),function(){if(t){if(l)throw new Error(Le(6));t=!1,c();var n=a.indexOf(e);a.splice(n,1),o=null}}}function d(e){if(!Ue(e))throw new Error(Le(7));if("undefined"===typeof e.type)throw new Error(Le(8));if(l)throw new Error(Le(9));try{l=!0,s=i(s,e)}finally{l=!1}for(var t=o=a,n=0;n<t.length;n++){(0,t[n])()}return e}return d({type:Fe.INIT}),(r={dispatch:d,subscribe:h,getState:u,replaceReducer:function(e){if("function"!==typeof e)throw new Error(Le(10));i=e,d({type:Fe.REPLACE})}})[Me]=function(){var e,t=h;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(Le(11));function n(){e.next&&e.next(u())}return n(),{unsubscribe:t(n)}}})[Me]=function(){return this},e},r}function ze(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if("undefined"!==typeof process&&void 0===t)throw new Error("invariant requires an error message argument");if(!e){let e;if(void 0===t)e=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let n=0;e=new Error(t.replace(/%s/g,function(){return r[n++]})),e.name="Invariant Violation"}throw e.framesToPop=1,e}}function qe(e){return"object"===typeof e}const Be="dnd-core/INIT_COORDS",He="dnd-core/BEGIN_DRAG",We="dnd-core/PUBLISH_DRAG_SOURCE",Ge="dnd-core/HOVER",Ke="dnd-core/DROP",Qe="dnd-core/END_DRAG";function Ye(e,t){return{type:Be,payload:{sourceClientOffset:t||null,clientOffset:e||null}}}const $e={type:Be,payload:{clientOffset:null,sourceClientOffset:null}};function Xe(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{publishSource:!0};const{publishSource:r=!0,clientOffset:i,getSourceClientOffset:s}=n,o=e.getMonitor(),a=e.getRegistry();e.dispatch(Ye(i)),function(e,t,n){ze(!t.isDragging(),"Cannot call beginDrag while dragging."),e.forEach(function(e){ze(n.getSource(e),"Expected sourceIds to be registered.")})}(t,o,a);const l=function(e,t){let n=null;for(let r=e.length-1;r>=0;r--)if(t.canDragSource(e[r])){n=e[r];break}return n}(t,o);if(null==l)return void e.dispatch($e);let c=null;if(i){if(!s)throw new Error("getSourceClientOffset must be defined");!function(e){ze("function"===typeof e,"When clientOffset is provided, getSourceClientOffset must be a function.")}(s),c=s(l)}e.dispatch(Ye(i,c));const u=a.getSource(l).beginDrag(o,l);if(null==u)return;!function(e){ze(qe(e),"Item must be an object.")}(u),a.pinSource(l);const h=a.getSourceType(l);return{type:He,payload:{itemType:h,item:u,sourceId:l,clientOffset:i||null,sourceClientOffset:c||null,isSourcePublic:!!r}}}}function Je(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Je(e,t,n[t])})}return e}function et(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=e.getMonitor(),r=e.getRegistry();!function(e){ze(e.isDragging(),"Cannot call drop while not dragging."),ze(!e.didDrop(),"Cannot call drop twice during one drag operation.")}(n);const i=function(e){const t=e.getTargetIds().filter(e.canDropOnTarget,e);return t.reverse(),t}(n);i.forEach((i,s)=>{const o=function(e,t,n,r){const i=n.getTarget(e);let s=i?i.drop(r,e):void 0;(function(e){ze("undefined"===typeof e||qe(e),"Drop result must either be an object or undefined.")})(s),"undefined"===typeof s&&(s=0===t?{}:r.getDropResult());return s}(i,s,r,n),a={type:Ke,payload:{dropResult:Ze({},t,o)}};e.dispatch(a)})}}function tt(e){return function(){const t=e.getMonitor(),n=e.getRegistry();!function(e){ze(e.isDragging(),"Cannot call endDrag while not dragging.")}(t);const r=t.getSourceId();if(null!=r){n.getSource(r,!0).endDrag(t,r),n.unpinSource()}return{type:Qe}}}function nt(e,t){return null===t?null===e:Array.isArray(e)?e.some(e=>e===t):e===t}function rt(e){return function(t){let{clientOffset:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e){ze(Array.isArray(e),"Expected targetIds to be an array.")}(t);const r=t.slice(0),i=e.getMonitor(),s=e.getRegistry();return function(e,t,n){for(let r=e.length-1;r>=0;r--){const i=e[r];nt(t.getTargetType(i),n)||e.splice(r,1)}}(r,s,i.getItemType()),function(e,t,n){ze(t.isDragging(),"Cannot call hover while not dragging."),ze(!t.didDrop(),"Cannot call hover after drop.");for(let r=0;r<e.length;r++){const t=e[r];ze(e.lastIndexOf(t)===r,"Expected targetIds to be unique in the passed array.");ze(n.getTarget(t),"Expected targetIds to be registered.")}}(r,i,s),function(e,t,n){e.forEach(function(e){n.getTarget(e).hover(t,e)})}(r,i,s),{type:Ge,payload:{targetIds:r,clientOffset:n||null}}}}function it(e){return function(){if(e.getMonitor().isDragging())return{type:We}}}class st{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:t}=this.store;const n=function(e){return{beginDrag:Xe(e),publishDragSource:it(e),hover:rt(e),drop:et(e),endDrag:tt(e)}}(this);return Object.keys(n).reduce((r,i)=>{const s=n[i];var o;return r[i]=(o=s,function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];const s=o.apply(e,r);"undefined"!==typeof s&&t(s)}),r},{})}dispatch(e){this.store.dispatch(e)}constructor(e,t){this.isSetUp=!1,this.handleRefCountChange=()=>{const e=this.store.getState().refCount>0;this.backend&&(e&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!e&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=t,e.subscribe(this.handleRefCountChange)}}function ot(e,t){return{x:e.x-t.x,y:e.y-t.y}}const at=[],lt=[];at.__IS_NONE__=!0,lt.__IS_ALL__=!0;class ct{subscribeToStateChange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{handlerIds:n}=t;ze("function"===typeof e,"listener must be a function."),ze("undefined"===typeof n||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");let r=this.store.getState().stateId;return this.store.subscribe(()=>{const t=this.store.getState(),i=t.stateId;try{const s=i===r||i===r+1&&!function(e,t){if(e===at)return!1;if(e===lt||"undefined"===typeof t)return!0;const n=(r=e,t.filter(e=>r.indexOf(e)>-1));var r;return n.length>0}(t.dirtyHandlerIds,n);s||e()}finally{r=i}})}subscribeToOffsetChange(e){ze("function"===typeof e,"listener must be a function.");let t=this.store.getState().dragOffset;return this.store.subscribe(()=>{const n=this.store.getState().dragOffset;n!==t&&(t=n,e())})}canDragSource(e){if(!e)return!1;const t=this.registry.getSource(e);return ze(t,"Expected to find a valid source. sourceId=".concat(e)),!this.isDragging()&&t.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const t=this.registry.getTarget(e);if(ze(t,"Expected to find a valid target. targetId=".concat(e)),!this.isDragging()||this.didDrop())return!1;return nt(this.registry.getTargetType(e),this.getItemType())&&t.canDrop(this,e)}isDragging(){return Boolean(this.getItemType())}isDraggingSource(e){if(!e)return!1;const t=this.registry.getSource(e,!0);if(ze(t,"Expected to find a valid source. sourceId=".concat(e)),!this.isDragging()||!this.isSourcePublic())return!1;return this.registry.getSourceType(e)===this.getItemType()&&t.isDragging(this,e)}isOverTarget(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shallow:!1};if(!e)return!1;const{shallow:n}=t;if(!this.isDragging())return!1;const r=this.registry.getTargetType(e),i=this.getItemType();if(i&&!nt(r,i))return!1;const s=this.getTargetIds();if(!s.length)return!1;const o=s.indexOf(e);return n?o===s.length-1:o>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return Boolean(this.store.getState().dragOperation.isSourcePublic)}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return function(e){const{clientOffset:t,initialClientOffset:n,initialSourceClientOffset:r}=e;return t&&n&&r?ot(function(e,t){return{x:e.x+t.x,y:e.y+t.y}}(t,r),n):null}(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return function(e){const{clientOffset:t,initialClientOffset:n}=e;return t&&n?ot(t,n):null}(this.store.getState().dragOffset)}constructor(e,t){this.store=e,this.registry=t}}const ut="undefined"!==typeof n.g?n.g:self,ht=ut.MutationObserver||ut.WebKitMutationObserver;function dt(e){return function(){const t=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(t),clearInterval(n),e()}}}const ft="function"===typeof ht?function(e){let t=1;const n=new ht(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}:dt;class pt{call(){try{this.task&&this.task()}catch(ow){this.onError(ow)}finally{this.task=null,this.release(this)}}constructor(e,t){this.onError=e,this.release=t,this.task=null}}const gt=new class{enqueueTask(e){const{queue:t,requestFlush:n}=this;t.length||(n(),this.flushing=!0),t[t.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const t=this.index;if(this.index++,e[t].call(),this.index>this.capacity){for(let t=0,n=e.length-this.index;t<n;t++)e[t]=e[t+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=ft(this.flush),this.requestErrorThrow=dt(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}},mt=new class{create(e){const t=this.freeTasks,n=t.length?t.pop():new pt(this.onError,e=>t[t.length]=e);return n.task=e,n}constructor(e){this.onError=e,this.freeTasks=[]}}(gt.registerPendingError);const yt="dnd-core/ADD_SOURCE",vt="dnd-core/ADD_TARGET",_t="dnd-core/REMOVE_SOURCE",wt="dnd-core/REMOVE_TARGET";function bt(e,t){t&&Array.isArray(e)?e.forEach(e=>bt(e,!1)):ze("string"===typeof e||"symbol"===typeof e,t?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var Et;!function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"}(Et||(Et={}));let St=0;function Ct(e){const t=(St++).toString();switch(e){case Et.SOURCE:return"S".concat(t);case Et.TARGET:return"T".concat(t);default:throw new Error("Unknown Handler Role: ".concat(e))}}function Tt(e){switch(e[0]){case"S":return Et.SOURCE;case"T":return Et.TARGET;default:throw new Error("Cannot parse handler ID: ".concat(e))}}function It(e,t){const n=e.entries();let r=!1;do{const{done:e,value:[,i]}=n.next();if(i===t)return!0;r=!!e}while(!r);return!1}class kt{addSource(e,t){bt(e),function(e){ze("function"===typeof e.canDrag,"Expected canDrag to be a function."),ze("function"===typeof e.beginDrag,"Expected beginDrag to be a function."),ze("function"===typeof e.endDrag,"Expected endDrag to be a function.")}(t);const n=this.addHandler(Et.SOURCE,e,t);return this.store.dispatch(function(e){return{type:yt,payload:{sourceId:e}}}(n)),n}addTarget(e,t){bt(e,!0),function(e){ze("function"===typeof e.canDrop,"Expected canDrop to be a function."),ze("function"===typeof e.hover,"Expected hover to be a function."),ze("function"===typeof e.drop,"Expected beginDrag to be a function.")}(t);const n=this.addHandler(Et.TARGET,e,t);return this.store.dispatch(function(e){return{type:vt,payload:{targetId:e}}}(n)),n}containsHandler(e){return It(this.dragSources,e)||It(this.dropTargets,e)}getSource(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];ze(this.isSourceId(e),"Expected a valid source ID.");return t&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return ze(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return ze(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return ze(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return Tt(e)===Et.SOURCE}isTargetId(e){return Tt(e)===Et.TARGET}removeSource(e){var t;ze(this.getSource(e),"Expected an existing source."),this.store.dispatch(function(e){return{type:_t,payload:{sourceId:e}}}(e)),t=()=>{this.dragSources.delete(e),this.types.delete(e)},gt.enqueueTask(mt.create(t))}removeTarget(e){ze(this.getTarget(e),"Expected an existing target."),this.store.dispatch(function(e){return{type:wt,payload:{targetId:e}}}(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const t=this.getSource(e);ze(t,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=t}unpinSource(){ze(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,t,n){const r=Ct(e);return this.types.set(r,t),e===Et.SOURCE?this.dragSources.set(r,n):e===Et.TARGET&&this.dropTargets.set(r,n),r}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const xt=(e,t)=>e===t;function Nt(){let e=arguments.length>1?arguments[1]:void 0;switch(e.type){case Ge:break;case yt:case vt:case wt:case _t:return at;default:return lt}const{targetIds:t=[],prevTargetIds:n=[]}=e.payload,r=function(e,t){const n=new Map,r=e=>{n.set(e,n.has(e)?n.get(e)+1:1)};e.forEach(r),t.forEach(r);const i=[];return n.forEach((e,t)=>{1===e&&i.push(t)}),i}(t,n),i=r.length>0||!function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:xt;if(e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(!n(e[r],t[r]))return!1;return!0}(t,n);if(!i)return at;const s=n[n.length-1],o=t[t.length-1];return s!==o&&(s&&r.push(s),o&&r.push(o)),r}function Pt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ot={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function Dt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot,t=arguments.length>1?arguments[1]:void 0;const{payload:n}=t;switch(t.type){case Be:case He:return{initialSourceClientOffset:n.sourceClientOffset,initialClientOffset:n.clientOffset,clientOffset:n.clientOffset};case Ge:return r=e.clientOffset,i=n.clientOffset,!r&&!i||r&&i&&r.x===i.x&&r.y===i.y?e:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Pt(e,t,n[t])})}return e}({},e,{clientOffset:n.clientOffset});case Qe:case Ke:return Ot;default:return e}var r,i}function At(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){At(e,t,n[t])})}return e}const Lt={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function Mt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lt,t=arguments.length>1?arguments[1]:void 0;const{payload:n}=t;switch(t.type){case He:return Rt({},e,{itemType:n.itemType,item:n.item,sourceId:n.sourceId,isSourcePublic:n.isSourcePublic,dropResult:null,didDrop:!1});case We:return Rt({},e,{isSourcePublic:!0});case Ge:return Rt({},e,{targetIds:n.targetIds});case wt:return-1===e.targetIds.indexOf(n.targetId)?e:Rt({},e,{targetIds:(r=e.targetIds,i=n.targetId,r.filter(e=>e!==i))});case Ke:return Rt({},e,{dropResult:n.dropResult,didDrop:!0,targetIds:[]});case Qe:return Rt({},e,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e}var r,i}function jt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch((arguments.length>1?arguments[1]:void 0).type){case yt:case vt:return e+1;case _t:case wt:return e-1;default:return e}}function Ft(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)+1}function Ut(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Ut(e,t,n[t])})}return e}function zt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return{dirtyHandlerIds:Nt(e.dirtyHandlerIds,{type:t.type,payload:Vt({},t.payload,{prevTargetIds:(n=e,r="dragOperation.targetIds",i=[],r.split(".").reduce((e,t)=>e&&e[t]?e[t]:i||null,n))})}),dragOffset:Dt(e.dragOffset,t),refCount:jt(e.refCount,t),dragOperation:Mt(e.dragOperation,t),stateId:Ft(e.stateId)};var n,r,i}function qt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=function(e){const t="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__;return Ve(zt,e&&t&&t({name:"dnd-core",instanceId:"dnd-core"}))}(arguments.length>3&&void 0!==arguments[3]&&arguments[3]),i=new ct(r,new kt(r)),s=new st(r,i),o=e(s,t,n);return s.receiveBackend(o),s}const Bt=(0,r.createContext)({dragDropManager:void 0});function Ht(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}let Wt=0;const Gt=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var Kt=(0,r.memo)(function(e){var{children:t}=e,n=Ht(e,["children"]);const[i,s]=function(e){if("manager"in e){return[{dragDropManager:e.manager},!1]}const t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qt(),n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;const i=t;i[Gt]||(i[Gt]={dragDropManager:qt(e,t,n,r)});return i[Gt]}(e.backend,e.context,e.options,e.debugMode),n=!e.context;return[t,n]}(n);return(0,r.useEffect)(()=>{if(s){const e=Qt();return++Wt,()=>{0===--Wt&&(e[Gt]=null)}}},[]),(0,Re.jsx)(Bt.Provider,{value:i,children:t})});function Qt(){return"undefined"!==typeof n.g?n.g:window}var Yt,$t=e=>{throw TypeError(e)},Xt=(e,t,n)=>t.has(e)||$t("Cannot "+n),Jt=(e,t,n)=>(Xt(e,t,"read from private field"),n?n.call(e):t.get(e)),Zt=(e,t,n)=>t.has(e)?$t("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),en=(e,t,n,r)=>(Xt(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),tn=class{constructor(){Zt(this,Yt),this.register=e=>{Jt(this,Yt).push(e)},this.unregister=e=>{for(;-1!==Jt(this,Yt).indexOf(e);)Jt(this,Yt).splice(Jt(this,Yt).indexOf(e),1)},this.backendChanged=e=>{for(let t of Jt(this,Yt))t.backendChanged(e)},en(this,Yt,[])}};Yt=new WeakMap;var nn,rn,sn,on,an,ln,cn,un,hn,dn,fn,pn=class e{constructor(t,n,r){if(Zt(this,nn),Zt(this,rn),Zt(this,sn),Zt(this,on),Zt(this,an),Zt(this,ln,(e,t,n)=>{var r,i;if(!n.backend)throw new Error("You must specify a 'backend' property in your Backend entry: ".concat(JSON.stringify(n)));let s=n.backend(e,t,n.options),o=n.id,a=!n.id&&s&&s.constructor;if(a&&(o=s.constructor.name),!o)throw new Error("You must specify an 'id' property in your Backend entry: ".concat(JSON.stringify(n),"\n        see this guide: https://github.com/louisbrunner/dnd-multi-backend/tree/master/packages/react-dnd-multi-backend#migrating-from-5xx"));if(a&&console.warn("Deprecation notice: You are using a pipeline which doesn't include backends' 'id'.\n        This might be unsupported in the future, please specify 'id' explicitely for every backend."),Jt(this,sn)[o])throw new Error("You must specify a unique 'id' property in your Backend entry:\n        ".concat(JSON.stringify(n)," (conflicts with: ").concat(JSON.stringify(Jt(this,sn)[o]),")"));return{id:o,instance:s,preview:null!==(r=n.preview)&&void 0!==r&&r,transition:n.transition,skipDispatchOnTransition:null!==(i=n.skipDispatchOnTransition)&&void 0!==i&&i}}),this.setup=()=>{if(!(typeof window>"u")){if(e.isSetUp)throw new Error("Cannot have two MultiBackends at the same time.");e.isSetUp=!0,Jt(this,cn).call(this,window),Jt(this,sn)[Jt(this,nn)].instance.setup()}},this.teardown=()=>{typeof window>"u"||(e.isSetUp=!1,Jt(this,un).call(this,window),Jt(this,sn)[Jt(this,nn)].instance.teardown())},this.connectDragSource=(e,t,n)=>Jt(this,fn).call(this,"connectDragSource",e,t,n),this.connectDragPreview=(e,t,n)=>Jt(this,fn).call(this,"connectDragPreview",e,t,n),this.connectDropTarget=(e,t,n)=>Jt(this,fn).call(this,"connectDropTarget",e,t,n),this.profile=()=>Jt(this,sn)[Jt(this,nn)].instance.profile(),this.previewEnabled=()=>Jt(this,sn)[Jt(this,nn)].preview,this.previewsList=()=>Jt(this,rn),this.backendsList=()=>Jt(this,on),Zt(this,cn,e=>{for(let t of Jt(this,on))t.transition&&e.addEventListener(t.transition.event,Jt(this,hn))}),Zt(this,un,e=>{for(let t of Jt(this,on))t.transition&&e.removeEventListener(t.transition.event,Jt(this,hn))}),Zt(this,hn,e=>{let t=Jt(this,nn);if(Jt(this,on).some(t=>!(t.id===Jt(this,nn)||!t.transition||!t.transition.check(e))&&(en(this,nn,t.id),!0)),Jt(this,nn)!==t){var n;Jt(this,sn)[t].instance.teardown();for(let[e,t]of Object.entries(Jt(this,an)))t.unsubscribe(),t.unsubscribe=Jt(this,dn).call(this,t.func,...t.args);Jt(this,rn).backendChanged(this);let r=Jt(this,sn)[Jt(this,nn)];if(r.instance.setup(),r.skipDispatchOnTransition)return;let i=new(0,e.constructor)(e.type,e);null===(n=e.target)||void 0===n||n.dispatchEvent(i)}}),Zt(this,dn,(e,t,n,r)=>Jt(this,sn)[Jt(this,nn)].instance[e](t,n,r)),Zt(this,fn,(e,t,n,r)=>{let i="".concat(e,"_").concat(t),s=Jt(this,dn).call(this,e,t,n,r);return Jt(this,an)[i]={func:e,args:[t,n,r],unsubscribe:s},()=>{Jt(this,an)[i].unsubscribe(),delete Jt(this,an)[i]}}),!r||!r.backends||r.backends.length<1)throw new Error("You must specify at least one Backend, if you are coming from 2.x.x (or don't understand this error)\n        see this guide: https://github.com/louisbrunner/dnd-multi-backend/tree/master/packages/react-dnd-multi-backend#migrating-from-2xx");en(this,rn,new tn),en(this,sn,{}),en(this,on,[]);for(let e of r.backends){let r=Jt(this,ln).call(this,t,n,e);Jt(this,sn)[r.id]=r,Jt(this,on).push(r)}en(this,nn,Jt(this,on)[0].id),en(this,an,{})}};nn=new WeakMap,rn=new WeakMap,sn=new WeakMap,on=new WeakMap,an=new WeakMap,ln=new WeakMap,cn=new WeakMap,un=new WeakMap,hn=new WeakMap,dn=new WeakMap,fn=new WeakMap,pn.isSetUp=!1;var gn=pn,mn=(e,t)=>({event:e,check:t}),yn=mn("touchstart",e=>{let t=e;return null!==t.touches&&void 0!==t.touches}),vn=(mn("dragstart",e=>-1!==e.type.indexOf("drag")||-1!==e.type.indexOf("drop")),mn("mousedown",e=>-1===e.type.indexOf("touch")&&-1!==e.type.indexOf("mouse")),mn("pointerdown",e=>"mouse"===e.pointerType));function _n(e){let t=null;return()=>(null==t&&(t=e()),t)}class wn{enter(e){const t=this.entered.length;return this.entered=function(e,t){const n=new Set,r=e=>n.add(e);e.forEach(r),t.forEach(r);const i=[];return n.forEach(e=>i.push(e)),i}(this.entered.filter(t=>this.isNodeInDocument(t)&&(!t.contains||t.contains(e))),[e]),0===t&&this.entered.length>0}leave(e){const t=this.entered.length;var n,r;return this.entered=(n=this.entered.filter(this.isNodeInDocument),r=e,n.filter(e=>e!==r)),t>0&&0===this.entered.length}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class bn{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get:()=>(console.warn("Browser doesn't allow reading \"".concat(e,'" until the drop event.')),null)})})}loadDataTransfer(e){if(e){const t={};Object.keys(this.config.exposeProperties).forEach(n=>{const r=this.config.exposeProperties[n];null!=r&&(t[n]={value:r(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,t)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,t){return t===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const En="__NATIVE_FILE__",Sn="__NATIVE_URL__",Cn="__NATIVE_TEXT__",Tn="__NATIVE_HTML__";function In(e,t,n){const r=t.reduce((t,n)=>t||e.getData(n),"");return null!=r?r:n}const kn={[En]:{exposeProperties:{files:e=>Array.prototype.slice.call(e.files),items:e=>e.items,dataTransfer:e=>e},matchesTypes:["Files"]},[Tn]:{exposeProperties:{html:(e,t)=>In(e,t,""),dataTransfer:e=>e},matchesTypes:["Html","text/html"]},[Sn]:{exposeProperties:{urls:(e,t)=>In(e,t,"").split("\n"),dataTransfer:e=>e},matchesTypes:["Url","text/uri-list"]},[Cn]:{exposeProperties:{text:(e,t)=>In(e,t,""),dataTransfer:e=>e},matchesTypes:["Text","text/plain"]}};function xn(e){if(!e)return null;const t=Array.prototype.slice.call(e.types||[]);return Object.keys(kn).filter(e=>{const n=kn[e];return!!(null===n||void 0===n?void 0:n.matchesTypes)&&n.matchesTypes.some(e=>t.indexOf(e)>-1)})[0]||null}const Nn=_n(()=>/firefox/i.test(navigator.userAgent)),Pn=_n(()=>Boolean(window.safari));class On{interpolate(e){const{xs:t,ys:n,c1s:r,c2s:i,c3s:s}=this;let o=t.length-1;if(e===t[o])return n[o];let a,l=0,c=s.length-1;for(;l<=c;){a=Math.floor(.5*(l+c));const r=t[a];if(r<e)l=a+1;else{if(!(r>e))return n[a];c=a-1}}o=Math.max(0,c);const u=e-t[o],h=u*u;return n[o]+r[o]*u+i[o]*h+s[o]*u*h}constructor(e,t){const{length:n}=e,r=[];for(let f=0;f<n;f++)r.push(f);r.sort((t,n)=>e[t]<e[n]?-1:1);const i=[],s=[],o=[];let a,l;for(let f=0;f<n-1;f++)a=e[f+1]-e[f],l=t[f+1]-t[f],s.push(a),i.push(l),o.push(l/a);const c=[o[0]];for(let f=0;f<s.length-1;f++){const e=o[f],t=o[f+1];if(e*t<=0)c.push(0);else{a=s[f];const n=s[f+1],r=a+n;c.push(3*r/((r+n)/e+(r+a)/t))}}c.push(o[o.length-1]);const u=[],h=[];let d;for(let f=0;f<c.length-1;f++){d=o[f];const e=c[f],t=1/s[f],n=e+c[f+1]-d-d;u.push((d-e-n)*t),h.push(n*t*t)}this.xs=e,this.ys=t,this.c1s=c,this.c2s=u,this.c3s=h}}function Dn(e){const t=1===e.nodeType?e:e.parentElement;if(!t)return null;const{top:n,left:r}=t.getBoundingClientRect();return{x:r,y:n}}function An(e){return{x:e.clientX,y:e.clientY}}function Rn(e,t,n,r,i){const s=function(e){var t;return"IMG"===e.nodeName&&(Nn()||!(null===(t=document.documentElement)||void 0===t?void 0:t.contains(e)))}(t),o=Dn(s?e:t),a={x:n.x-o.x,y:n.y-o.y},{offsetWidth:l,offsetHeight:c}=e,{anchorX:u,anchorY:h}=r,{dragPreviewWidth:d,dragPreviewHeight:f}=function(e,t,n,r){let i=e?t.width:n,s=e?t.height:r;return Pn()&&e&&(s/=window.devicePixelRatio,i/=window.devicePixelRatio),{dragPreviewWidth:i,dragPreviewHeight:s}}(s,t,l,c),{offsetX:p,offsetY:g}=i,m=0===g||g;return{x:0===p||p?p:new On([0,.5,1],[a.x,a.x/l*d,a.x+d-l]).interpolate(u),y:m?g:(()=>{let e=new On([0,.5,1],[a.y,a.y/c*f,a.y+f-c]).interpolate(h);return Pn()&&s&&(e+=(window.devicePixelRatio-1)*f),e})()}}class Ln{get window(){return this.globalContext?this.globalContext:"undefined"!==typeof window?window:void 0}get document(){var e;return(null===(e=this.globalContext)||void 0===e?void 0:e.document)?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return(null===(e=this.optionsArgs)||void 0===e?void 0:e.rootElement)||this.window}constructor(e,t){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=t}}function Mn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Mn(e,t,n[t])})}return e}class Fn{profile(){var e,t;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:(null===(e=this.dragStartSourceIds)||void 0===e?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:(null===(t=this.dragOverTargetIds)||void 0===t?void 0:t.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(void 0!==e){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;var t;void 0!==e&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId&&(null===(t=this.window)||void 0===t||t.cancelAnimationFrame(this.asyncEndDragFrameId)))}connectDragPreview(e,t,n){return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,t),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,t,n){this.sourceNodes.set(e,t),this.sourceNodeOptions.set(e,n);const r=t=>this.handleDragStart(t,e),i=e=>this.handleSelectStart(e);return t.setAttribute("draggable","true"),t.addEventListener("dragstart",r),t.addEventListener("selectstart",i),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),t.removeEventListener("dragstart",r),t.removeEventListener("selectstart",i),t.setAttribute("draggable","false")}}connectDropTarget(e,t){const n=t=>this.handleDragEnter(t,e),r=t=>this.handleDragOver(t,e),i=t=>this.handleDrop(t,e);return t.addEventListener("dragenter",n),t.addEventListener("dragover",r),t.addEventListener("drop",i),()=>{t.removeEventListener("dragenter",n),t.removeEventListener("dragover",r),t.removeEventListener("drop",i)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),t=this.sourceNodeOptions.get(e);return jn({dropEffect:this.altKeyPressed?"copy":"move"},t||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId();return jn({anchorX:.5,anchorY:.5,captureDraggingState:!1},this.sourcePreviewNodeOptions.get(e)||{})}isDraggingNativeItem(){const t=this.monitor.getItemType();return Object.keys(e).some(n=>e[n]===t)}beginDragNativeItem(e,t){this.clearCurrentDragSourceNode(),this.currentNativeSource=function(e,t){const n=kn[e];if(!n)throw new Error("native type ".concat(e," has no configuration"));const r=new bn(n);return r.loadDataTransfer(t),r}(e,t),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;this.mouseMoveTimeoutTimer=setTimeout(()=>{var e;return null===(e=this.rootElement)||void 0===e?void 0:e.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},1e3)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){var e;if(this.currentDragSourceNode=null,this.rootElement)null===(e=this.window)||void 0===e||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0);return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,t){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(t))}handleDragEnter(e,t){this.dragEnterTargetIds.unshift(t)}handleDragOver(e,t){null===this.dragOverTargetIds&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(t)}handleDrop(e,t){this.dropTargetIds.unshift(t)}constructor(e,t,n){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=e=>{const t=this.sourceNodes.get(e);return t&&Dn(t)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=e=>Boolean(e&&this.document&&this.document.body&&this.document.body.contains(e)),this.endDragIfSourceWasRemovedFromDOM=()=>{const e=this.currentDragSourceNode;null==e||this.isNodeInDocument(e)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=e=>{null===this.hoverRafId&&"undefined"!==typeof requestAnimationFrame&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(e||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{null!==this.hoverRafId&&"undefined"!==typeof cancelAnimationFrame&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=e=>{if(e.defaultPrevented)return;const{dragStartSourceIds:t}=this;this.dragStartSourceIds=null;const n=An(e);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(t||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:n});const{dataTransfer:r}=e,i=xn(r);if(this.monitor.isDragging()){if(r&&"function"===typeof r.setDragImage){const e=this.monitor.getSourceId(),t=this.sourceNodes.get(e),i=this.sourcePreviewNodes.get(e)||t;if(i){const{anchorX:e,anchorY:s,offsetX:o,offsetY:a}=this.getCurrentSourcePreviewNodeOptions(),l=Rn(t,i,n,{anchorX:e,anchorY:s},{offsetX:o,offsetY:a});r.setDragImage(i,l.x,l.y)}}try{null===r||void 0===r||r.setData("application/json",{})}catch(s){}this.setCurrentDragSourceNode(e.target);const{captureDraggingState:t}=this.getCurrentSourcePreviewNodeOptions();t?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(i)this.beginDragNativeItem(i);else{if(r&&!r.types&&(e.target&&!e.target.hasAttribute||!e.target.hasAttribute("draggable")))return;e.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=e=>{var t;(this.dragEnterTargetIds=[],this.isDraggingNativeItem())&&(null===(t=this.currentNativeSource)||void 0===t||t.loadDataTransfer(e.dataTransfer));if(!this.enterLeaveCounter.enter(e.target)||this.monitor.isDragging())return;const{dataTransfer:n}=e,r=xn(n);r&&this.beginDragNativeItem(r,n)},this.handleTopDragEnter=e=>{const{dragEnterTargetIds:t}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=e.altKey,t.length>0&&this.actions.hover(t,{clientOffset:An(e)});t.some(e=>this.monitor.canDropOnTarget(e))&&(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=e=>{var t;(this.dragOverTargetIds=[],this.isDraggingNativeItem())&&(null===(t=this.currentNativeSource)||void 0===t||t.loadDataTransfer(e.dataTransfer))},this.handleTopDragOver=e=>{const{dragOverTargetIds:t}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging())return e.preventDefault(),void(e.dataTransfer&&(e.dataTransfer.dropEffect="none"));this.altKeyPressed=e.altKey,this.lastClientOffset=An(e),this.scheduleHover(t);(t||[]).some(e=>this.monitor.canDropOnTarget(e))?(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?e.preventDefault():(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=e=>{this.isDraggingNativeItem()&&e.preventDefault();this.enterLeaveCounter.leave(e.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=e=>{var t;(this.dropTargetIds=[],this.isDraggingNativeItem())?(e.preventDefault(),null===(t=this.currentNativeSource)||void 0===t||t.loadDataTransfer(e.dataTransfer)):xn(e.dataTransfer)&&e.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=e=>{const{dropTargetIds:t}=this;this.dropTargetIds=[],this.actions.hover(t,{clientOffset:An(e)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=e=>{const t=e.target;"function"===typeof t.dragDrop&&("INPUT"===t.tagName||"SELECT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable||(e.preventDefault(),t.dragDrop()))},this.options=new Ln(t,n),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new wn(this.isNodeInDocument)}}var Un;!function(e){e.mouse="mouse",e.touch="touch",e.keyboard="keyboard"}(Un||(Un={}));class Vn{get delay(){var e;return null!==(e=this.args.delay)&&void 0!==e?e:0}get scrollAngleRanges(){return this.args.scrollAngleRanges}get getDropTargetElementsAtPoint(){return this.args.getDropTargetElementsAtPoint}get ignoreContextMenu(){var e;return null!==(e=this.args.ignoreContextMenu)&&void 0!==e&&e}get enableHoverOutsideTarget(){var e;return null!==(e=this.args.enableHoverOutsideTarget)&&void 0!==e&&e}get enableKeyboardEvents(){var e;return null!==(e=this.args.enableKeyboardEvents)&&void 0!==e&&e}get enableMouseEvents(){var e;return null!==(e=this.args.enableMouseEvents)&&void 0!==e&&e}get enableTouchEvents(){var e;return null===(e=this.args.enableTouchEvents)||void 0===e||e}get touchSlop(){return this.args.touchSlop||0}get delayTouchStart(){var e,t,n,r;return null!==(r=null!==(n=null===(e=this.args)||void 0===e?void 0:e.delayTouchStart)&&void 0!==n?n:null===(t=this.args)||void 0===t?void 0:t.delay)&&void 0!==r?r:0}get delayMouseStart(){var e,t,n,r;return null!==(r=null!==(n=null===(e=this.args)||void 0===e?void 0:e.delayMouseStart)&&void 0!==n?n:null===(t=this.args)||void 0===t?void 0:t.delay)&&void 0!==r?r:0}get window(){return this.context&&this.context.window?this.context.window:"undefined"!==typeof window?window:void 0}get document(){var e;return(null===(e=this.context)||void 0===e?void 0:e.document)?this.context.document:this.window?this.window.document:void 0}get rootElement(){var e;return(null===(e=this.args)||void 0===e?void 0:e.rootElement)||this.document}constructor(e,t){this.args=e,this.context=t}}const zn=1,qn=0;function Bn(e){return void 0===e.button||e.button===qn}function Hn(e){return!!e.targetTouches}function Wn(e,t){return Hn(e)?function(e,t){return 1===e.targetTouches.length?Wn(e.targetTouches[0]):t&&1===e.touches.length&&e.touches[0].target===t.target?Wn(e.touches[0]):void 0}(e,t):{x:e.clientX,y:e.clientY}}const Gn=(()=>{let e=!1;try{addEventListener("test",()=>{},Object.defineProperty({},"passive",{get:()=>(e=!0,!0)}))}catch(sk){}return e})(),Kn={[Un.mouse]:{start:"mousedown",move:"mousemove",end:"mouseup",contextmenu:"contextmenu"},[Un.touch]:{start:"touchstart",move:"touchmove",end:"touchend"},[Un.keyboard]:{keydown:"keydown"}};class Qn{profile(){var e;return{sourceNodes:this.sourceNodes.size,sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,targetNodes:this.targetNodes.size,dragOverTargetIds:(null===(e=this.dragOverTargetIds)||void 0===e?void 0:e.length)||0}}get document(){return this.options.document}setup(){const e=this.options.rootElement;e&&(ze(!Qn.isSetUp,"Cannot have two Touch backends at the same time."),Qn.isSetUp=!0,this.addEventListener(e,"start",this.getTopMoveStartHandler()),this.addEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.addEventListener(e,"move",this.handleTopMove),this.addEventListener(e,"move",this.handleTopMoveCapture,!0),this.addEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.addEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.addEventListener(e,"keydown",this.handleCancelOnEscape,!0))}teardown(){const e=this.options.rootElement;e&&(Qn.isSetUp=!1,this._mouseClientOffset={},this.removeEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.removeEventListener(e,"start",this.handleTopMoveStart),this.removeEventListener(e,"move",this.handleTopMoveCapture,!0),this.removeEventListener(e,"move",this.handleTopMove),this.removeEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.removeEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.removeEventListener(e,"keydown",this.handleCancelOnEscape,!0),this.uninstallSourceNodeRemovalObserver())}addEventListener(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=Gn?{capture:r,passive:!1}:r;this.listenerTypes.forEach(function(r){const s=Kn[r][t];s&&e.addEventListener(s,n,i)})}removeEventListener(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=Gn?{capture:r,passive:!1}:r;this.listenerTypes.forEach(function(r){const s=Kn[r][t];s&&e.removeEventListener(s,n,i)})}connectDragSource(e,t){const n=this.handleMoveStart.bind(this,e);return this.sourceNodes.set(e,t),this.addEventListener(t,"start",n),()=>{this.sourceNodes.delete(e),this.removeEventListener(t,"start",n)}}connectDragPreview(e,t,n){return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,t),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDropTarget(e,t){const n=this.options.rootElement;if(!this.document||!n)return()=>{};const r=r=>{if(!this.document||!n||!this.monitor.isDragging())return;let i;switch(r.type){case Kn.mouse.move:i={x:r.clientX,y:r.clientY};break;case Kn.touch.move:var s,o;i={x:(null===(s=r.touches[0])||void 0===s?void 0:s.clientX)||0,y:(null===(o=r.touches[0])||void 0===o?void 0:o.clientY)||0}}const a=null!=i?this.document.elementFromPoint(i.x,i.y):void 0,l=a&&t.contains(a);return a===t||l?this.handleMove(r,e):void 0};return this.addEventListener(this.document.body,"move",r),this.targetNodes.set(e,t),()=>{this.document&&(this.targetNodes.delete(e),this.removeEventListener(this.document.body,"move",r))}}getTopMoveStartHandler(){return this.options.delayTouchStart||this.options.delayMouseStart?this.handleTopMoveStartDelay:this.handleTopMoveStart}installSourceNodeRemovalObserver(e){this.uninstallSourceNodeRemovalObserver(),this.draggedSourceNode=e,this.draggedSourceNodeRemovalObserver=new MutationObserver(()=>{e&&!e.parentElement&&(this.resurrectSourceNode(),this.uninstallSourceNodeRemovalObserver())}),e&&e.parentElement&&this.draggedSourceNodeRemovalObserver.observe(e.parentElement,{childList:!0})}resurrectSourceNode(){this.document&&this.draggedSourceNode&&(this.draggedSourceNode.style.display="none",this.draggedSourceNode.removeAttribute("data-reactid"),this.document.body.appendChild(this.draggedSourceNode))}uninstallSourceNodeRemovalObserver(){this.draggedSourceNodeRemovalObserver&&this.draggedSourceNodeRemovalObserver.disconnect(),this.draggedSourceNodeRemovalObserver=void 0,this.draggedSourceNode=void 0}constructor(e,t,n){this.getSourceClientOffset=e=>{const t=this.sourceNodes.get(e);return t&&function(e){const t=1===e.nodeType?e:e.parentElement;if(!t)return;const{top:n,left:r}=t.getBoundingClientRect();return{x:r,y:n}}(t)},this.handleTopMoveStartCapture=e=>{Bn(e)&&(this.moveStartSourceIds=[])},this.handleMoveStart=e=>{Array.isArray(this.moveStartSourceIds)&&this.moveStartSourceIds.unshift(e)},this.handleTopMoveStart=e=>{if(!Bn(e))return;const t=Wn(e);t&&(Hn(e)&&(this.lastTargetTouchFallback=e.targetTouches[0]),this._mouseClientOffset=t),this.waitingForDelay=!1},this.handleTopMoveStartDelay=e=>{if(!Bn(e))return;const t=e.type===Kn.touch.start?this.options.delayTouchStart:this.options.delayMouseStart;this.timeout=setTimeout(this.handleTopMoveStart.bind(this,e),t),this.waitingForDelay=!0},this.handleTopMoveCapture=()=>{this.dragOverTargetIds=[]},this.handleMove=(e,t)=>{this.dragOverTargetIds&&this.dragOverTargetIds.unshift(t)},this.handleTopMove=e=>{if(this.timeout&&clearTimeout(this.timeout),!this.document||this.waitingForDelay)return;const{moveStartSourceIds:t,dragOverTargetIds:n}=this,r=this.options.enableHoverOutsideTarget,i=Wn(e,this.lastTargetTouchFallback);if(!i)return;if(this._isScrolling||!this.monitor.isDragging()&&function(e,t,n,r,i){if(!i)return!1;const s=180*Math.atan2(r-t,n-e)/Math.PI+180;for(let o=0;o<i.length;++o){const e=i[o];if(e&&(null==e.start||s>=e.start)&&(null==e.end||s<=e.end))return!0}return!1}(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,i.x,i.y,this.options.scrollAngleRanges))return void(this._isScrolling=!0);var s,o,a,l;if(!this.monitor.isDragging()&&this._mouseClientOffset.hasOwnProperty("x")&&t&&(s=this._mouseClientOffset.x||0,o=this._mouseClientOffset.y||0,a=i.x,l=i.y,Math.sqrt(Math.pow(Math.abs(a-s),2)+Math.pow(Math.abs(l-o),2))>(this.options.touchSlop?this.options.touchSlop:0))&&(this.moveStartSourceIds=void 0,this.actions.beginDrag(t,{clientOffset:this._mouseClientOffset,getSourceClientOffset:this.getSourceClientOffset,publishSource:!1})),!this.monitor.isDragging())return;const c=this.sourceNodes.get(this.monitor.getSourceId());this.installSourceNodeRemovalObserver(c),this.actions.publishDragSource(),e.cancelable&&e.preventDefault();const u=(n||[]).map(e=>this.targetNodes.get(e)).filter(e=>!!e),h=this.options.getDropTargetElementsAtPoint?this.options.getDropTargetElementsAtPoint(i.x,i.y,u):this.document.elementsFromPoint(i.x,i.y),d=[];for(const p in h){if(!h.hasOwnProperty(p))continue;let e=h[p];for(null!=e&&d.push(e);e;)e=e.parentElement,e&&-1===d.indexOf(e)&&d.push(e)}const f=d.filter(e=>u.indexOf(e)>-1).map(e=>this._getDropTargetId(e)).filter(e=>!!e).filter((e,t,n)=>n.indexOf(e)===t);if(r)for(const p in this.targetNodes){const e=this.targetNodes.get(p);if(c&&e&&e.contains(c)&&-1===f.indexOf(p)){f.unshift(p);break}}f.reverse(),this.actions.hover(f,{clientOffset:i})},this._getDropTargetId=e=>{const t=this.targetNodes.keys();let n=t.next();for(;!1===n.done;){const r=n.value;if(e===this.targetNodes.get(r))return r;n=t.next()}},this.handleTopMoveEndCapture=e=>{this._isScrolling=!1,this.lastTargetTouchFallback=void 0,function(e){return void 0===e.buttons||0===(e.buttons&zn)}(e)&&(this.monitor.isDragging()&&!this.monitor.didDrop()?(e.cancelable&&e.preventDefault(),this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.drop(),this.actions.endDrag()):this.moveStartSourceIds=void 0)},this.handleCancelOnEscape=e=>{"Escape"===e.key&&this.monitor.isDragging()&&(this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.endDrag())},this.options=new Vn(n,t),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.sourceNodes=new Map,this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.targetNodes=new Map,this.listenerTypes=[],this._mouseClientOffset={},this._isScrolling=!1,this.options.enableMouseEvents&&this.listenerTypes.push(Un.mouse),this.options.enableTouchEvents&&this.listenerTypes.push(Un.touch),this.options.enableKeyboardEvents&&this.listenerTypes.push(Un.keyboard)}}var Yn={backends:[{id:"html5",backend:function(e,t,n){return new Fn(e,t,n)},transition:vn},{id:"touch",backend:function(e){return new Qn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})},options:{enableMouseEvents:!0},preview:!0,transition:yn}]},$n=n(173),Xn=n.n($n),Jn=n(366),Zn=n.n(Jn),er=n(740),tr=n.n(er),nr=n(324),rr=n.n(nr);function ir(){return ir=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ir.apply(this,arguments)}function sr(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,or(e,t)}function or(e,t){return or=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},or(e,t)}function ar(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)t.indexOf(n=s[r])>=0||(i[n]=e[n]);return i}var lr={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title",FRAGMENT:"Symbol(react.fragment)"},cr={rel:["amphtml","canonical","alternate"]},ur={type:["application/ld+json"]},hr={charset:"",name:["robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]},dr=Object.keys(lr).map(function(e){return lr[e]}),fr={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},pr=Object.keys(fr).reduce(function(e,t){return e[fr[t]]=t,e},{}),gr=function(e,t){for(var n=e.length-1;n>=0;n-=1){var r=e[n];if(Object.prototype.hasOwnProperty.call(r,t))return r[t]}return null},mr=function(e){var t=gr(e,lr.TITLE),n=gr(e,"titleTemplate");if(Array.isArray(t)&&(t=t.join("")),n&&t)return n.replace(/%s/g,function(){return t});var r=gr(e,"defaultTitle");return t||r||void 0},yr=function(e){return gr(e,"onChangeClientState")||function(){}},vr=function(e,t){return t.filter(function(t){return void 0!==t[e]}).map(function(t){return t[e]}).reduce(function(e,t){return ir({},e,t)},{})},_r=function(e,t){return t.filter(function(e){return void 0!==e[lr.BASE]}).map(function(e){return e[lr.BASE]}).reverse().reduce(function(t,n){if(!t.length)for(var r=Object.keys(n),i=0;i<r.length;i+=1){var s=r[i].toLowerCase();if(-1!==e.indexOf(s)&&n[s])return t.concat(n)}return t},[])},wr=function(e,t,n){var r={};return n.filter(function(t){return!!Array.isArray(t[e])||(void 0!==t[e]&&console&&"function"==typeof console.warn&&console.warn("Helmet: "+e+' should be of type "Array". Instead found type "'+typeof t[e]+'"'),!1)}).map(function(t){return t[e]}).reverse().reduce(function(e,n){var i={};n.filter(function(e){for(var n,s=Object.keys(e),o=0;o<s.length;o+=1){var a=s[o],l=a.toLowerCase();-1===t.indexOf(l)||"rel"===n&&"canonical"===e[n].toLowerCase()||"rel"===l&&"stylesheet"===e[l].toLowerCase()||(n=l),-1===t.indexOf(a)||"innerHTML"!==a&&"cssText"!==a&&"itemprop"!==a||(n=a)}if(!n||!e[n])return!1;var c=e[n].toLowerCase();return r[n]||(r[n]={}),i[n]||(i[n]={}),!r[n][c]&&(i[n][c]=!0,!0)}).reverse().forEach(function(t){return e.push(t)});for(var s=Object.keys(i),o=0;o<s.length;o+=1){var a=s[o],l=ir({},r[a],i[a]);r[a]=l}return e},[]).reverse()},br=function(e,t){if(Array.isArray(e)&&e.length)for(var n=0;n<e.length;n+=1)if(e[n][t])return!0;return!1},Er=function(e){return Array.isArray(e)?e.join(""):e},Sr=function(e,t){return Array.isArray(e)?e.reduce(function(e,n){return function(e,t){for(var n=Object.keys(e),r=0;r<n.length;r+=1)if(t[n[r]]&&t[n[r]].includes(e[n[r]]))return!0;return!1}(n,t)?e.priority.push(n):e.default.push(n),e},{priority:[],default:[]}):{default:e}},Cr=function(e,t){var n;return ir({},e,((n={})[t]=void 0,n))},Tr=[lr.NOSCRIPT,lr.SCRIPT,lr.STYLE],Ir=function(e,t){return void 0===t&&(t=!0),!1===t?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},kr=function(e){return Object.keys(e).reduce(function(t,n){var r=void 0!==e[n]?n+'="'+e[n]+'"':""+n;return t?t+" "+r:r},"")},xr=function(e,t){return void 0===t&&(t={}),Object.keys(e).reduce(function(t,n){return t[fr[n]||n]=e[n],t},t)},Nr=function(e,t){return t.map(function(t,n){var i,s=((i={key:n})["data-rh"]=!0,i);return Object.keys(t).forEach(function(e){var n=fr[e]||e;"innerHTML"===n||"cssText"===n?s.dangerouslySetInnerHTML={__html:t.innerHTML||t.cssText}:s[n]=t[e]}),r.createElement(e,s)})},Pr=function(e,t,n){switch(e){case lr.TITLE:return{toComponent:function(){return n=t.titleAttributes,(i={key:e=t.title})["data-rh"]=!0,s=xr(n,i),[r.createElement(lr.TITLE,s,e)];var e,n,i,s},toString:function(){return function(e,t,n,r){var i=kr(n),s=Er(t);return i?"<"+e+' data-rh="true" '+i+">"+Ir(s,r)+"</"+e+">":"<"+e+' data-rh="true">'+Ir(s,r)+"</"+e+">"}(e,t.title,t.titleAttributes,n)}};case"bodyAttributes":case"htmlAttributes":return{toComponent:function(){return xr(t)},toString:function(){return kr(t)}};default:return{toComponent:function(){return Nr(e,t)},toString:function(){return function(e,t,n){return t.reduce(function(t,r){var i=Object.keys(r).filter(function(e){return!("innerHTML"===e||"cssText"===e)}).reduce(function(e,t){var i=void 0===r[t]?t:t+'="'+Ir(r[t],n)+'"';return e?e+" "+i:i},""),s=r.innerHTML||r.cssText||"",o=-1===Tr.indexOf(e);return t+"<"+e+' data-rh="true" '+i+(o?"/>":">"+s+"</"+e+">")},"")}(e,t,n)}}}},Or=function(e){var t=e.baseTag,n=e.bodyAttributes,r=e.encode,i=e.htmlAttributes,s=e.noscriptTags,o=e.styleTags,a=e.title,l=void 0===a?"":a,c=e.titleAttributes,u=e.linkTags,h=e.metaTags,d=e.scriptTags,f={toComponent:function(){},toString:function(){return""}};if(e.prioritizeSeoTags){var p=function(e){var t=e.linkTags,n=e.scriptTags,r=e.encode,i=Sr(e.metaTags,hr),s=Sr(t,cr),o=Sr(n,ur);return{priorityMethods:{toComponent:function(){return[].concat(Nr(lr.META,i.priority),Nr(lr.LINK,s.priority),Nr(lr.SCRIPT,o.priority))},toString:function(){return Pr(lr.META,i.priority,r)+" "+Pr(lr.LINK,s.priority,r)+" "+Pr(lr.SCRIPT,o.priority,r)}},metaTags:i.default,linkTags:s.default,scriptTags:o.default}}(e);f=p.priorityMethods,u=p.linkTags,h=p.metaTags,d=p.scriptTags}return{priority:f,base:Pr(lr.BASE,t,r),bodyAttributes:Pr("bodyAttributes",n,r),htmlAttributes:Pr("htmlAttributes",i,r),link:Pr(lr.LINK,u,r),meta:Pr(lr.META,h,r),noscript:Pr(lr.NOSCRIPT,s,r),script:Pr(lr.SCRIPT,d,r),style:Pr(lr.STYLE,o,r),title:Pr(lr.TITLE,{title:l,titleAttributes:c},r)}},Dr=[],Ar=function(e,t){var n=this;void 0===t&&(t="undefined"!=typeof document),this.instances=[],this.value={setHelmet:function(e){n.context.helmet=e},helmetInstances:{get:function(){return n.canUseDOM?Dr:n.instances},add:function(e){(n.canUseDOM?Dr:n.instances).push(e)},remove:function(e){var t=(n.canUseDOM?Dr:n.instances).indexOf(e);(n.canUseDOM?Dr:n.instances).splice(t,1)}}},this.context=e,this.canUseDOM=t,t||(e.helmet=Or({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))},Rr=r.createContext({}),Lr=Xn().shape({setHelmet:Xn().func,helmetInstances:Xn().shape({get:Xn().func,add:Xn().func,remove:Xn().func})}),Mr="undefined"!=typeof document,jr=function(e){function t(n){var r;return(r=e.call(this,n)||this).helmetData=new Ar(r.props.context,t.canUseDOM),r}return sr(t,e),t.prototype.render=function(){return r.createElement(Rr.Provider,{value:this.helmetData.value},this.props.children)},t}(r.Component);jr.canUseDOM=Mr,jr.propTypes={context:Xn().shape({helmet:Xn().shape()}),children:Xn().node.isRequired},jr.defaultProps={context:{}},jr.displayName="HelmetProvider";var Fr=function(e,t){var n,r=document.head||document.querySelector(lr.HEAD),i=r.querySelectorAll(e+"[data-rh]"),s=[].slice.call(i),o=[];return t&&t.length&&t.forEach(function(t){var r=document.createElement(e);for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&("innerHTML"===i?r.innerHTML=t.innerHTML:"cssText"===i?r.styleSheet?r.styleSheet.cssText=t.cssText:r.appendChild(document.createTextNode(t.cssText)):r.setAttribute(i,void 0===t[i]?"":t[i]));r.setAttribute("data-rh","true"),s.some(function(e,t){return n=t,r.isEqualNode(e)})?s.splice(n,1):o.push(r)}),s.forEach(function(e){return e.parentNode.removeChild(e)}),o.forEach(function(e){return r.appendChild(e)}),{oldTags:s,newTags:o}},Ur=function(e,t){var n=document.getElementsByTagName(e)[0];if(n){for(var r=n.getAttribute("data-rh"),i=r?r.split(","):[],s=[].concat(i),o=Object.keys(t),a=0;a<o.length;a+=1){var l=o[a],c=t[l]||"";n.getAttribute(l)!==c&&n.setAttribute(l,c),-1===i.indexOf(l)&&i.push(l);var u=s.indexOf(l);-1!==u&&s.splice(u,1)}for(var h=s.length-1;h>=0;h-=1)n.removeAttribute(s[h]);i.length===s.length?n.removeAttribute("data-rh"):n.getAttribute("data-rh")!==o.join(",")&&n.setAttribute("data-rh",o.join(","))}},Vr=function(e,t){var n=e.baseTag,r=e.htmlAttributes,i=e.linkTags,s=e.metaTags,o=e.noscriptTags,a=e.onChangeClientState,l=e.scriptTags,c=e.styleTags,u=e.title,h=e.titleAttributes;Ur(lr.BODY,e.bodyAttributes),Ur(lr.HTML,r),function(e,t){void 0!==e&&document.title!==e&&(document.title=Er(e)),Ur(lr.TITLE,t)}(u,h);var d={baseTag:Fr(lr.BASE,n),linkTags:Fr(lr.LINK,i),metaTags:Fr(lr.META,s),noscriptTags:Fr(lr.NOSCRIPT,o),scriptTags:Fr(lr.SCRIPT,l),styleTags:Fr(lr.STYLE,c)},f={},p={};Object.keys(d).forEach(function(e){var t=d[e],n=t.newTags,r=t.oldTags;n.length&&(f[e]=n),r.length&&(p[e]=d[e].oldTags)}),t&&t(),a(e,f,p)},zr=null,qr=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).rendered=!1,t}sr(t,e);var n=t.prototype;return n.shouldComponentUpdate=function(e){return!rr()(e,this.props)},n.componentDidUpdate=function(){this.emitChange()},n.componentWillUnmount=function(){this.props.context.helmetInstances.remove(this),this.emitChange()},n.emitChange=function(){var e,t,n=this.props.context,r=n.setHelmet,i=null,s=(e=n.helmetInstances.get().map(function(e){var t=ir({},e.props);return delete t.context,t}),{baseTag:_r(["href"],e),bodyAttributes:vr("bodyAttributes",e),defer:gr(e,"defer"),encode:gr(e,"encodeSpecialCharacters"),htmlAttributes:vr("htmlAttributes",e),linkTags:wr(lr.LINK,["rel","href"],e),metaTags:wr(lr.META,["name","charset","http-equiv","property","itemprop"],e),noscriptTags:wr(lr.NOSCRIPT,["innerHTML"],e),onChangeClientState:yr(e),scriptTags:wr(lr.SCRIPT,["src","innerHTML"],e),styleTags:wr(lr.STYLE,["cssText"],e),title:mr(e),titleAttributes:vr("titleAttributes",e),prioritizeSeoTags:br(e,"prioritizeSeoTags")});jr.canUseDOM?(t=s,zr&&cancelAnimationFrame(zr),t.defer?zr=requestAnimationFrame(function(){Vr(t,function(){zr=null})}):(Vr(t),zr=null)):Or&&(i=Or(s)),r(i)},n.init=function(){this.rendered||(this.rendered=!0,this.props.context.helmetInstances.add(this),this.emitChange())},n.render=function(){return this.init(),null},t}(r.Component);qr.propTypes={context:Lr.isRequired},qr.displayName="HelmetDispatcher";var Br=["children"],Hr=["children"],Wr=function(e){function t(){return e.apply(this,arguments)||this}sr(t,e);var n=t.prototype;return n.shouldComponentUpdate=function(e){return!Zn()(Cr(this.props,"helmetData"),Cr(e,"helmetData"))},n.mapNestedChildrenToProps=function(e,t){if(!t)return null;switch(e.type){case lr.SCRIPT:case lr.NOSCRIPT:return{innerHTML:t};case lr.STYLE:return{cssText:t};default:throw new Error("<"+e.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")}},n.flattenArrayTypeChildren=function(e){var t,n=e.child,r=e.arrayTypeChildren;return ir({},r,((t={})[n.type]=[].concat(r[n.type]||[],[ir({},e.newChildProps,this.mapNestedChildrenToProps(n,e.nestedChildren))]),t))},n.mapObjectTypeChildren=function(e){var t,n,r=e.child,i=e.newProps,s=e.newChildProps,o=e.nestedChildren;switch(r.type){case lr.TITLE:return ir({},i,((t={})[r.type]=o,t.titleAttributes=ir({},s),t));case lr.BODY:return ir({},i,{bodyAttributes:ir({},s)});case lr.HTML:return ir({},i,{htmlAttributes:ir({},s)});default:return ir({},i,((n={})[r.type]=ir({},s),n))}},n.mapArrayTypeChildrenToProps=function(e,t){var n=ir({},t);return Object.keys(e).forEach(function(t){var r;n=ir({},n,((r={})[t]=e[t],r))}),n},n.warnOnInvalidChildren=function(e,t){return tr()(dr.some(function(t){return e.type===t}),"function"==typeof e.type?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":"Only elements types "+dr.join(", ")+" are allowed. Helmet does not support rendering <"+e.type+"> elements. Refer to our API for more information."),tr()(!t||"string"==typeof t||Array.isArray(t)&&!t.some(function(e){return"string"!=typeof e}),"Helmet expects a string as a child of <"+e.type+">. Did you forget to wrap your children in braces? ( <"+e.type+">{``}</"+e.type+"> ) Refer to our API for more information."),!0},n.mapChildrenToProps=function(e,t){var n=this,i={};return r.Children.forEach(e,function(e){if(e&&e.props){var r=e.props,s=r.children,o=ar(r,Br),a=Object.keys(o).reduce(function(e,t){return e[pr[t]||t]=o[t],e},{}),l=e.type;switch("symbol"==typeof l?l=l.toString():n.warnOnInvalidChildren(e,s),l){case lr.FRAGMENT:t=n.mapChildrenToProps(s,t);break;case lr.LINK:case lr.META:case lr.NOSCRIPT:case lr.SCRIPT:case lr.STYLE:i=n.flattenArrayTypeChildren({child:e,arrayTypeChildren:i,newChildProps:a,nestedChildren:s});break;default:t=n.mapObjectTypeChildren({child:e,newProps:t,newChildProps:a,nestedChildren:s})}}}),this.mapArrayTypeChildrenToProps(i,t)},n.render=function(){var e=this.props,t=e.children,n=ar(e,Hr),i=ir({},n),s=n.helmetData;return t&&(i=this.mapChildrenToProps(t,i)),!s||s instanceof Ar||(s=new Ar(s.context,s.instances)),s?r.createElement(qr,ir({},i,{context:s.value,helmetData:void 0})):r.createElement(Rr.Consumer,null,function(e){return r.createElement(qr,ir({},i,{context:e}))})},t}(r.Component);Wr.propTypes={base:Xn().object,bodyAttributes:Xn().object,children:Xn().oneOfType([Xn().arrayOf(Xn().node),Xn().node]),defaultTitle:Xn().string,defer:Xn().bool,encodeSpecialCharacters:Xn().bool,htmlAttributes:Xn().object,link:Xn().arrayOf(Xn().object),meta:Xn().arrayOf(Xn().object),noscript:Xn().arrayOf(Xn().object),onChangeClientState:Xn().func,script:Xn().arrayOf(Xn().object),style:Xn().arrayOf(Xn().object),title:Xn().string,titleAttributes:Xn().object,titleTemplate:Xn().string,prioritizeSeoTags:Xn().bool,helmetData:Xn().object},Wr.defaultProps={defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1},Wr.displayName="Helmet";var Gr=n(279);const Kr=n.p+"static/media/logo.4366472fe57cce768580.png",Qr=!1,Yr=!1,$r="${JSCORE_VERSION}",Xr=function(e,t){if(!e)throw Jr(t)},Jr=function(e){return new Error("Firebase Database ("+$r+") INTERNAL ASSERT FAILED: "+e)},Zr=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},ei={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Zr(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new ti;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class ti extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ni=function(e){const t=Zr(e);return ei.encodeByteArray(t,!0)},ri=function(e){return ni(e).replace(/\./g,"")},ii=function(e){try{return ei.decodeString(e,!0)}catch(sk){console.error("base64Decode failed: ",sk)}return null};function si(e){return oi(void 0,e)}function oi(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&ai(n)&&(e[n]=oi(e[n],t[n]));return e}function ai(e){return"__proto__"!==e}const li=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,ci=()=>{try{return li()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyAOZkZ8FGkHv6J4xD-yckuKOasuO4zEF2c",REACT_APP_FIREBASE_APP_ID:"1:37869262835:web:9d463c1b217727d88e6486",REACT_APP_FIREBASE_AUTH_DOMAIN:"sortly-1b701.firebaseapp.com",REACT_APP_FIREBASE_DATABASE_URL:"https://sortly-1b701-default-rtdb.europe-west1.firebasedatabase.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"37869262835",REACT_APP_FIREBASE_PROJECT_ID:"sortly-1b701",REACT_APP_FIREBASE_STORAGE_BUCKET:"sortly-1b701.firebasestorage.app"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(sk){return}const t=e&&ii(e[1]);return t&&JSON.parse(t)})()}catch(sk){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(sk))}},ui=e=>{var t,n;return null===(n=null===(t=ci())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},hi=e=>{const t=ui(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},di=()=>{var e;return null===(e=ci())||void 0===e?void 0:e.config},fi=e=>{var t;return null===(t=ci())||void 0===t?void 0:t["_".concat(e)]};class pi{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function gi(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ri(JSON.stringify({alg:"none",type:"JWT"})),ri(JSON.stringify(s)),""].join(".")}function mi(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function yi(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mi())}function vi(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function _i(){return!0===Qr||!0===Yr}function wi(){return!function(){var e;const t=null===(e=ci())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(sk){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function bi(){try{return"object"===typeof indexedDB}catch(sk){return!1}}class Ei extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Ei.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Si.prototype.create)}}class Si{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Ci,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Ei(n,s,t)}}const Ci=/\{\$([^}]+)}/g;function Ti(e){return JSON.parse(e)}function Ii(e){return JSON.stringify(e)}const ki=function(e){let t={},n={},r={},i="";try{const s=e.split(".");t=Ti(ii(s[0])||""),n=Ti(ii(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch(sk){}return{header:t,claims:n,data:r,signature:i}};function xi(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ni(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function Pi(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Oi(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function Di(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(Ai(n)&&Ai(s)){if(!Di(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Ai(e){return null!==e&&"object"===typeof e}function Ri(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Li(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function Mi(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class ji{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let u=0;u<16;u++)n[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)n[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=4294967295&(e<<1|e>>>31)}let r,i,s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(r=l^o&(a^l),i=1518500249):(r=o^a^l,i=1859775393):u<60?(r=o&a|l&(o|a),i=2400959708):(r=o^a^l,i=3395469782);const e=(s<<5|s>>>27)+r+c+i+n[u]&4294967295;c=l,l=a,a=4294967295&(o<<30|o>>>2),o=s,s=e}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let s=this.inbuf_;for(;r<t;){if(0===s)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[s]=e.charCodeAt(r),++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<t;)if(i[s]=e[r],++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}}class Fi{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Ui),void 0===r.error&&(r.error=Ui),void 0===r.complete&&(r.complete=Ui);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(sk){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(sk){"undefined"!==typeof console&&console.error&&console.error(sk)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ui(){}function Vi(e,t){return"".concat(e," failed: ").concat(t," argument ")}const zi=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function qi(e){return e&&e._delegate?e._delegate:e}class Bi{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Hi="[DEFAULT]";class Wi{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new pi;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(sk){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(sk){if(r)return null;throw sk}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Hi})}catch(sk){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(sk){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hi;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hi;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hi;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===Hi?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hi;return this.component?this.component.multipleInstances?e:Hi:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Gi{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Wi(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Ki=[];var Qi;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Qi||(Qi={}));const Yi={debug:Qi.DEBUG,verbose:Qi.VERBOSE,info:Qi.INFO,warn:Qi.WARN,error:Qi.ERROR,silent:Qi.SILENT},$i=Qi.INFO,Xi={[Qi.DEBUG]:"log",[Qi.VERBOSE]:"log",[Qi.INFO]:"info",[Qi.WARN]:"warn",[Qi.ERROR]:"error"},Ji=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Xi[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class Zi{constructor(e){this.name=e,this._logLevel=$i,this._logHandler=Ji,this._userLogHandler=null,Ki.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Qi))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Yi[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Qi.DEBUG,...t),this._logHandler(this,Qi.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Qi.VERBOSE,...t),this._logHandler(this,Qi.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Qi.INFO,...t),this._logHandler(this,Qi.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Qi.WARN,...t),this._logHandler(this,Qi.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Qi.ERROR,...t),this._logHandler(this,Qi.ERROR,...t)}}function es(e){return es="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},es(e)}function ts(e){var t=function(e,t){if("object"!=es(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=es(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==es(t)?t:t+""}function ns(e,t,n){return(t=ts(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function is(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rs(Object(n),!0).forEach(function(t){ns(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rs(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let ss,os;const as=new WeakMap,ls=new WeakMap,cs=new WeakMap,us=new WeakMap,hs=new WeakMap;let ds={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return ls.get(e);if("objectStoreNames"===t)return e.objectStoreNames||cs.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return gs(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function fs(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(os||(os=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(ms(this),n),gs(as.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return gs(e.apply(ms(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(ms(this),t,...r);return cs.set(s,t.sort?t.sort():[t]),gs(s)}}function ps(e){return"function"===typeof e?fs(e):(e instanceof IDBTransaction&&function(e){if(ls.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});ls.set(e,t)}(e),t=e,(ss||(ss=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,ds):e);var t}function gs(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(gs(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&as.set(t,e)}).catch(()=>{}),hs.set(t,e),t}(e);if(us.has(e))return us.get(e);const t=ps(e);return t!==e&&(us.set(e,t),hs.set(t,e)),t}const ms=e=>hs.get(e);const ys=["get","getKey","getAll","getAllKeys","count"],vs=["put","add","delete","clear"],_s=new Map;function ws(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(_s.get(t))return _s.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=vs.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!ys.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return _s.set(t,s),s}ds=(e=>is(is({},e),{},{get:(t,n,r)=>ws(t,n)||e.get(t,n,r),has:(t,n)=>!!ws(t,n)||e.has(t,n)}))(ds);class bs{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const Es="@firebase/app",Ss="0.11.3",Cs=new Zi("@firebase/app"),Ts="@firebase/app-compat",Is="@firebase/analytics-compat",ks="@firebase/analytics",xs="@firebase/app-check-compat",Ns="@firebase/app-check",Ps="@firebase/auth",Os="@firebase/auth-compat",Ds="@firebase/database",As="@firebase/data-connect",Rs="@firebase/database-compat",Ls="@firebase/functions",Ms="@firebase/functions-compat",js="@firebase/installations",Fs="@firebase/installations-compat",Us="@firebase/messaging",Vs="@firebase/messaging-compat",zs="@firebase/performance",qs="@firebase/performance-compat",Bs="@firebase/remote-config",Hs="@firebase/remote-config-compat",Ws="@firebase/storage",Gs="@firebase/storage-compat",Ks="@firebase/firestore",Qs="@firebase/vertexai",Ys="@firebase/firestore-compat",$s="firebase",Xs="[DEFAULT]",Js={[Es]:"fire-core",[Ts]:"fire-core-compat",[ks]:"fire-analytics",[Is]:"fire-analytics-compat",[Ns]:"fire-app-check",[xs]:"fire-app-check-compat",[Ps]:"fire-auth",[Os]:"fire-auth-compat",[Ds]:"fire-rtdb",[As]:"fire-data-connect",[Rs]:"fire-rtdb-compat",[Ls]:"fire-fn",[Ms]:"fire-fn-compat",[js]:"fire-iid",[Fs]:"fire-iid-compat",[Us]:"fire-fcm",[Vs]:"fire-fcm-compat",[zs]:"fire-perf",[qs]:"fire-perf-compat",[Bs]:"fire-rc",[Hs]:"fire-rc-compat",[Ws]:"fire-gcs",[Gs]:"fire-gcs-compat",[Ks]:"fire-fst",[Ys]:"fire-fst-compat",[Qs]:"fire-vertex","fire-js":"fire-js",[$s]:"fire-js-all"},Zs=new Map,eo=new Map,to=new Map;function no(e,t){try{e.container.addComponent(t)}catch(sk){Cs.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),sk)}}function ro(e){const t=e.name;if(to.has(t))return Cs.debug("There were multiple attempts to register component ".concat(t,".")),!1;to.set(t,e);for(const n of Zs.values())no(n,e);for(const n of eo.values())no(n,e);return!0}function io(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function so(e){return null!==e&&void 0!==e&&void 0!==e.settings}const oo=new Si("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class ao{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Bi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw oo.create("app-deleted",{appName:this._name})}}const lo="11.5.0";function co(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Xs,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw oo.create("bad-app-name",{appName:String(i)});if(n||(n=di()),!n)throw oo.create("no-options");const s=Zs.get(i);if(s){if(Di(n,s.options)&&Di(r,s.config))return s;throw oo.create("duplicate-app",{appName:i})}const o=new Gi(i);for(const l of to.values())o.addComponent(l);const a=new ao(n,r,o);return Zs.set(i,a),a}function uo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xs;const t=Zs.get(e);if(!t&&e===Xs&&di())return co();if(!t)throw oo.create("no-app",{appName:e});return t}function ho(e,t,n){var r;let i=null!==(r=Js[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Cs.warn(e.join(" "))}ro(new Bi("".concat(i,"-version"),()=>({library:i,version:t}),"VERSION"))}const fo="firebase-heartbeat-store";let po=null;function go(){return po||(po=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=gs(o);return r&&o.addEventListener("upgradeneeded",e=>{r(gs(o.result),e.oldVersion,e.newVersion,gs(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(fo)}catch(sk){console.warn(sk)}}}).catch(e=>{throw oo.create("idb-open",{originalErrorMessage:e.message})})),po}async function mo(e,t){try{const n=(await go()).transaction(fo,"readwrite"),r=n.objectStore(fo);await r.put(t,yo(e)),await n.done}catch(sk){if(sk instanceof Ei)Cs.warn(sk.message);else{const t=oo.create("idb-set",{originalErrorMessage:null===sk||void 0===sk?void 0:sk.message});Cs.warn(t.message)}}}function yo(e){return"".concat(e.name,"!").concat(e.options.appId)}class vo{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new wo(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=_o();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(sk){Cs.warn(sk)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=_o(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),bo(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),bo(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=ri(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(sk){return Cs.warn(sk),""}}}function _o(){return(new Date).toISOString().substring(0,10)}class wo{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!bi()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(ow){t(ow)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await go()).transaction(fo),n=await t.objectStore(fo).get(yo(e));return await t.done,n}catch(sk){if(sk instanceof Ei)Cs.warn(sk.message);else{const t=oo.create("idb-get",{originalErrorMessage:null===sk||void 0===sk?void 0:sk.message});Cs.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return mo(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return mo(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function bo(e){return ri(JSON.stringify({version:2,heartbeats:e})).length}var Eo;Eo="",ro(new Bi("platform-logger",e=>new bs(e),"PRIVATE")),ro(new Bi("heartbeat",e=>new vo(e),"PRIVATE")),ho(Es,Ss,Eo),ho(Es,Ss,"esm2017"),ho("fire-js","");function So(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function Co(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const To=Co,Io=new Si("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ko=new Zi("@firebase/auth");function xo(e){if(ko.logLevel<=Qi.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ko.error("Auth (".concat(lo,"): ").concat(e),...n)}}function No(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Ao(e,...n)}function Po(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Ao(e,...n)}function Oo(e,t,n){const r=Object.assign(Object.assign({},To()),{[t]:n});return new Si("auth","Firebase",r).create(t,{appName:e.name})}function Do(e){return Oo(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ao(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Io.create(e,...n)}function Ro(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Ao(t,...r)}}function Lo(e){const t="INTERNAL ASSERTION FAILED: "+e;throw xo(t),new Error(t)}function Mo(e,t){e||Lo(t)}function jo(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Fo(){return"http:"===Uo()||"https:"===Uo()}function Uo(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Vo(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Fo()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class zo{constructor(e,t){this.shortDelay=e,this.longDelay=t,Mo(t>e,"Short delay should be less than long delay!"),this.isMobile=yi()||vi()}get(){return Vo()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function qo(e,t){Mo(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Bo{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Lo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Lo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Lo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ho={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Wo=new zo(3e4,6e4);function Go(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Ko(e,t,n,r){return Qo(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=Ri(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:a},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),Bo.fetch()($o(e,e.config.apiHost,n,o),l)})}async function Qo(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Ho),t);try{const t=new Jo(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw Zo(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Zo(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Zo(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw Zo(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Oo(e,a,o);No(e,a)}}catch(sk){if(sk instanceof Ei)throw sk;No(e,"network-request-failed",{message:String(sk)})}}async function Yo(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Ko(e,t,n,r,i);return"mfaPendingCredential"in s&&No(e,"multi-factor-auth-required",{_serverResponse:s}),s}function $o(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?qo(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function Xo(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Jo{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Po(this.auth,"network-request-failed")),Wo.get())})}}function Zo(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Po(e,t,r);return i.customData._tokenResponse=n,i}function ea(e){return void 0!==e&&void 0!==e.enterprise}class ta{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Xo(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function na(e,t){return Ko(e,"GET","/v2/recaptchaConfig",Go(e,t))}async function ra(e,t){return Ko(e,"POST","/v1/accounts:lookup",t)}function ia(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(sk){}}function sa(e){return 1e3*Number(e)}function oa(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return xo("JWT malformed, contained fewer than 3 sections"),null;try{const e=ii(n);return e?JSON.parse(e):(xo("Failed to decode base64 JWT payload"),null)}catch(sk){return xo("Caught error parsing JWT payload as JSON",null===sk||void 0===sk?void 0:sk.toString()),null}}function aa(e){const t=oa(e);return Ro(t,"internal-error"),Ro("undefined"!==typeof t.exp,"internal-error"),Ro("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function la(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(sk){throw sk instanceof Ei&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(sk)&&e.auth.currentUser===e&&await e.auth.signOut(),sk}}class ca{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(sk){return void((null===sk||void 0===sk?void 0:sk.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class ua{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ia(this.lastLoginAt),this.creationTime=ia(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ha(e){var t;const n=e.auth,r=await e.getIdToken(),i=await la(e,ra(n,{idToken:r}));Ro(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?da(s.providerUserInfo):[],a=(l=e.providerData,c=o,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ua(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}function da(e){return e.map(e=>{var{providerId:t}=e,n=So(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class fa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ro(e.idToken,"internal-error"),Ro("undefined"!==typeof e.idToken,"internal-error"),Ro("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):aa(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ro(0!==e.length,"internal-error");const t=aa(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Ro(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Qo(e,{},async()=>{const n=Ri({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=$o(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Bo.fetch()(s,{method:"POST",headers:o,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new fa;return n&&(Ro("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Ro("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Ro("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new fa,this.toJSON())}_performRefresh(){return Lo("not implemented")}}function pa(e,t){Ro("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class ga{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=So(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ca(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new ua(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await la(this,this.stsTokenManager.getToken(this.auth,e));return Ro(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=qi(e),r=await n.getIdToken(t),i=oa(r);Ro(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:ia(sa(i.auth_time)),issuedAtTime:ia(sa(i.iat)),expirationTime:ia(sa(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=qi(e);await ha(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Ro(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ga(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ro(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await ha(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(so(this.auth.app))return Promise.reject(Do(this.auth));const e=await this.getIdToken();return await la(this,async function(e,t){return Ko(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:_,isAnonymous:w,providerData:b,stsTokenManager:E}=t;Ro(v&&E,e,"internal-error");const S=fa.fromJSON(this.name,E);Ro("string"===typeof v,e,"internal-error"),pa(u,e.name),pa(h,e.name),Ro("boolean"===typeof _,e,"internal-error"),Ro("boolean"===typeof w,e,"internal-error"),pa(d,e.name),pa(f,e.name),pa(p,e.name),pa(g,e.name),pa(m,e.name),pa(y,e.name);const C=new ga({uid:v,auth:e,email:h,emailVerified:_,displayName:u,isAnonymous:w,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:S,createdAt:m,lastLoginAt:y});return b&&Array.isArray(b)&&(C.providerData=b.map(e=>Object.assign({},e))),g&&(C._redirectEventId=g),C}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new fa;r.updateFromServerResponse(t);const i=new ga({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await ha(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Ro(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?da(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),o=new fa;o.updateFromIdToken(n);const a=new ga({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new ua(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(a,l),a}}const ma=new Map;function ya(e){Mo(e instanceof Function,"Expected a class definition");let t=ma.get(e);return t?(Mo(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ma.set(e,t),t)}class va{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}va.type="NONE";const _a=va;function wa(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class ba{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=wa(this.userKey,r.apiKey,i),this.fullPersistenceKey=wa("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ga._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new ba(ya(_a),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||ya(_a);const s=wa(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){const n=ga._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(l){}const a=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(l){}})),new ba(i,e,n)):new ba(i,e,n)}}function Ea(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Ia(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Sa(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(xa(t))return"Blackberry";if(Na(t))return"Webos";if(Ca(t))return"Safari";if((t.includes("chrome/")||Ta(t))&&!t.includes("edge/"))return"Chrome";if(ka(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Sa(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mi();return/firefox\//i.test(e)}function Ca(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:mi()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ta(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mi();return/crios\//i.test(e)}function Ia(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mi();return/iemobile/i.test(e)}function ka(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mi();return/android/i.test(e)}function xa(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mi();return/blackberry/i.test(e)}function Na(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mi();return/webos/i.test(e)}function Pa(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mi();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Oa(){return function(){const e=mi();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Da(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mi();return Pa(e)||ka(e)||Na(e)||xa(e)||/windows phone/i.test(e)||Ia(e)}function Aa(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Ea(mi());break;case"Worker":t="".concat(Ea(mi()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(lo,"/").concat(r)}class Ra{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(sk){r(sk)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(sk){t.reverse();for(const n of t)try{n()}catch(zr){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===sk||void 0===sk?void 0:sk.message})}}}class La{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Ma{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Fa(this),this.idTokenSubscription=new Fa(this),this.beforeStateQueue=new Ra(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Io,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ya(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await ba.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(sk){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await ra(this,{idToken:e}),n=await ga._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(so(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(sk){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(sk))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ro(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(sk){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ha(e)}catch(sk){if((null===sk||void 0===sk?void 0:sk.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(so(this.app))return Promise.reject(Do(this));const t=e?qi(e):null;return t&&Ro(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Ro(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return so(this.app)?Promise.reject(Do(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return so(this.app)?Promise.reject(Do(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ya(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Ko(e,"GET","/v2/passwordPolicy",Go(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new La(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Si("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Ko(e,"POST","/v2/accounts:revokeToken",Go(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ya(e)||this._popupRedirectResolver;Ro(t,this,"argument-error"),this.redirectPersistenceManager=await ba.create(this,[ya(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ro(o,this,"internal-error"),o.then(()=>{s||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ro(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Aa(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(so(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(ko.logLevel<=Qi.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ko.warn("Auth (".concat(lo,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function ja(e){return qi(e)}class Fa{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new Fi(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return Ro(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ua={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Va(e){return Ua.loadJS(e)}function za(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class qa{constructor(){this.enterprise=new Ba}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Ba{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Ha="NO_RECAPTCHA";class Wa{constructor(e){this.type="recaptcha-enterprise",this.auth=ja(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;ea(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(Ha)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new qa).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{na(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new ta(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&ea(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Ua.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Va(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Ga(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=new Wa(e);let o;if(i)o=Ha;else try{o=await s.verify(n)}catch(ow){o=await s.verify(n,!0)}const a=Object.assign({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in a){const e=a.phoneEnrollmentInfo.phoneNumber,t=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const e=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Ka(e,t,n,r,i){var s,o;if("EMAIL_PASSWORD_PROVIDER"===i){if(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Ga(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await Ga(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}if("PHONE_PROVIDER"===i){if(null===(o=e._getRecaptchaConfig())||void 0===o?void 0:o.isProviderEnabled("PHONE_PROVIDER")){const i=await Ga(e,t,n);return r(e,i).catch(async i=>{var s;if("AUDIT"===(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.getProviderEnforcementState("PHONE_PROVIDER"))&&(i.code==="auth/".concat("missing-recaptcha-token")||i.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const i=await Ga(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)})}{const i=await Ga(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function Qa(e){const t=ja(e),n=await na(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new ta(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new Wa(t).verify()}}function Ya(e,t,n){const r=ja(e);Ro(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=$a(t),{host:o,port:a}=function(e){const t=$a(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Xa(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Xa(t)}}}(t),l=null===a?"":":".concat(a),c={url:"".concat(s,"//").concat(o).concat(l,"/")},u=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return Ro(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void Ro(Di(c,r.config.emulator)&&Di(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function $a(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Xa(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Ja{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Lo("not implemented")}_getIdTokenResponse(e){return Lo("not implemented")}_linkToIdToken(e,t){return Lo("not implemented")}_getReauthenticationResolver(e){return Lo("not implemented")}}async function Za(e,t){return Ko(e,"POST","/v1/accounts:signUp",t)}async function el(e,t){return Yo(e,"POST","/v1/accounts:signInWithPassword",Go(e,t))}class tl extends Ja{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new tl(e,t,"password")}static _fromEmailAndCode(e,t){return new tl(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Ka(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",el,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Yo(e,"POST","/v1/accounts:signInWithEmailLink",Go(e,t))}(e,{email:this._email,oobCode:this._password});default:No(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Ka(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Za,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Yo(e,"POST","/v1/accounts:signInWithEmailLink",Go(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:No(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function nl(e,t){return Yo(e,"POST","/v1/accounts:signInWithIdp",Go(e,t))}class rl extends Ja{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new rl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):No("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=So(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new rl(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return nl(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,nl(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,nl(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ri(t)}return e}}async function il(e,t){return Ko(e,"POST","/v1/accounts:sendVerificationCode",Go(e,t))}const sl={USER_NOT_FOUND:"user-not-found"};class ol extends Ja{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new ol({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new ol({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Yo(e,"POST","/v1/accounts:signInWithPhoneNumber",Go(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Yo(e,"POST","/v1/accounts:signInWithPhoneNumber",Go(e,t));if(n.temporaryProof)throw Zo(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Yo(e,"POST","/v1/accounts:signInWithPhoneNumber",Go(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),sl)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new ol({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class al{constructor(e){var t,n,r,i,s,o;const a=Li(Mi(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Ro(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=Li(Mi(e)).link,n=t?Li(Mi(t)).deep_link_id:null,r=Li(Mi(e)).deep_link_id;return(r?Li(Mi(r)).link:null)||r||n||t||e}(e);try{return new al(t)}catch(n){return null}}}class ll{constructor(){this.providerId=ll.PROVIDER_ID}static credential(e,t){return tl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=al.parseLink(t);return Ro(n,"argument-error"),tl._fromEmailAndCode(e,n.code,n.tenantId)}}ll.PROVIDER_ID="password",ll.EMAIL_PASSWORD_SIGN_IN_METHOD="password",ll.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class cl{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ul extends cl{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class hl extends ul{constructor(){super("facebook.com")}static credential(e){return rl._fromParams({providerId:hl.PROVIDER_ID,signInMethod:hl.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hl.credentialFromTaggedObject(e)}static credentialFromError(e){return hl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return hl.credential(t.oauthAccessToken)}catch(n){return null}}}hl.FACEBOOK_SIGN_IN_METHOD="facebook.com",hl.PROVIDER_ID="facebook.com";class dl extends ul{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return rl._fromParams({providerId:dl.PROVIDER_ID,signInMethod:dl.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return dl.credentialFromTaggedObject(e)}static credentialFromError(e){return dl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return dl.credential(n,r)}catch(i){return null}}}dl.GOOGLE_SIGN_IN_METHOD="google.com",dl.PROVIDER_ID="google.com";class fl extends ul{constructor(){super("github.com")}static credential(e){return rl._fromParams({providerId:fl.PROVIDER_ID,signInMethod:fl.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fl.credentialFromTaggedObject(e)}static credentialFromError(e){return fl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return fl.credential(t.oauthAccessToken)}catch(n){return null}}}fl.GITHUB_SIGN_IN_METHOD="github.com",fl.PROVIDER_ID="github.com";class pl extends ul{constructor(){super("twitter.com")}static credential(e,t){return rl._fromParams({providerId:pl.PROVIDER_ID,signInMethod:pl.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return pl.credentialFromTaggedObject(e)}static credentialFromError(e){return pl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return pl.credential(n,r)}catch(i){return null}}}async function gl(e,t){return Yo(e,"POST","/v1/accounts:signUp",Go(e,t))}pl.TWITTER_SIGN_IN_METHOD="twitter.com",pl.PROVIDER_ID="twitter.com";class ml{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await ga._fromIdTokenResponse(e,n,r),s=yl(n);return new ml({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=yl(n);return new ml({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function yl(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class vl extends Ei{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,vl.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new vl(e,t,n,r)}}function _l(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw vl._fromErrorAndOperation(e,n,t,r);throw n})}async function wl(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await la(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return ml._forOperation(e,"link",r)}async function bl(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(so(r.app))return Promise.reject(Do(r));const i="reauthenticate";try{const s=await la(e,_l(r,i,t,e),n);Ro(s.idToken,r,"internal-error");const o=oa(s.idToken);Ro(o,r,"internal-error");const{sub:a}=o;return Ro(e.uid===a,r,"user-mismatch"),ml._forOperation(e,i,s)}catch(sk){throw(null===sk||void 0===sk?void 0:sk.code)==="auth/".concat("user-not-found")&&No(r,"user-mismatch"),sk}}async function El(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(so(e.app))return Promise.reject(Do(e));const r="signIn",i=await _l(e,r,t),s=await ml._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function Sl(e,t){return El(ja(e),t)}async function Cl(e){const t=ja(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}function Tl(e,t){return Ko(e,"POST","/v2/accounts/mfaEnrollment:start",Go(e,t))}new WeakMap;const Il="__sak";class kl{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Il,"1"),this.storage.removeItem(Il),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class xl extends kl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Da(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Oa()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}xl.type="LOCAL";const Nl=xl;class Pl extends kl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Pl.type="SESSION";const Ol=Pl;class Dl{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Dl(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map(async e=>e(t.origin,i)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Al(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Dl.receivers=[];class Rl{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((o,a)=>{const l=Al("",20);r.port1.start();const c=setTimeout(()=>{a(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function Ll(){return window}function Ml(){return"undefined"!==typeof Ll().WorkerGlobalScope&&"function"===typeof Ll().importScripts}const jl="firebaseLocalStorageDb",Fl="firebaseLocalStorage",Ul="fbase_key";class Vl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function zl(e,t){return e.transaction([Fl],t?"readwrite":"readonly").objectStore(Fl)}function ql(){const e=indexedDB.open(jl,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Fl,{keyPath:Ul})}catch(sk){n(sk)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Fl)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(jl);return new Vl(e).toPromise()}(),t(await ql()))})})}async function Bl(e,t,n){const r=zl(e,!0).put({[Ul]:t,value:n});return new Vl(r).toPromise()}function Hl(e,t){const n=zl(e,!0).delete(t);return new Vl(n).toPromise()}class Wl{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await ql()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(sk){if(t++>3)throw sk;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ml()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Dl._getInstance(Ml()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Rl(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ql();return await Bl(e,Il,"1"),await Hl(e,Il),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Bl(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=zl(e,!1).get(t),r=await new Vl(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Hl(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=zl(e,!1).getAll();return new Vl(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Wl.type="LOCAL";const Gl=Wl;function Kl(e,t){return Ko(e,"POST","/v2/accounts/mfaSignIn:start",Go(e,t))}za("rcb"),new zo(3e4,6e4);const Ql="recaptcha";async function Yl(e,t,n){var r;if(!e._getRecaptchaConfig())try{await Qa(e)}catch(ow){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){Ro("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=Ka(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Ha){Ro((null===n||void 0===n?void 0:n.type)===Ql,e,"argument-error");return Tl(e,await $l(e,t,n))}return Tl(e,t)},"PHONE_PROVIDER"),o=await s.catch(e=>Promise.reject(e));return o.phoneSessionInfo.sessionInfo}{Ro("signin"===t.type,e,"internal-error");const s=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;Ro(s,e,"missing-multi-factor-info");const o={mfaPendingCredential:t.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},a=Ka(e,o,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Ha){Ro((null===n||void 0===n?void 0:n.type)===Ql,e,"argument-error");return Kl(e,await $l(e,t,n))}return Kl(e,t)},"PHONE_PROVIDER"),l=await a.catch(e=>Promise.reject(e));return l.phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=Ka(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===Ha){Ro((null===n||void 0===n?void 0:n.type)===Ql,e,"argument-error");return il(e,await $l(e,t,n))}return il(e,t)},"PHONE_PROVIDER"),s=await r.catch(e=>Promise.reject(e));return s.sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function $l(e,t,n){Ro(n.type===Ql,e,"argument-error");const r=await n.verify();Ro("string"===typeof r,e,"argument-error");const i=Object.assign({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,s=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:s}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class Xl{constructor(e){this.providerId=Xl.PROVIDER_ID,this.auth=ja(e)}verifyPhoneNumber(e,t){return Yl(this.auth,e,qi(t))}static credential(e,t){return ol._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Xl.credentialFromTaggedObject(t)}static credentialFromError(e){return Xl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?ol._fromTokenResponse(n,r):null}}function Jl(e,t){return t?ya(t):(Ro(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Xl.PROVIDER_ID="phone",Xl.PHONE_SIGN_IN_METHOD="phone";class Zl extends Ja{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return nl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return nl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return nl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ec(e){return El(e.auth,new Zl(e),e.bypassAuthState)}function tc(e){const{auth:t,user:n}=e;return Ro(n,t,"internal-error"),bl(n,new Zl(e),e.bypassAuthState)}async function nc(e){const{auth:t,user:n}=e;return Ro(n,t,"internal-error"),wl(n,new Zl(e),e.bypassAuthState)}class rc{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(sk){this.reject(sk)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(sk){this.reject(sk)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ec;case"linkViaPopup":case"linkViaRedirect":return nc;case"reauthViaPopup":case"reauthViaRedirect":return tc;default:No(this.auth,"internal-error")}}resolve(e){Mo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Mo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ic=new zo(2e3,1e4);class sc extends rc{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,sc.currentPopupAction&&sc.currentPopupAction.cancel(),sc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ro(e,this.auth,"internal-error"),e}async onExecution(){Mo(1===this.filter.length,"Popup operations only handle one event");const e=Al();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Po(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Po(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,sc.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Po(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,ic.get())};e()}}sc.currentPopupAction=null;const oc=new Map;class ac extends rc{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=oc.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=uc(t),r=cc(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(sk){e=()=>Promise.reject(sk)}oc.set(this.auth._key(),e)}return this.bypassAuthState||oc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function lc(e,t){oc.set(e._key(),t)}function cc(e){return ya(e._redirectPersistence)}function uc(e){return wa("pendingRedirect",e.config.apiKey,e.name)}async function hc(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(so(e.app))return Promise.reject(Do(e));const r=ja(e),i=Jl(r,t),s=new ac(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class dc{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pc(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!pc(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Po(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(fc(e))}saveEventToCache(e){this.cachedEventUids.add(fc(e)),this.lastProcessedEventTime=Date.now()}}function fc(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function pc(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const gc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mc=/^https?/;async function yc(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Ko(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(vc(r))return}catch(n){}No(e,"unauthorized-domain")}function vc(e){const t=jo(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!mc.test(n))return!1;if(gc.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const _c=new zo(3e4,6e4);function wc(){const e=Ll().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function bc(e){return new Promise((t,n)=>{var r,i,s;function o(){wc(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{wc(),n(Po(e,"network-request-failed"))},timeout:_c.get()})}if(null===(i=null===(r=Ll().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Ll().gapi)||void 0===s?void 0:s.load)){const t=za("iframefcb");return Ll()[t]=()=>{gapi.load?o():n(Po(e,"network-request-failed"))},Va("".concat(Ua.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}o()}}).catch(e=>{throw Ec=null,e})}let Ec=null;const Sc=new zo(5e3,15e3),Cc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Tc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ic(e){const t=e.config;Ro(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?qo(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:lo},i=Tc.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(Ri(r).slice(1))}async function kc(e){const t=await function(e){return Ec=Ec||bc(e),Ec}(e),n=Ll().gapi;return Ro(n,e,"internal-error"),t.open({where:document.body,url:Ic(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Cc,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Po(e,"network-request-failed"),s=Ll().setTimeout(()=>{r(i)},Sc.get());function o(){Ll().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{r(i)})}))}const xc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Nc{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(sk){}}}function Pc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},xc),{width:r.toString(),height:i.toString(),top:s,left:o}),c=mi().toLowerCase();n&&(a=Ta(c)?"_blank":n),Sa(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return Pa(arguments.length>0&&void 0!==arguments[0]?arguments[0]:mi())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new Nc(null);const h=window.open(t||"",a,u);Ro(h,e,"popup-blocked");try{h.focus()}catch(sk){}return new Nc(h)}const Oc="__/auth/handler",Dc="emulator/auth/handler",Ac=encodeURIComponent("fac");async function Rc(e,t,n,r,i,s){Ro(e.config.authDomain,e,"auth-domain-config-required"),Ro(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:lo,eventId:i};if(t instanceof cl){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",Pi(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof ul){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(Ac,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Oc);return qo(t,Dc)}(e),"?").concat(Ri(a).slice(1)).concat(c)}const Lc="webStorageSupport";const Mc=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ol,this._completeRedirectFn=hc,this._overrideRedirectResult=lc}async _openPopup(e,t,n,r){var i;Mo(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Pc(e,await Rc(e,t,n,jo(),r),Al())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Ll().location.href=e}(await Rc(e,t,n,jo(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Mo(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await kc(e),n=new dc(e);return t.register("authEvent",t=>{Ro(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Lc,{type:Lc},n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Lc];void 0!==i&&t(!!i),No(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=yc(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Da()||Ca()||Pa()}};var jc="@firebase/auth",Fc="1.9.1";class Uc{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ro(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Vc=fi("authIdTokenMaxAge")||300;let zc=null;var qc;!function(e){Ua=e}({loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Po("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),qc="Browser",ro(new Bi("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ro(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:qc,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Aa(qc)},c=new Ma(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ya);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),ro(new Bi("auth-internal",e=>(e=>new Uc(e))(ja(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),ho(jc,Fc,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(qc)),ho(jc,Fc,"esm2017");ho("firebase","11.5.0","app");var Bc,Hc,Wc="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Gc={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,o=0;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return d(o(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var a=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function g(e,t){this.g=e,this.h=t}function m(e,t){if(u(t))throw Error("division by zero");if(u(e))return new g(a,a);if(h(e))return t=m(d(e),t),new g(d(t.g),d(t.h));if(h(t))return t=m(e,d(t)),new g(d(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var i=v(n,1),s=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=s.add(r);0>=c.l(e)&&(i=i.add(n),s=c),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new g(i,t)}for(i=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(s=o(n)).j(t);h(c)||0<c.l(e);)c=(s=o(n-=r)).j(t);u(s)&&(s=l),i=i.add(s),e=f(e,c)}return new g(i,e)}function y(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],o=0;o<i;o++)s[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(h(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(h(this))return"-"+d(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,r="";;){var i=m(n,t).g,s=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var o=i+(65535&this.i(s))+(65535&e.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(0>this.l(c)&&0>e.l(c))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,f=65535&this.i(i),g=e.i(s)>>>16,m=65535&e.i(s);n[2*i+2*s]+=f*m,p(n,2*i+2*s),n[2*i+2*s+1]+=l*m,p(n,2*i+2*s+1),n[2*i+2*s+1]+=f*g,p(n,2*i+2*s+1),n[2*i+2*s+2]+=l*g,p(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return m(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Hc=Gc.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(n,8)),i=a,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),c=parseInt(t.substring(s,s+l),n);8>l?(l=o(Math.pow(n,l)),i=i.j(l).add(o(c))):i=(i=i.j(r)).add(o(c))}return i},Bc=Gc.Integer=r}).apply("undefined"!==typeof Wc?Wc:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Kc,Qc,Yc,$c,Xc,Jc,Zc,eu,tu="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},nu={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof tu&&tu];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,function(e,t){return t})}});var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function g(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function m(e){return m[" "](e),e}m[" "]=function(){};var y=-1!=g().indexOf("Gecko")&&!(-1!=g().toLowerCase().indexOf("webkit")&&-1==g().indexOf("Edge"))&&!(-1!=g().indexOf("Trident")||-1!=g().indexOf("MSIE"))&&-1==g().indexOf("Edge");function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function _(e){const t={};for(const n in e)t[n]=e[n];return t}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<w.length;t++)n=w[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function E(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function S(e){i.setTimeout(()=>{throw e},0)}function C(){var e=N;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var T=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new I,e=>e.reset());class I{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let k,x=!1,N=new class{constructor(){this.h=this.g=null}add(e,t){const n=T.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},P=()=>{const e=i.Promise.resolve(void 0);k=()=>{e.then(O)}};var O=()=>{for(var e;e=C();){try{e.h.call(e.g)}catch(nn){S(nn)}var t=T;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}x=!1};function D(){this.s=this.s,this.C=this.C}function A(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}D.prototype.s=!1,D.prototype.ma=function(){this.s||(this.s=!0,this.N())},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},A.prototype.h=function(){this.defaultPrevented=!0};var R=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(nn){}return e}();function L(e,t){if(A.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{m(t.nodeName);var i=!0;break e}catch(fn){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:M[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&L.aa.h.call(this)}}h(L,A);var M={2:"touch",3:"pen",4:"mouse"};L.prototype.h=function(){L.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var j="closure_listenable_"+(1e6*Math.random()|0),F=0;function U(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++F,this.da=this.fa=!1}function V(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function z(e){this.src=e,this.g={},this.h=0}function q(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(V(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function B(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}z.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=B(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new U(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var H="closure_lm_"+(1e6*Math.random()|0),W={};function G(e,t,n,r,i){if(r&&r.once)return Q(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)G(e,t[s],n,r,i);return null}return n=te(n),e&&e[j]?e.K(t,n,o(r)?!!r.capture:!!r,i):K(e,t,n,!1,r,i)}function K(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=o(i)?!!i.capture:!!i,l=Z(e);if(l||(e[H]=l=new z(e)),(n=l.add(t,n,r,a,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=J;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)R||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(X(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Q(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Q(e,t[s],n,r,i);return null}return n=te(n),e&&e[j]?e.L(t,n,o(r)?!!r.capture:!!r,i):K(e,t,n,!0,r,i)}function Y(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Y(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=te(n),e&&e[j]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=B(s=e.g[t],n,r,i))&&(V(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=B(t,n,r,i)),(n=-1<e?t[e]:null)&&$(n))}function $(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[j])q(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(X(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(q(n,e),0==n.h&&(n.src=null,t[H]=null)):V(e)}}}function X(e){return e in W?W[e]:W[e]="on"+e}function J(e,t){if(e.da)e=!0;else{t=new L(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&$(e),e=n.call(r,t)}return e}function Z(e){return(e=e[H])instanceof z?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){D.call(this),this.i=new z(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new A(t,e);else if(t instanceof A)t.target=t.target||e;else{var i=t;b(t=new A(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ie(o,r,!0,t)&&i}if(i=ie(o=t.g=e,r,!0,t)&&i,i=ie(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ie(o=t.g=n[s],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.da&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.fa&&q(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function oe(e){e.g=se(()=>{e.g=null,e.i&&(e.i=!1,oe(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}h(ne,D),ne.prototype[j]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Y(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)V(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ae extends D{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:oe(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){D.call(this),this.h=e,this.g={}}h(le,D);var ce=[];function ue(e){v(e.g,function(e,t){this.g.hasOwnProperty(t)&&$(e)},e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var he=i.JSON.stringify,de=i.JSON.parse,fe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function pe(){}function ge(e){return e.h||(e.h=e.i())}function me(){}pe.prototype.h=null;var ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ve(){A.call(this,"d")}function _e(){A.call(this,"c")}h(ve,A),h(_e,A);var we={},be=null;function Ee(){return be=be||new ne}function Se(e){A.call(this,we.La,e)}function Ce(e){const t=Ee();re(t,new Se(t))}function Te(e,t){A.call(this,we.STAT_EVENT,e),this.stat=t}function Ie(e){const t=Ee();re(t,new Te(t,e))}function ke(e,t){A.call(this,we.Ma,e),this.size=t}function xe(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout(function(){e()},t)}function Ne(){this.g=!0}function Pe(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return he(n)}catch(hn){return t}}(e,n)+(r?" "+r:"")})}we.La="serverreachability",h(Se,A),we.STAT_EVENT="statevent",h(Te,A),we.Ma="timingevent",h(ke,A),Ne.prototype.xa=function(){this.g=!1},Ne.prototype.info=function(){};var Oe,De={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ae={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Re(){}function Le(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Me}function Me(){this.i=null,this.g="",this.h=!1}h(Re,pe),Re.prototype.g=function(){return new XMLHttpRequest},Re.prototype.i=function(){return{}},Oe=new Re;var je={},Fe={};function Ue(e,t,n){e.L=1,e.v=ht(ot(t)),e.m=n,e.P=!0,Ve(e,null)}function Ve(e,t){e.F=Date.now(),Be(e),e.A=ot(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Ct(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Me,e.g=_n(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ae(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ce[0]=i.toString()),i=ce);for(var s=0;s<i.length;s++){var o=G(n,i[s],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?_(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ce(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.i,e.u,e.A,e.l,e.R,e.m)}function ze(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function qe(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fe:(n=Number(t.substring(n,r)),isNaN(n)?je:(r+=1)+n>t.length?Fe:(t=t.slice(r,r+n),e.C=r+n,t))}function Be(e){e.S=Date.now()+e.I,He(e,e.I)}function He(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=xe(c(e.ba,e),t)}function We(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function Ge(e){0==e.j.G||e.J||dn(e.j,e)}function Ke(e){We(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Qe(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(rn){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;un(n),Yt(n)}an(n),Ie(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=xe(c(n.Za,n),6e3));if(1>=Je(n.h)&&n.ca){try{n.ca()}catch(rn){}n.ca=void 0}}else mn(n,11)}else if((e.K||n.g==e)&&un(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=vn(r,r.J?r.ia:null,r.W),o.K){tt(r.h,o);var a=o,l=r.L;l&&(a.I=l),a.B&&(We(a),Be(a)),r.g=o}else tn(r);0<n.i.length&&Xt(n)}else"stop"!=c[0]&&"close"!=c[0]||mn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?mn(n,7):Qt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Ce()}catch(rn){}}Le.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Ht(e)?t.j():this.Y(e)},Le.prototype.Y=function(e){try{if(e==this.g)e:{const d=Ht(this.g);var t=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||Wt(this.g)))){this.J||4!=d||7==t||Ce(),We(this);var n=this.g.Z();this.X=n;t:if(ze(this)){var r=Wt(this.g);e="";var s=r.length,o=4==Ht(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ke(this),Ge(this);var a="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o})}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Ie(12),Ke(this),Ge(this);break e}Pe(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qe(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=qe(this,a),e==Fe){4==d&&(this.s=4,Ie(14),n=!1),Pe(this.i,this.l,null,"[Incomplete Response]");break}if(e==je){this.s=4,Ie(15),Pe(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Pe(this.i,this.l,e,null),Qe(this,e)}if(ze(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=a.length||this.h.h||(this.s=1,Ie(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),ln(h),h.M=!0,Ie(11))}}else Pe(this.i,this.l,a,"[Invalid Chunked Response]"),Ke(this),Ge(this)}else Pe(this.i,this.l,a,null),Qe(this,a);4==d&&Ke(this),this.o&&!this.J&&(4==d?dn(this.j,this):(this.o=!1,Be(this)))}else(function(e){const t={};e=(e.g&&2<=Ht(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=E(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Ie(12)):(this.s=0,Ie(13)),Ke(this),Ge(this)}}}catch(pn){}},Le.prototype.cancel=function(){this.J=!0,Ke(this)},Le.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(Ce(),Ie(17)),Ke(this),this.s=2,Ge(this)):He(this,this.S-e)};var Ye=class{constructor(e,t){this.g=e,this.map=t}};function $e(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Je(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}$e.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,at(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new wt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,at(this,t[1]||"",!0),this.o=dt(t[2]||""),this.g=dt(t[3]||"",!0),lt(this,t[4]),this.l=dt(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=dt(t[7]||"")):(this.h=!1,this.i=new wt(null,this.h))}function ot(e){return new st(e)}function at(e,t,n){e.j=n?dt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof wt?(e.i=t,function(e,t){t&&!e.j&&(bt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Et(this,t),Ct(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,vt)),e.i=new wt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function ht(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function dt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,gt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?yt:mt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,_t)),e.join("")};var gt=/[#\/\?@]/g,mt=/[#\?:]/g,yt=/[#\?]/g,vt=/[#\?@]/g,_t=/#/g;function wt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function bt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Et(e,t){bt(e),t=Tt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function St(e,t){return bt(e),t=Tt(e,t),e.g.has(t)}function Ct(e,t,n){Et(e,t),0<n.length&&(e.i=null,e.g.set(Tt(e,t),d(n)),e.h+=n.length)}function Tt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function It(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(fn){}}function kt(){this.g=new fe}function xt(e,t,n){const r=n||"";try{rt(e,function(e,n){let i=e;o(e)&&(i=he(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(sk){throw t.push(r+"type="+encodeURIComponent("_badmap")),sk}}function Nt(e){this.l=e.Ub||null,this.j=e.eb||!1}function Pt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Ot(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Dt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,At(e)}function At(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Rt(e){let t="";return v(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Lt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Rt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Mt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=wt.prototype).add=function(e,t){bt(this),this.i=null,e=Tt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){bt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){bt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){bt(this);let t=[];if("string"===typeof e)St(this,e)&&(t=t.concat(this.g.get(Tt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return bt(this),this.i=null,St(this,e=Tt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")},h(Nt,pe),Nt.prototype.g=function(){return new Pt(this.l,this.j)},Nt.prototype.i=function(e){return function(){return e}}({}),h(Pt,ne),(e=Pt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,At(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Dt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,At(this)),this.g&&(this.readyState=3,At(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ot(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Dt(this):At(this),3==this.readyState&&Ot(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Dt(this))},e.Qa=function(e){this.g&&(this.response=e,Dt(this))},e.ga=function(){this.g&&Dt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Pt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(Mt,ne);var jt=/^https?$/i,Ft=["POST","PUT"];function Ut(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Vt(e),qt(e)}function Vt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function zt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Ht(e)||2!=e.Z()))if(e.u&&4==Ht(e))se(e.Ea,0,e);else if(re(e,"readystatechange"),4==Ht(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var o=String(e.D).match(it)[1]||null;!o&&i.self&&i.self.location&&(o=i.self.location.protocol.slice(0,-1)),s=!jt.test(o?o.toLowerCase():"")}n=s}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var a=2<Ht(e)?e.g.statusText:""}catch(hn){a=""}e.l=a+" ["+e.Z()+"]",Vt(e)}}finally{qt(e)}}}function qt(e,t){if(e.g){Bt(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(sk){}}}function Bt(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function Ht(e){return e.g?e.g.readyState:0}function Wt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(yr){return null}}function Gt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Kt(e){this.Aa=0,this.i=[],this.j=new Ne,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gt("baseRetryDelayMs",5e3,e),this.cb=Gt("retryDelaySeedMs",1e4,e),this.Wa=Gt("forwardChannelMaxRetries",2,e),this.wa=Gt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new $e(e&&e.concurrentRequestLimit),this.Da=new kt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Qt(e){if($t(e),3==e.G){var t=e.U++,n=ot(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),Zt(e,n),(t=new Le(e,e.j,t)).L=2,t.v=ht(ot(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(on){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=_n(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Be(t)}yn(e)}function Yt(e){e.g&&(ln(e),e.g.cancel(),e.g=null)}function $t(e){Yt(e),e.u&&(i.clearTimeout(e.u),e.u=null),un(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Xt(e){if(!Xe(e.h)&&!e.s){e.s=!0;var t=e.Ga;k||P(),x||(k(),x=!0),N.add(t,e),e.B=0}}function Jt(e,t){var n;n=t?t.l:e.U++;const r=ot(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),Zt(e,r),e.m&&e.o&&Lt(r,e.m,e.o),n=new Le(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=en(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Ue(n,r,t)}function Zt(e,t){e.H&&v(e.H,function(e,n){ut(t,n,e)}),e.l&&rt({},function(e,n){ut(t,n,e)})}function en(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{xt(a,e,"req"+n+"_")}catch(pn){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function tn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;k||P(),x||(k(),x=!0),N.add(t,e),e.v=0}}function an(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=xe(c(e.Fa,e),gn(e,e.v)),e.v++,!0)}function ln(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function cn(e){e.g=new Le(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=ot(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),Zt(e,t),e.m&&e.o&&Lt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ht(ot(t)),n.m=null,n.P=!0,Ve(n,e)}function un(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function dn(e,t){var n=null;if(e.g==t){un(e),ln(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=Ee(),new ke(r,n)),Xt(e)}else tn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Je(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=xe(c(e.Ga,e,t),gn(e,e.B)),e.B++,!0))}(e,t)||2==r&&an(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:mn(e,5);break;case 4:mn(e,10);break;case 3:mn(e,6);break;default:mn(e,2)}}function gn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function mn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new st(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||at(r,"https"),ht(r),t?function(e,t){const n=new Ne;if(i.Image){const r=new Image;r.onload=u(It,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(It,n,"TestLoadImage: error",!1,t,r),r.onabort=u(It,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(It,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ne;const n=new AbortController,r=setTimeout(()=>{n.abort(),It(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?It(0,0,!0,t):It(0,0,!1,t)}).catch(()=>{clearTimeout(r),It(0,0,!1,t)})}(r.toString(),n)}else Ie(2);e.G=0,e.l&&e.l.sa(t),yn(e),$t(e)}function yn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function vn(e,t,n){var r=n instanceof st?ot(n):new st(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var o=new st(null);r&&at(o,r),t&&(o.g=t),s&&lt(o,s),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),Zt(e,r),r}function _n(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Mt(new Nt({eb:n})):new Mt(e.pa)).Ha(e.J),t}function wn(){}function bn(){}function En(e,t){ne.call(this),this.g=new Kt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Tn(this)}function Sn(e){ve.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Cn(){_e.call(this),this.status=1}function Tn(e){this.g=e}(e=Mt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Oe.g(),this.v=this.o?ge(this.o):ge(Oe),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(fn){return void Ut(this,fn)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Ft,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Bt(this),this.u=!0,this.g.send(e),this.u=!1}catch(fn){Ut(this,fn)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),qt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qt(this,!0)),Mt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?zt(this):this.bb())},e.bb=function(){zt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Ht(this)?this.g.status:-1}catch(sn){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(sn){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),de(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Kt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Ie(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=vn(this,null,this.W),Xt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Le(this,this.j,e);let s=this.o;if(this.S&&(s?(s=_(s),b(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=en(this,i,t),ut(n=ot(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),Zt(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Rt(s)))+"&"+t:this.m&&Lt(n,this.m,s)),et(this.h,i),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),i.T=!0,Ue(i,n,null)):Ue(i,n,t),this.G=2}}else 3==this.G&&(e?Jt(this,e):0==this.i.length||Xe(this.h)||Jt(this))},e.Fa=function(){if(this.u=null,cn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=xe(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ie(10),Yt(this),cn(this))},e.Za=function(){null!=this.C&&(this.C=null,Yt(this),an(this),Ie(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Ie(2)):(this.j.info("Failed to ping google.com"),Ie(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=wn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},bn.prototype.g=function(e,t){return new En(e,t)},h(En,ne),En.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},En.prototype.close=function(){Qt(this.g)},En.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=he(e),e=n);t.i.push(new Ye(t.Ya++,e)),3==t.G&&Xt(t)},En.prototype.N=function(){this.g.l=null,delete this.j,Qt(this.g),delete this.g,En.aa.N.call(this)},h(Sn,ve),h(Cn,_e),h(Tn,wn),Tn.prototype.ua=function(){re(this.g,"a")},Tn.prototype.ta=function(e){re(this.g,new Sn(e))},Tn.prototype.sa=function(e){re(this.g,new Cn)},Tn.prototype.ra=function(){re(this.g,"b")},bn.prototype.createWebChannel=bn.prototype.g,En.prototype.send=En.prototype.o,En.prototype.open=En.prototype.m,En.prototype.close=En.prototype.close,eu=nu.createWebChannelTransport=function(){return new bn},Zc=nu.getStatEventTarget=function(){return Ee()},Jc=nu.Event=we,Xc=nu.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},De.NO_ERROR=0,De.TIMEOUT=8,De.HTTP_ERROR=6,$c=nu.ErrorCode=De,Ae.COMPLETE="complete",Yc=nu.EventType=Ae,me.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",ne.prototype.listen=ne.prototype.K,Qc=nu.WebChannel=me,nu.FetchXmlHttpFactory=Nt,Mt.prototype.listenOnce=Mt.prototype.L,Mt.prototype.getLastError=Mt.prototype.Ka,Mt.prototype.getLastErrorCode=Mt.prototype.Ba,Mt.prototype.getStatus=Mt.prototype.Z,Mt.prototype.getResponseJson=Mt.prototype.Oa,Mt.prototype.getResponseText=Mt.prototype.oa,Mt.prototype.send=Mt.prototype.ea,Mt.prototype.setWithCredentials=Mt.prototype.Ha,Kc=nu.XhrIo=Mt}).apply("undefined"!==typeof tu?tu:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const ru="@firebase/firestore",iu="4.7.10";class su{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}su.UNAUTHENTICATED=new su(null),su.GOOGLE_CREDENTIALS=new su("google-credentials-uid"),su.FIRST_PARTY=new su("first-party-uid"),su.MOCK_USER=new su("mock-user");let ou="11.5.0";const au=new Zi("@firebase/firestore");function lu(){return au.logLevel}function cu(e){if(au.logLevel<=Qi.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(du);au.debug("Firestore (".concat(ou,"): ").concat(e),...i)}}function uu(e){if(au.logLevel<=Qi.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(du);au.error("Firestore (".concat(ou,"): ").concat(e),...i)}}function hu(e){if(au.logLevel<=Qi.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(du);au.warn("Firestore (".concat(ou,"): ").concat(e),...i)}}function du(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(Jt){return e}}function fu(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(ou,") INTERNAL ASSERTION FAILED: ")+e;throw uu(t),new Error(t)}function pu(e,t){e||fu()}function gu(e,t){return e}const mu={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class yu extends Ei{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class vu{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class _u{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class wu{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(su.UNAUTHENTICATED))}shutdown(){}}class bu{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Eu{constructor(e){this.t=e,this.currentUser=su.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){pu(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new vu;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new vu,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},o=e=>{cu("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(cu("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new vu)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(cu("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(pu("string"==typeof t.accessToken),new _u(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pu(null===e||"string"==typeof e),new su(e)}}class Su{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=su.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class Cu{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Su(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(su.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Tu{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Iu{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,so(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){pu(void 0===this.o);const n=e=>{null!=e.error&&cu("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,cu("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{cu("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):cu("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new Tu(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(pu("string"==typeof e.token),this.R=e.token,new Tu(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function ku(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}function xu(){return new TextEncoder}class Nu{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=ku(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function Pu(e,t){return e<t?-1:e>t?1:0}function Ou(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),i=t.codePointAt(n);if(r!==i){if(r<128&&i<128)return Pu(r,i);{const s=xu(),o=Au(s.encode(Du(e,n)),s.encode(Du(t,n)));return 0!==o?o:Pu(r,i)}}n+=r>65535?2:1}return Pu(e.length,t.length)}function Du(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function Au(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return Pu(e[n],t[n]);return Pu(e.length,t.length)}function Ru(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const Lu=-62135596800,Mu=1e6;class ju{static now(){return ju.fromMillis(Date.now())}static fromDate(e){return ju.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Mu);return new ju(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new yu(mu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new yu(mu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Lu)throw new yu(mu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new yu(mu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Mu}_compareTo(e){return this.seconds===e.seconds?Pu(this.nanoseconds,e.nanoseconds):Pu(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Lu;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Fu{static fromTimestamp(e){return new Fu(e)}static min(){return new Fu(new ju(0,0))}static max(){return new Fu(new ju(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Uu="__name__";class Vu{constructor(e,t,n){void 0===t?t=0:t>e.length&&fu(),void 0===n?n=e.length-t:n>e.length-t&&fu(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Vu.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Vu?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=Vu.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return Pu(e.length,t.length)}static compareSegments(e,t){const n=Vu.isNumericId(e),r=Vu.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?Vu.extractNumericId(e).compare(Vu.extractNumericId(t)):Ou(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Bc.fromString(e.substring(4,e.length-2))}}class zu extends Vu{construct(e,t,n){return new zu(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new yu(mu.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter(e=>e.length>0))}return new zu(e)}static emptyPath(){return new zu([])}}const qu=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Bu extends Vu{construct(e,t,n){return new Bu(e,t,n)}static isValidIdentifier(e){return qu.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Bu.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Uu}static keyField(){return new Bu([Uu])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new yu(mu.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new yu(mu.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new yu(mu.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new yu(mu.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Bu(t)}static emptyPath(){return new Bu([])}}class Hu{constructor(e){this.path=e}static fromPath(e){return new Hu(zu.fromString(e))}static fromName(e){return new Hu(zu.fromString(e).popFirst(5))}static empty(){return new Hu(zu.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===zu.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return zu.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Hu(new zu(e.slice()))}}const Wu=-1;class Gu{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}Gu.UNKNOWN_ID=-1;function Ku(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Fu.fromTimestamp(1e9===r?new ju(n+1,0):new ju(n,r));return new Yu(i,Hu.empty(),t)}function Qu(e){return new Yu(e.readTime,e.key,Wu)}class Yu{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Yu(Fu.min(),Hu.empty(),Wu)}static max(){return new Yu(Fu.max(),Hu.empty(),Wu)}}function $u(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Hu.comparator(e.documentKey,t.documentKey),0!==n?n:Pu(e.largestBatchId,t.largestBatchId))}const Xu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ju{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Zu(e){if(e.code!==mu.FAILED_PRECONDITION||e.message!==Xu)throw e;cu("LocalStore","Unexpectedly lost primary lease")}class eh{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&fu(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new eh((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof eh?t:eh.resolve(t)}catch(e){return eh.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):eh.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):eh.reject(t)}static resolve(e){return new eh((t,n)=>{t(e)})}static reject(e){return new eh((t,n)=>{n(e)})}static waitFor(e){return new eh((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=eh.resolve(!1);for(const n of e)t=t.next(e=>e?eh.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new eh((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next(e=>{s[l]=e,++o,o===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new eh((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function th(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function nh(e){return"IndexedDbTransactionError"===e.name}class rh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.oe(e),this._e=e=>t.writeSequenceNumber(e))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}rh.ae=-1;const ih=-1;function sh(e){return null==e}function oh(e){return 0===e&&1/e==-1/0}function ah(e){return"number"==typeof e&&Number.isInteger(e)&&!oh(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const lh="\x01";function ch(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=hh(t)),t=uh(e.get(n),t);return hh(t)}function uh(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case lh:n+="\x01\x11";break;default:n+=t}}return n}function hh(e){return e+lh+"\x01"}const dh="remoteDocuments",fh="owner",ph="mutationQueues",gh="mutations";const mh="documentMutations",yh="remoteDocumentsV14",vh="remoteDocumentGlobal",_h="targets",wh="targetDocuments",bh="targetGlobal",Eh="collectionParents",Sh="clientMetadata",Ch="bundles",Th="namedQueries",Ih="indexConfiguration",kh="indexState",xh="indexEntries",Nh="documentOverlays",Ph="globals",Oh=[ph,gh,mh,dh,_h,fh,bh,wh,Sh,vh,Eh,Ch,Th],Dh=[ph,gh,mh,yh,_h,fh,bh,wh,Sh,vh,Eh,Ch,Th,Nh],Ah=Dh,Rh=[...Ah,Ih,kh,xh];function Lh(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Mh(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function jh(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Fh{constructor(e,t){this.comparator=e,this.root=t||Vh.EMPTY}insert(e,t){return new Fh(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Vh.BLACK,null,null))}remove(e){return new Fh(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vh.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Uh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Uh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Uh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Uh(this.root,e,this.comparator,!0)}}class Uh{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vh{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Vh.RED,this.left=null!=r?r:Vh.EMPTY,this.right=null!=i?i:Vh.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Vh(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Vh.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Vh.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vh.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vh.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw fu();if(this.right.isRed())throw fu();const e=this.left.check();if(e!==this.right.check())throw fu();return e+(this.isRed()?0:1)}}Vh.EMPTY=null,Vh.RED=!0,Vh.BLACK=!1,Vh.EMPTY=new class{constructor(){this.size=0}get key(){throw fu()}get value(){throw fu()}get color(){throw fu()}get left(){throw fu()}get right(){throw fu()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Vh(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class zh{constructor(e){this.comparator=e,this.data=new Fh(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new qh(this.data.getIterator())}getIteratorFrom(e){return new qh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof zh))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new zh(this.comparator);return t.data=e,t}}class qh{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Bh{constructor(e){this.fields=e,e.sort(Bu.comparator)}static empty(){return new Bh([])}unionWith(e){let t=new zh(Bu.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Bh(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ru(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Hh extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Wh{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Hh("Invalid base64 string: "+e):e}}(e);return new Wh(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Wh(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pu(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wh.EMPTY_BYTE_STRING=new Wh("");const Gh=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Kh(e){if(pu(!!e),"string"==typeof e){let t=0;const n=Gh.exec(e);if(pu(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Qh(e.seconds),nanos:Qh(e.nanos)}}function Qh(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Yh(e){return"string"==typeof e?Wh.fromBase64String(e):Wh.fromUint8Array(e)}const $h="server_timestamp",Xh="__type__",Jh="__previous_value__",Zh="__local_write_time__";function ed(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[Xh])||void 0===n?void 0:n.stringValue)===$h}function td(e){const t=e.mapValue.fields[Jh];return ed(t)?td(t):t}function nd(e){const t=Kh(e.mapValue.fields[Zh].timestampValue);return new ju(t.seconds,t.nanos)}class rd{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}const id="(default)";class sd{constructor(e,t){this.projectId=e,this.database=t||id}static empty(){return new sd("","")}get isDefaultDatabase(){return this.database===id}isEqual(e){return e instanceof sd&&e.projectId===this.projectId&&e.database===this.database}}const od="__type__",ad="__max__",ld={mapValue:{fields:{__type__:{stringValue:ad}}}},cd="__vector__",ud="value";function hd(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ed(e)?4:xd(e)?9007199254740991:Id(e)?10:11:fu()}function dd(e,t){if(e===t)return!0;const n=hd(e);if(n!==hd(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return nd(e).isEqual(nd(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Kh(e.timestampValue),r=Kh(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Yh(e.bytesValue).isEqual(Yh(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Qh(e.geoPointValue.latitude)===Qh(t.geoPointValue.latitude)&&Qh(e.geoPointValue.longitude)===Qh(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Qh(e.integerValue)===Qh(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Qh(e.doubleValue),r=Qh(t.doubleValue);return n===r?oh(n)===oh(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ru(e.arrayValue.values||[],t.arrayValue.values||[],dd);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Lh(n)!==Lh(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!dd(n[i],r[i])))return!1;return!0}(e,t);default:return fu()}}function fd(e,t){return void 0!==(e.values||[]).find(e=>dd(e,t))}function pd(e,t){if(e===t)return 0;const n=hd(e),r=hd(t);if(n!==r)return Pu(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Pu(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Qh(e.integerValue||e.doubleValue),r=Qh(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return gd(e.timestampValue,t.timestampValue);case 4:return gd(nd(e),nd(t));case 5:return Ou(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Yh(e),r=Yh(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Pu(n[i],r[i]);if(0!==e)return e}return Pu(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Pu(Qh(e.latitude),Qh(t.latitude));return 0!==n?n:Pu(Qh(e.longitude),Qh(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return md(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const o=e.fields||{},a=t.fields||{},l=null===(n=o[ud])||void 0===n?void 0:n.arrayValue,c=null===(r=a[ud])||void 0===r?void 0:r.arrayValue,u=Pu((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(s=null==c?void 0:c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:md(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===ld.mapValue&&t===ld.mapValue)return 0;if(e===ld.mapValue)return 1;if(t===ld.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Ou(r[o],s[o]);if(0!==e)return e;const t=pd(n[r[o]],i[s[o]]);if(0!==t)return t}return Pu(r.length,s.length)}(e.mapValue,t.mapValue);default:throw fu()}}function gd(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Pu(e,t);const n=Kh(e),r=Kh(t),i=Pu(n.seconds,r.seconds);return 0!==i?i:Pu(n.nanos,r.nanos)}function md(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=pd(n[i],r[i]);if(e)return e}return Pu(n.length,r.length)}function yd(e){return vd(e)}function vd(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Kh(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Yh(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Hu.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=vd(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(vd(e.fields[i]));return n+"}"}(e.mapValue):fu()}function _d(e){switch(hd(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=td(e);return t?16+_d(t):16;case 5:return 2*e.stringValue.length;case 6:return Yh(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+_d(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return Mh(e.fields,(e,n)=>{t+=e.length+_d(n)}),t}(e.mapValue);default:throw fu()}}function wd(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function bd(e){return!!e&&"integerValue"in e}function Ed(e){return!!e&&"arrayValue"in e}function Sd(e){return!!e&&"nullValue"in e}function Cd(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Td(e){return!!e&&"mapValue"in e}function Id(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[od])||void 0===n?void 0:n.stringValue)===cd}function kd(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Mh(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=kd(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=kd(e.arrayValue.values[n]);return t}return Object.assign({},e)}function xd(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===ad}class Nd{constructor(e){this.value=e}static empty(){return new Nd({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Td(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=kd(t)}setAll(e){let t=Bu.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=kd(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Td(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return dd(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Td(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Mh(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Nd(kd(this.value))}}function Pd(e){const t=[];return Mh(e.fields,(e,n)=>{const r=new Bu([e]);if(Td(n)){const e=Pd(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new Bh(t)}class Od{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Od(e,0,Fu.min(),Fu.min(),Fu.min(),Nd.empty(),0)}static newFoundDocument(e,t,n,r){return new Od(e,1,t,Fu.min(),n,r,0)}static newNoDocument(e,t){return new Od(e,2,t,Fu.min(),Fu.min(),Nd.empty(),0)}static newUnknownDocument(e,t){return new Od(e,3,t,Fu.min(),Fu.min(),Nd.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Fu.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nd.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nd.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Fu.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Od&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Od(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Dd{constructor(e,t){this.position=e,this.inclusive=t}}function Ad(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?Hu.comparator(Hu.fromName(o.referenceValue),n.key):pd(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Rd(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!dd(e.position[n],t.position[n]))return!1;return!0}class Ld{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Md(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class jd{}class Fd extends jd{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Gd(e,t,n):"array-contains"===t?new $d(e,n):"in"===t?new Xd(e,n):"not-in"===t?new Jd(e,n):"array-contains-any"===t?new Zd(e,n):new Fd(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Kd(e,n):new Qd(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(pd(t,this.value)):null!==t&&hd(this.value)===hd(t)&&this.matchesComparison(pd(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return fu()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ud extends jd{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new Ud(e,t)}matches(e){return Vd(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ce||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function Vd(e){return"and"===e.op}function zd(e){return qd(e)&&Vd(e)}function qd(e){for(const t of e.filters)if(t instanceof Ud)return!1;return!0}function Bd(e){if(e instanceof Fd)return e.field.canonicalString()+e.op.toString()+yd(e.value);if(zd(e))return e.filters.map(e=>Bd(e)).join(",");{const t=e.filters.map(e=>Bd(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function Hd(e,t){return e instanceof Fd?function(e,t){return t instanceof Fd&&e.op===t.op&&e.field.isEqual(t.field)&&dd(e.value,t.value)}(e,t):e instanceof Ud?function(e,t){return t instanceof Ud&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Hd(n,t.filters[r]),!0)}(e,t):void fu()}function Wd(e){return e instanceof Fd?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(yd(e.value))}(e):e instanceof Ud?function(e){return e.op.toString()+" {"+e.getFilters().map(Wd).join(" ,")+"}"}(e):"Filter"}class Gd extends Fd{constructor(e,t,n){super(e,t,n),this.key=Hu.fromName(n.referenceValue)}matches(e){const t=Hu.comparator(e.key,this.key);return this.matchesComparison(t)}}class Kd extends Fd{constructor(e,t){super(e,"in",t),this.keys=Yd("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Qd extends Fd{constructor(e,t){super(e,"not-in",t),this.keys=Yd("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Yd(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>Hu.fromName(e.referenceValue))}class $d extends Fd{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ed(t)&&fd(t.arrayValue,this.value)}}class Xd extends Fd{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&fd(this.value.arrayValue,t)}}class Jd extends Fd{constructor(e,t){super(e,"not-in",t)}matches(e){if(fd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!fd(this.value.arrayValue,t)}}class Zd extends Fd{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ed(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>fd(this.value.arrayValue,e))}}class ef{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.le=null}}function tf(e){return new ef(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function nf(e){const t=gu(e);if(null===t.le){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Bd(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),sh(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>yd(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>yd(e)).join(",")),t.le=e}return t.le}function rf(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Md(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Hd(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Rd(e.startAt,t.startAt)&&Rd(e.endAt,t.endAt)}function sf(e){return Hu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class of{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function af(e,t,n,r,i,s,o,a){return new of(e,t,n,r,i,s,o,a)}function lf(e){return new of(e)}function cf(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function uf(e){return null!==e.collectionGroup}function hf(e){const t=gu(e);if(null===t.he){t.he=[];const e=new Set;for(const i of t.explicitOrderBy)t.he.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new zh(Bu.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.he.push(new Ld(r,n))}),e.has(Bu.keyField().canonicalString())||t.he.push(new Ld(Bu.keyField(),n))}return t.he}function df(e){const t=gu(e);return t.Pe||(t.Pe=ff(t,hf(e))),t.Pe}function ff(e,t){if("F"===e.limitType)return tf(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new Ld(e.field,t)});const n=e.endAt?new Dd(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Dd(e.startAt.position,e.startAt.inclusive):null;return tf(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function pf(e,t){const n=e.filters.concat([t]);return new of(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function gf(e,t,n){return new of(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function mf(e,t){return rf(df(e),df(t))&&e.limitType===t.limitType}function yf(e){return"".concat(nf(df(e)),"|lt:").concat(e.limitType)}function vf(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>Wd(e)).join(", "),"]")),sh(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>yd(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>yd(e)).join(",")),"Target(".concat(t,")")}(df(e)),"; limitType=").concat(e.limitType,")")}function _f(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Hu.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of hf(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Ad(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,hf(e),t))&&!(e.endAt&&!function(e,t,n){const r=Ad(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,hf(e),t))}(e,t)}function wf(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function bf(e){return(t,n)=>{let r=!1;for(const i of hf(e)){const e=Ef(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Ef(e,t,n){const r=e.field.isKeyField()?Hu.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?pd(r,i):fu()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return fu()}}class Sf{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Mh(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return jh(this.inner)}size(){return this.innerSize}}const Cf=new Fh(Hu.comparator);function Tf(){return Cf}const If=new Fh(Hu.comparator);function kf(){let e=If;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function xf(e){let t=If;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function Nf(){return Of()}function Pf(){return Of()}function Of(){return new Sf(e=>e.toString(),(e,t)=>e.isEqual(t))}const Df=new Fh(Hu.comparator),Af=new zh(Hu.comparator);function Rf(){let e=Af;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Lf=new zh(Pu);function Mf(){return Lf}function jf(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:oh(t)?"-0":t}}function Ff(e){return{integerValue:""+e}}function Uf(e,t){return ah(t)?Ff(t):jf(e,t)}class Vf{constructor(){this._=void 0}}function zf(e,t,n){return e instanceof Hf?function(e,t){const n={fields:{[Xh]:{stringValue:$h},[Zh]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&ed(t)&&(t=td(t)),t&&(n.fields[Jh]=t),{mapValue:n}}(n,t):e instanceof Wf?Gf(e,t):e instanceof Kf?Qf(e,t):function(e,t){const n=Bf(e,t),r=$f(n)+$f(e.Ie);return bd(n)&&bd(e.Ie)?Ff(r):jf(e.serializer,r)}(e,t)}function qf(e,t,n){return e instanceof Wf?Gf(e,t):e instanceof Kf?Qf(e,t):n}function Bf(e,t){return e instanceof Yf?function(e){return bd(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Hf extends Vf{}class Wf extends Vf{constructor(e){super(),this.elements=e}}function Gf(e,t){const n=Xf(t);for(const r of e.elements)n.some(e=>dd(e,r))||n.push(r);return{arrayValue:{values:n}}}class Kf extends Vf{constructor(e){super(),this.elements=e}}function Qf(e,t){let n=Xf(t);for(const r of e.elements)n=n.filter(e=>!dd(e,r));return{arrayValue:{values:n}}}class Yf extends Vf{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function $f(e){return Qh(e.integerValue||e.doubleValue)}function Xf(e){return Ed(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Jf{constructor(e,t){this.field=e,this.transform=t}}class Zf{constructor(e,t){this.version=e,this.transformResults=t}}class ep{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ep}static exists(e){return new ep(void 0,e)}static updateTime(e){return new ep(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function tp(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class np{}function rp(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new fp(e.key,ep.none()):new lp(e.key,e.data,ep.none());{const n=e.data,r=Nd.empty();let i=new zh(Bu.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new cp(e.key,r,new Bh(i.toArray()),ep.none())}}function ip(e,t,n){e instanceof lp?function(e,t,n){const r=e.value.clone(),i=hp(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof cp?function(e,t,n){if(!tp(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=hp(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(up(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function sp(e,t,n,r){return e instanceof lp?function(e,t,n,r){if(!tp(e.precondition,t))return n;const i=e.value.clone(),s=dp(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof cp?function(e,t,n,r){if(!tp(e.precondition,t))return n;const i=dp(e.fieldTransforms,r,t),s=t.data;return s.setAll(up(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return tp(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function op(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Bf(r.transform,e||null);null!=i&&(null===n&&(n=Nd.empty()),n.set(r.field,i))}return n||null}function ap(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ru(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Wf&&t instanceof Wf||e instanceof Kf&&t instanceof Kf?Ru(e.elements,t.elements,dd):e instanceof Yf&&t instanceof Yf?dd(e.Ie,t.Ie):e instanceof Hf&&t instanceof Hf}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class lp extends np{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class cp extends np{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function up(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function hp(e,t,n){const r=new Map;pu(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,qf(o,a,n[i]))}return r}function dp(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,zf(e,s,t))}return r}class fp extends np{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class pp extends np{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class gp{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&ip(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=sp(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=sp(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Pf();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=rp(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(Fu.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Rf())}isEqual(e){return this.batchId===e.batchId&&Ru(this.mutations,e.mutations,(e,t)=>ap(e,t))&&Ru(this.baseMutations,e.baseMutations,(e,t)=>ap(e,t))}}class mp{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){pu(e.mutations.length===n.length);let r=Df;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new mp(e,t,n,r)}}class yp{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class vp{constructor(e,t){this.count=e,this.unchangedNames=t}}var _p,wp;function bp(e){switch(e){case mu.OK:return fu();case mu.CANCELLED:case mu.UNKNOWN:case mu.DEADLINE_EXCEEDED:case mu.RESOURCE_EXHAUSTED:case mu.INTERNAL:case mu.UNAVAILABLE:case mu.UNAUTHENTICATED:return!1;case mu.INVALID_ARGUMENT:case mu.NOT_FOUND:case mu.ALREADY_EXISTS:case mu.PERMISSION_DENIED:case mu.FAILED_PRECONDITION:case mu.ABORTED:case mu.OUT_OF_RANGE:case mu.UNIMPLEMENTED:case mu.DATA_LOSS:return!0;default:return fu()}}function Ep(e){if(void 0===e)return uu("GRPC error has no .code"),mu.UNKNOWN;switch(e){case _p.OK:return mu.OK;case _p.CANCELLED:return mu.CANCELLED;case _p.UNKNOWN:return mu.UNKNOWN;case _p.DEADLINE_EXCEEDED:return mu.DEADLINE_EXCEEDED;case _p.RESOURCE_EXHAUSTED:return mu.RESOURCE_EXHAUSTED;case _p.INTERNAL:return mu.INTERNAL;case _p.UNAVAILABLE:return mu.UNAVAILABLE;case _p.UNAUTHENTICATED:return mu.UNAUTHENTICATED;case _p.INVALID_ARGUMENT:return mu.INVALID_ARGUMENT;case _p.NOT_FOUND:return mu.NOT_FOUND;case _p.ALREADY_EXISTS:return mu.ALREADY_EXISTS;case _p.PERMISSION_DENIED:return mu.PERMISSION_DENIED;case _p.FAILED_PRECONDITION:return mu.FAILED_PRECONDITION;case _p.ABORTED:return mu.ABORTED;case _p.OUT_OF_RANGE:return mu.OUT_OF_RANGE;case _p.UNIMPLEMENTED:return mu.UNIMPLEMENTED;case _p.DATA_LOSS:return mu.DATA_LOSS;default:return fu()}}(wp=_p||(_p={}))[wp.OK=0]="OK",wp[wp.CANCELLED=1]="CANCELLED",wp[wp.UNKNOWN=2]="UNKNOWN",wp[wp.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",wp[wp.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",wp[wp.NOT_FOUND=5]="NOT_FOUND",wp[wp.ALREADY_EXISTS=6]="ALREADY_EXISTS",wp[wp.PERMISSION_DENIED=7]="PERMISSION_DENIED",wp[wp.UNAUTHENTICATED=16]="UNAUTHENTICATED",wp[wp.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",wp[wp.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",wp[wp.ABORTED=10]="ABORTED",wp[wp.OUT_OF_RANGE=11]="OUT_OF_RANGE",wp[wp.UNIMPLEMENTED=12]="UNIMPLEMENTED",wp[wp.INTERNAL=13]="INTERNAL",wp[wp.UNAVAILABLE=14]="UNAVAILABLE",wp[wp.DATA_LOSS=15]="DATA_LOSS";let Sp=null;const Cp=new Bc([4294967295,4294967295],0);function Tp(e){const t=xu().encode(e),n=new Hc;return n.update(t),new Uint8Array(n.digest())}function Ip(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Bc([n,r],0),new Bc([i,s],0)]}class kp{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new xp("Invalid padding: ".concat(t));if(n<0)throw new xp("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new xp("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new xp("Invalid padding when bitmap length is 0: ".concat(t));this.Ee=8*e.length-t,this.de=Bc.fromNumber(this.Ee)}Ae(e,t,n){let r=e.add(t.multiply(Bc.fromNumber(n)));return 1===r.compare(Cp)&&(r=new Bc([r.getBits(0),r.getBits(1)],0)),r.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ee)return!1;const t=Tp(e),[n,r]=Ip(t);for(let i=0;i<this.hashCount;i++){const e=this.Ae(n,r,i);if(!this.Re(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new kp(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.Ee)return;const t=Tp(e),[n,r]=Ip(t);for(let i=0;i<this.hashCount;i++){const e=this.Ae(n,r,i);this.Ve(e)}}Ve(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class xp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Np{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Pp.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Np(Fu.min(),r,new Fh(Pu),Tf(),Rf())}}class Pp{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Pp(n,t,Rf(),Rf(),Rf())}}class Op{constructor(e,t,n,r){this.me=e,this.removedTargetIds=t,this.key=n,this.fe=r}}class Dp{constructor(e,t){this.targetId=e,this.ge=t}}class Ap{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Wh.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Rp{constructor(){this.pe=0,this.ye=jp(),this.we=Wh.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return 0!==this.pe}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Rf(),t=Rf(),n=Rf();return this.ye.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:fu()}}),new Pp(this.we,this.Se,e,t,n)}Me(){this.be=!1,this.ye=jp()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,pu(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class Lp{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Tf(),this.$e=Mp(),this.Ue=Mp(),this.Ke=new Fh(Pu)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const n=this.He(t);switch(e.state){case 0:this.Je(t)&&n.Ce(e.resumeToken);break;case 1:n.Be(),n.De||n.Me(),n.Ce(e.resumeToken);break;case 2:n.Be(),n.De||this.removeTarget(t);break;case 3:this.Je(t)&&(n.Le(),n.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),n.Ce(e.resumeToken));break;default:fu()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((e,n)=>{this.Je(n)&&t(n)})}Ze(e){const t=e.targetId,n=e.ge.count,r=this.Xe(t);if(r){const i=r.target;if(sf(i))if(0===n){const e=new Hu(i.path);this.ze(t,e,Od.newNoDocument(e,Fu.min()))}else pu(1===n);else{const r=this.et(t);if(r!==n){const n=this.tt(e),i=n?this.nt(n,e,r):1;if(0!==i){this.Ye(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==Sp||Sp.rt(function(e,t,n,r,i){var s,o,a,l,c,u;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==d?void 0:d.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.ge,this.ke.it(),n,i))}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=Yh(n).toUint8Array()}catch(e){if(e instanceof Hh)return hu("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new kp(s,r,i)}catch(e){return hu(e instanceof xp?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Ee?null:o}nt(e,t,n){return t.ge.count===n-this.st(e,t.targetId)?0:2}st(e,t){const n=this.ke.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.ke.it(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.ze(t,n,null),r++)}),r}ot(e){const t=new Map;this.qe.forEach((n,r)=>{const i=this.Xe(r);if(i){if(n.current&&sf(i.target)){const t=new Hu(i.target.path);this._t(t).has(r)||this.ut(r,t)||this.ze(r,t,Od.newNoDocument(t,e))}n.ve&&(t.set(r,n.Fe()),n.Me())}});let n=Rf();this.Ue.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.Xe(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.Qe.forEach((t,n)=>n.setReadTime(e));const r=new Np(e,t,this.Ke,this.Qe,n);return this.Qe=Tf(),this.$e=Mp(),this.Ue=Mp(),this.Ke=new Fh(Pu),r}Ge(e,t){if(!this.Je(e))return;const n=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,n),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}ze(e,t,n){if(!this.Je(e))return;const r=this.He(e);this.ut(e,t)?r.xe(t,1):r.Oe(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),this.Ue=this.Ue.insert(t,this.ct(t).add(e)),n&&(this.Qe=this.Qe.insert(t,n))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new Rp,this.qe.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new zh(Pu),this.Ue=this.Ue.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new zh(Pu),this.$e=this.$e.insert(e,t)),t}Je(e){const t=null!==this.Xe(e);return t||cu("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new Rp),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function Mp(){return new Fh(Hu.comparator)}function jp(){return new Fh(Hu.comparator)}const Fp={asc:"ASCENDING",desc:"DESCENDING"},Up={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Vp={and:"AND",or:"OR"};class zp{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function qp(e,t){return e.useProto3Json||sh(t)?t:{value:t}}function Bp(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Hp(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Wp(e,t){return Bp(e,t.toTimestamp())}function Gp(e){return pu(!!e),Fu.fromTimestamp(function(e){const t=Kh(e);return new ju(t.seconds,t.nanos)}(e))}function Kp(e,t){return Qp(e,t).canonicalString()}function Qp(e,t){const n=function(e){return new zu(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Yp(e){const t=zu.fromString(e);return pu(gg(t)),t}function $p(e,t){return Kp(e.databaseId,t.path)}function Xp(e,t){const n=Yp(t);if(n.get(1)!==e.databaseId.projectId)throw new yu(mu.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new yu(mu.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Hu(tg(n))}function Jp(e,t){return Kp(e.databaseId,t)}function Zp(e){const t=Yp(e);return 4===t.length?zu.emptyPath():tg(t)}function eg(e){return new zu(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function tg(e){return pu(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function ng(e,t,n){return{name:$p(e,t),fields:n.value.mapValue.fields}}function rg(e,t){let n;if(t instanceof lp)n={update:ng(e,t.key,t.value)};else if(t instanceof fp)n={delete:$p(e,t.key)};else if(t instanceof cp)n={update:ng(e,t.key,t.data),updateMask:pg(t.fieldMask)};else{if(!(t instanceof pp))return fu();n={verify:$p(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Hf)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Wf)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Kf)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Yf)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw fu()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Wp(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:fu()}(e,t.precondition)),n}function ig(e,t){return{documents:[Jp(e,t.path)]}}function sg(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Jp(e,i);const s=function(e){if(0!==e.length)return fg(Ud.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:hg(e.field),direction:lg(e.dir)}}(e))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=qp(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ht:n,parent:i}}function og(e){let t=Zp(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){pu(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=ag(e);return t instanceof Ud&&zd(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map(e=>function(e){return new Ld(dg(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,sh(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Dd(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Dd(n,t)}(n.endAt)),af(t,i,o,s,a,"F",l,c)}function ag(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=dg(e.unaryFilter.field);return Fd.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=dg(e.unaryFilter.field);return Fd.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=dg(e.unaryFilter.field);return Fd.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=dg(e.unaryFilter.field);return Fd.create(i,"!=",{nullValue:"NULL_VALUE"});default:return fu()}}(e):void 0!==e.fieldFilter?function(e){return Fd.create(dg(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return fu()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Ud.create(e.compositeFilter.filters.map(e=>ag(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return fu()}}(e.compositeFilter.op))}(e):fu()}function lg(e){return Fp[e]}function cg(e){return Up[e]}function ug(e){return Vp[e]}function hg(e){return{fieldPath:e.canonicalString()}}function dg(e){return Bu.fromServerFormat(e.fieldPath)}function fg(e){return e instanceof Fd?function(e){if("=="===e.op){if(Cd(e.value))return{unaryFilter:{field:hg(e.field),op:"IS_NAN"}};if(Sd(e.value))return{unaryFilter:{field:hg(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Cd(e.value))return{unaryFilter:{field:hg(e.field),op:"IS_NOT_NAN"}};if(Sd(e.value))return{unaryFilter:{field:hg(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hg(e.field),op:cg(e.op),value:e.value}}}(e):e instanceof Ud?function(e){const t=e.getFilters().map(e=>fg(e));return 1===t.length?t[0]:{compositeFilter:{op:ug(e.op),filters:t}}}(e):fu()}function pg(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function gg(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class mg{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Fu.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Fu.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Wh.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new mg(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new mg(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new mg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new mg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class yg{constructor(e){this.Tt=e}}function vg(e){const t=og({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?gf(t,t.limit,"L"):t}class _g{constructor(){}At(e,t){this.Rt(e,t),t.Vt()}Rt(e,t){if("nullValue"in e)this.ft(t,5);else if("booleanValue"in e)this.ft(t,10),t.gt(e.booleanValue?1:0);else if("integerValue"in e)this.ft(t,15),t.gt(Qh(e.integerValue));else if("doubleValue"in e){const n=Qh(e.doubleValue);isNaN(n)?this.ft(t,13):(this.ft(t,15),oh(n)?t.gt(0):t.gt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.ft(t,20),"string"==typeof n&&(n=Kh(n)),t.yt("".concat(n.seconds||"")),t.gt(n.nanos||0)}else if("stringValue"in e)this.wt(e.stringValue,t),this.St(t);else if("bytesValue"in e)this.ft(t,30),t.bt(Yh(e.bytesValue)),this.St(t);else if("referenceValue"in e)this.Dt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ft(t,45),t.gt(n.latitude||0),t.gt(n.longitude||0)}else"mapValue"in e?xd(e)?this.ft(t,Number.MAX_SAFE_INTEGER):Id(e)?this.vt(e.mapValue,t):(this.Ct(e.mapValue,t),this.St(t)):"arrayValue"in e?(this.Ft(e.arrayValue,t),this.St(t)):fu()}wt(e,t){this.ft(t,25),this.Mt(e,t)}Mt(e,t){t.yt(e)}Ct(e,t){const n=e.fields||{};this.ft(t,55);for(const r of Object.keys(n))this.wt(r,t),this.Rt(n[r],t)}vt(e,t){var n,r;const i=e.fields||{};this.ft(t,53);const s=ud,o=(null===(r=null===(n=i[s].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.ft(t,15),t.gt(Qh(o)),this.wt(s,t),this.Rt(i[s],t)}Ft(e,t){const n=e.values||[];this.ft(t,50);for(const r of n)this.Rt(r,t)}Dt(e,t){this.ft(t,37),Hu.fromName(e).path.forEach(e=>{this.ft(t,60),this.Mt(e,t)})}ft(e,t){e.gt(t)}St(e){e.gt(2)}}_g.xt=new _g;class wg{constructor(){this.Tn=new bg}addToCollectionParentIndex(e,t){return this.Tn.add(t),eh.resolve()}getCollectionParents(e,t){return eh.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return eh.resolve()}deleteFieldIndex(e,t){return eh.resolve()}deleteAllFieldIndexes(e){return eh.resolve()}createTargetIndexes(e,t){return eh.resolve()}getDocumentsMatchingTarget(e,t){return eh.resolve(null)}getIndexType(e,t){return eh.resolve(0)}getFieldIndexes(e,t){return eh.resolve([])}getNextCollectionGroupToUpdate(e){return eh.resolve(null)}getMinOffset(e,t){return eh.resolve(Yu.min())}getMinOffsetFromCollectionGroup(e,t){return eh.resolve(Yu.min())}updateCollectionGroup(e,t,n){return eh.resolve()}updateIndexEntries(e,t){return eh.resolve()}}class bg{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new zh(zu.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new zh(zu.comparator)).toArray()}}new Uint8Array(0);const Eg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Sg=41943040;class Cg{static withCacheSize(e){return new Cg(e,Cg.DEFAULT_COLLECTION_PERCENTILE,Cg.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}Cg.DEFAULT_COLLECTION_PERCENTILE=10,Cg.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cg.DEFAULT=new Cg(Sg,Cg.DEFAULT_COLLECTION_PERCENTILE,Cg.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cg.DISABLED=new Cg(-1,0,0);class Tg{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new Tg(0)}static Kn(){return new Tg(-1)}}const Ig="LruGarbageCollector",kg=1048576;function xg(e,t){let[n,r]=e,[i,s]=t;const o=Pu(n,i);return 0===o?Pu(r,s):o}class Ng{constructor(e){this.Hn=e,this.buffer=new zh(xg),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();xg(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Pg{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Xn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return null!==this.Xn}er(e){cu(Ig,"Garbage collection scheduled in ".concat(e,"ms")),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){nh(e)?cu(Ig,"Ignoring IndexedDB error during garbage collection: ",e):await Zu(e)}await this.er(3e5)})}}class Og{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return eh.resolve(rh.ae);const n=new Ng(t);return this.tr.forEachTarget(e,e=>n.Zn(e.sequenceNumber)).next(()=>this.tr.rr(e,e=>n.Zn(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.tr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(cu("LruGarbageCollector","Garbage collection skipped; disabled"),eh.resolve(Eg)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(cu("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Eg):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let n,r,i,s,o,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(cu("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,o=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),lu()<=Qi.DEBUG&&cu("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),eh.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}function Dg(e,t){return new Og(e,t)}class Ag{constructor(){this.changes=new Sf(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Od.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?eh.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Rg{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Lg{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&sp(n.mutation,e,Bh.empty(),ju.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Rf()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Rf();const r=Nf();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=kf();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=Nf();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Rf()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=Tf();const s=Of(),o=Of();return t.forEach((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof cp)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),sp(o.mutation,t,o.mutation.getFieldMask(),ju.now())):s.set(t.key,Bh.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return o.set(e,new Rg(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),o))}recalculateAndSaveOverlays(e,t){const n=Of();let r=new Fh((e,t)=>e-t),i=Rf();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||Bh.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||Rf()).add(e);r=r.insert(i.batchId,a)})}).next(()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=Pf();l.forEach(e=>{if(!i.has(e)){const r=rp(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return eh.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Hu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):uf(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):eh.resolve(Nf());let o=Wu,a=i;return s.next(t=>eh.forEach(t,(t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?eh.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,a,t,Rf())).next(e=>({batchId:o,changes:xf(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Hu(t)).next(e=>{let t=kf();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=kf();return this.indexManager.getCollectionParents(e,i).next(o=>eh.forEach(o,o=>{const a=function(e,t){return new of(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Od.newInvalidDocument(r)))});let n=kf();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&sp(s.mutation,r,Bh.empty(),ju.now()),_f(t,r)&&(n=n.insert(e,r))}),n})}}class Mg{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return eh.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Gp(e.createTime)}}(t)),eh.resolve()}getNamedQuery(e,t){return eh.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(e){return{name:e.name,query:vg(e.bundledQuery),readTime:Gp(e.readTime)}}(t)),eh.resolve()}}class jg{constructor(){this.overlays=new Fh(Hu.comparator),this.Rr=new Map}getOverlay(e,t){return eh.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Nf();return eh.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.Et(e,t,r)}),eh.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Rr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.Rr.delete(n)),eh.resolve()}getOverlaysForCollection(e,t,n){const r=Nf(),i=t.length+1,s=new Hu(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return eh.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Fh((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Nf(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=Nf(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=r)););return eh.resolve(o)}Et(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Rr.get(r.largestBatchId).delete(n.key);this.Rr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new yp(t,n));let i=this.Rr.get(t);void 0===i&&(i=Rf(),this.Rr.set(t,i)),this.Rr.set(t,i.add(n.key))}}class Fg{constructor(){this.sessionToken=Wh.EMPTY_BYTE_STRING}getSessionToken(e){return eh.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,eh.resolve()}}class Ug{constructor(){this.Vr=new zh(Vg.mr),this.gr=new zh(Vg.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const n=new Vg(e,t);this.Vr=this.Vr.add(n),this.gr=this.gr.add(n)}yr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.wr(new Vg(e,t))}Sr(e,t){e.forEach(e=>this.removeReference(e,t))}br(e){const t=new Hu(new zu([])),n=new Vg(t,e),r=new Vg(t,e+1),i=[];return this.gr.forEachInRange([n,r],e=>{this.wr(e),i.push(e.key)}),i}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new Hu(new zu([])),n=new Vg(t,e),r=new Vg(t,e+1);let i=Rf();return this.gr.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new Vg(e,0),n=this.Vr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Vg{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return Hu.comparator(e.key,t.key)||Pu(e.Cr,t.Cr)}static pr(e,t){return Pu(e.Cr,t.Cr)||Hu.comparator(e.key,t.key)}}class zg{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new zh(Vg.mr)}checkEmpty(e){return eh.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new gp(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.Mr=this.Mr.add(new Vg(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return eh.resolve(s)}lookupMutationBatch(e,t){return eh.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Nr(n),i=r<0?0:r;return eh.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return eh.resolve(0===this.mutationQueue.length?ih:this.Fr-1)}getAllMutationBatches(e){return eh.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Vg(t,0),r=new Vg(t,Number.POSITIVE_INFINITY),i=[];return this.Mr.forEachInRange([n,r],e=>{const t=this.Or(e.Cr);i.push(t)}),eh.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new zh(Pu);return t.forEach(e=>{const t=new Vg(e,0),r=new Vg(e,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([t,r],e=>{n=n.add(e.Cr)})}),eh.resolve(this.Br(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Hu.isDocumentKey(i)||(i=i.child(""));const s=new Vg(new Hu(i),0);let o=new zh(Pu);return this.Mr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Cr)),!0)},s),eh.resolve(this.Br(o))}Br(e){const t=[];return e.forEach(e=>{const n=this.Or(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){pu(0===this.Lr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Mr;return eh.forEach(t.mutations,r=>{const i=new Vg(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Mr=n})}qn(e){}containsKey(e,t){const n=new Vg(t,0),r=this.Mr.firstAfterOrEqual(n);return eh.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,eh.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class qg{constructor(e){this.kr=e,this.docs=new Fh(Hu.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.kr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return eh.resolve(n?n.document.mutableCopy():Od.newInvalidDocument(t))}getEntries(e,t){let n=Tf();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Od.newInvalidDocument(e))}),eh.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Tf();const s=t.path,o=new Hu(s.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||$u(Qu(o),n)<=0||(r.has(o.key)||_f(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return eh.resolve(i)}getAllFromCollectionGroup(e,t,n,r){fu()}qr(e,t){return eh.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Bg(this)}getSize(e){return eh.resolve(this.size)}}class Bg extends Ag{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Ir.addEntry(e,r)):this.Ir.removeEntry(n)}),eh.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}class Hg{constructor(e){this.persistence=e,this.Qr=new Sf(e=>nf(e),rf),this.lastRemoteSnapshotVersion=Fu.min(),this.highestTargetId=0,this.$r=0,this.Ur=new Ug,this.targetCount=0,this.Kr=Tg.Un()}forEachTarget(e,t){return this.Qr.forEach((e,n)=>t(n)),eh.resolve()}getLastRemoteSnapshotVersion(e){return eh.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return eh.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),eh.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.$r&&(this.$r=t),eh.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Kr=new Tg(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,eh.resolve()}updateTargetData(e,t){return this.zn(t),eh.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Ur.br(t.targetId),this.targetCount-=1,eh.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Qr.forEach((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Qr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),eh.waitFor(i).next(()=>r)}getTargetCount(e){return eh.resolve(this.targetCount)}getTargetData(e,t){const n=this.Qr.get(t)||null;return eh.resolve(n)}addMatchingKeys(e,t,n){return this.Ur.yr(t,n),eh.resolve()}removeMatchingKeys(e,t,n){this.Ur.Sr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),eh.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Ur.br(t),eh.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Ur.vr(t);return eh.resolve(n)}containsKey(e,t){return eh.resolve(this.Ur.containsKey(t))}}class Wg{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new rh(0),this.zr=!1,this.zr=!0,this.jr=new Fg,this.referenceDelegate=e(this),this.Hr=new Hg(this),this.indexManager=new wg,this.remoteDocumentCache=function(e){return new qg(e)}(e=>this.referenceDelegate.Jr(e)),this.serializer=new yg(t),this.Yr=new Mg(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new jg,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Wr[e.toKey()];return n||(n=new zg(t,this.referenceDelegate),this.Wr[e.toKey()]=n),n}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,n){cu("MemoryPersistence","Starting transaction:",e);const r=new Gg(this.Gr.next());return this.referenceDelegate.Zr(),n(r).next(e=>this.referenceDelegate.Xr(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}ei(e,t){return eh.or(Object.values(this.Wr).map(n=>()=>n.containsKey(e,t)))}}class Gg extends Ju{constructor(e){super(),this.currentSequenceNumber=e}}class Kg{constructor(e){this.persistence=e,this.ti=new Ug,this.ni=null}static ri(e){return new Kg(e)}get ii(){if(this.ni)return this.ni;throw fu()}addReference(e,t,n){return this.ti.addReference(n,t),this.ii.delete(n.toString()),eh.resolve()}removeReference(e,t,n){return this.ti.removeReference(n,t),this.ii.add(n.toString()),eh.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),eh.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach(e=>this.ii.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.ii.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return eh.forEach(this.ii,n=>{const r=Hu.fromPath(n);return this.si(e,r).next(e=>{e||t.removeEntry(r,Fu.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(e=>{e?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return eh.or([()=>eh.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class Qg{constructor(e,t){this.persistence=e,this.oi=new Sf(e=>ch(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=Dg(this,t)}static ri(e,t){return new Qg(e,t)}Zr(){}Xr(e){return eh.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}sr(e){let t=0;return this.rr(e,e=>{t++}).next(()=>t)}rr(e,t){return eh.forEach(this.oi,(n,r)=>this.ar(e,n,r).next(e=>e?eh.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.qr(e,r=>this.ar(e,r,t).next(e=>{e||(n++,i.removeEntry(r,Fu.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),eh.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.oi.set(n,e.currentSequenceNumber),eh.resolve()}removeReference(e,t,n){return this.oi.set(n,e.currentSequenceNumber),eh.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),eh.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=_d(e.data.value)),t}ar(e,t,n){return eh.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.oi.get(t);return eh.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Yg{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Hi=n,this.Ji=r}static Yi(e,t){let n=Rf(),r=Rf();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Yg(e,t.fromCache,n,r)}}class $g{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Xg{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=wi()?8:th(mi())>0?6:4}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.rs(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ss(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new $g;return this._s(e,t,n).next(r=>{if(i.result=r,this.Xi)return this.us(e,t,n,r.size)})}).next(()=>i.result)}us(e,t,n,r){return n.documentReadCount<this.es?(lu()<=Qi.DEBUG&&cu("QueryEngine","SDK will not create cache indexes for query:",vf(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),eh.resolve()):(lu()<=Qi.DEBUG&&cu("QueryEngine","Query:",vf(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.ts*r?(lu()<=Qi.DEBUG&&cu("QueryEngine","The SDK decides to create cache indexes for query:",vf(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,df(t))):eh.resolve())}rs(e,t){if(cf(t))return eh.resolve(null);let n=df(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=gf(t,null,"F"),n=df(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=Rf(...r);return this.ns.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.cs(t,r);return this.ls(t,s,i,n.readTime)?this.rs(e,gf(t,null,"F")):this.hs(e,s,t,n)}))})))}ss(e,t,n,r){return cf(t)||r.isEqual(Fu.min())?eh.resolve(null):this.ns.getDocuments(e,n).next(i=>{const s=this.cs(t,i);return this.ls(t,s,n,r)?eh.resolve(null):(lu()<=Qi.DEBUG&&cu("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),vf(t)),this.hs(e,s,t,Ku(r,Wu)).next(e=>e))})}cs(e,t){let n=new zh(bf(e));return t.forEach((t,r)=>{_f(e,r)&&(n=n.add(r))}),n}ls(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}_s(e,t,n){return lu()<=Qi.DEBUG&&cu("QueryEngine","Using full collection scan to execute query:",vf(t)),this.ns.getDocumentsMatchingQuery(e,t,Yu.min(),n)}hs(e,t,n,r){return this.ns.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const Jg="LocalStore";class Zg{constructor(e,t,n,r){this.persistence=e,this.Ps=t,this.serializer=r,this.Ts=new Fh(Pu),this.Is=new Sf(e=>nf(e),rf),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(n)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Lg(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function em(e,t,n,r){return new Zg(e,t,n,r)}async function tm(e,t){const n=gu(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.As(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let o=Rf();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next(e=>({Rs:e,removedBatchIds:i,addedBatchIds:s}))})})}function nm(e){const t=gu(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Hr.getLastRemoteSnapshotVersion(e))}function rm(e,t,n){let r=Rf(),i=Rf();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Tf();return n.forEach((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Fu.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):cu(Jg,"Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)}),{Vs:r,fs:i}})}function im(e,t){const n=gu(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=ih),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function sm(e,t){const n=gu(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Hr.getTargetData(e,t).next(i=>i?(r=i,eh.resolve(r)):n.Hr.allocateTargetId(e).next(i=>(r=new mg(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Hr.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ts.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(e.targetId,e),n.Is.set(t,e.targetId)),e})}async function om(e,t,n){const r=gu(e),i=r.Ts.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!nh(e))throw e;cu(Jg,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ts=r.Ts.remove(t),r.Is.delete(i.target)}function am(e,t,n){const r=gu(e);let i=Fu.min(),s=Rf();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=gu(e),i=r.Is.get(n);return void 0!==i?eh.resolve(r.Ts.get(i)):r.Hr.getTargetData(t,n)}(r,e,df(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Ps.getDocumentsMatchingQuery(e,t,n?i:Fu.min(),n?s:Rf())).next(e=>(lm(r,wf(t),e),{documents:e,gs:s})))}function lm(e,t,n){let r=e.Es.get(t)||Fu.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Es.set(t,r)}class cm{constructor(){this.activeTargetIds=Mf()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class um{constructor(){this.ho=new cm,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,n){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new cm,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class hm{To(e){}shutdown(){}}const dm="ConnectivityMonitor";class fm{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){cu(dm,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){cu(dm,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let pm=null;function gm(){return null===pm?pm=268435456+Math.round(2147483648*Math.random()):pm++,"0x"+pm.toString(16)}const mm="RestConnection",ym={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class vm{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo="projects/".concat(n,"/databases/").concat(r),this.wo=this.databaseId.database===id?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}So(e,t,n,r,i){const s=gm(),o=this.bo(e,t.toUriEncodedString());cu(mm,"Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(a,r,i),this.vo(e,o,a,n).then(t=>(cu(mm,"Received RPC '".concat(e,"' ").concat(s,": "),t),t),t=>{throw hu(mm,"RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t})}Co(e,t,n,r,i,s){return this.So(e,t,n,r,i)}Do(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+ou,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}bo(e,t){const n=ym[e];return"".concat(this.po,"/v1/").concat(t,":").concat(n)}terminate(){}}class _m{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}const wm="WebChannelConnection";class bm extends vm{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,n,r){const i=gm();return new Promise((s,o)=>{const a=new Kc;a.setWithCredentials(!0),a.listenOnce(Yc.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case $c.NO_ERROR:const t=a.getResponseJson();cu(wm,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case $c.TIMEOUT:cu(wm,"RPC '".concat(e,"' ").concat(i," timed out")),o(new yu(mu.DEADLINE_EXCEEDED,"Request time out"));break;case $c.HTTP_ERROR:const n=a.getStatus();if(cu(wm,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(mu).indexOf(t)>=0?t:mu.UNKNOWN}(t.status);o(new yu(e,t.message))}else o(new yu(mu.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new yu(mu.UNAVAILABLE,"Connection failed."));break;default:fu()}}finally{cu(wm,"RPC '".concat(e,"' ").concat(i," completed."))}});const l=JSON.stringify(r);cu(wm,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",l,n,15)})}Wo(e,t,n){const r=gm(),i=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=eu(),o=Zc(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");cu(wm,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=s.createWebChannel(c,a);let h=!1,d=!1;const f=new _m({Fo:t=>{d?cu(wm,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(cu(wm,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),cu(wm,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Mo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,Qc.EventType.OPEN,()=>{d||(cu(wm,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.Qo())}),p(u,Qc.EventType.CLOSE,()=>{d||(d=!0,cu(wm,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.Uo())}),p(u,Qc.EventType.ERROR,t=>{d||(d=!0,hu(wm,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.Uo(new yu(mu.UNAVAILABLE,"The operation could not be completed")))}),p(u,Qc.EventType.MESSAGE,t=>{var n;if(!d){const i=t.data[0];pu(!!i);const s=i,o=(null==s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){cu(wm,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=_p[e];if(void 0!==t)return Ep(t)}(t),i=o.message;void 0===n&&(n=mu.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.Uo(new yu(n,i)),u.close()}else cu(wm,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.Ko(i)}}),p(o,Jc.STAT_EVENT,t=>{t.stat===Xc.PROXY?cu(wm,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Xc.NOPROXY&&cu(wm,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.$o()},0),f}}function Em(){return"undefined"!=typeof document?document:null}function Sm(e){return new zp(e,!0)}class Cm{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Ti=e,this.timerId=t,this.Go=n,this.zo=r,this.jo=i,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),n=Math.max(0,Date.now()-this.Yo),r=Math.max(0,t-n);r>0&&cu("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.Ho," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,r,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){null!==this.Jo&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){null!==this.Jo&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}const Tm="PersistentStream";class Im{constructor(e,t,n,r,i,s,o,a){this.Ti=e,this.n_=n,this.r_=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new Cm(e,t)}u_(){return 1===this.state||5===this.state||this.c_()}c_(){return 2===this.state||3===this.state}start(){this.__=0,4!==this.state?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&null===this.s_&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,4!==e?this.a_.reset():t&&t.code===mu.RESOURCE_EXHAUSTED?(uu(t.toString()),uu("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===mu.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.i_===t&&this.V_(n,r)},t=>{e(()=>{const e=new yu(mu.UNKNOWN,"Fetching auth token failed: "+t.message);return this.m_(e)})})}V_(e,t){const n=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{n(()=>this.listener.xo())}),this.stream.No(()=>{n(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(e=>{n(()=>this.m_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.__?this.g_(e):this.onNext(e))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return cu(Tm,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(cu(Tm,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class km extends Im{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:fu()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(pu(void 0===t||"string"==typeof t),Wh.fromBase64String(t||"")):(pu(void 0===t||t instanceof Buffer||t instanceof Uint8Array),Wh.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?mu.UNKNOWN:Ep(e.code);return new yu(t,e.message||"")}(o);n=new Ap(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Xp(e,r.document.name),s=Gp(r.document.updateTime),o=r.document.createTime?Gp(r.document.createTime):Fu.min(),a=new Nd({mapValue:{fields:r.document.fields}}),l=Od.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Op(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Xp(e,r.document),s=r.readTime?Gp(r.readTime):Fu.min(),o=Od.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Op([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Xp(e,r.document),s=r.removedTargetIds||[];n=new Op([],s,i,null)}else{if(!("filter"in t))return fu();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new vp(r,i),o=e.targetId;n=new Dp(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Fu.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Fu.min():t.readTime?Gp(t.readTime):Fu.min()}(e);return this.listener.p_(t,n)}y_(e){const t={};t.database=eg(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=sf(r)?{documents:ig(e,r)}:{query:sg(e,r).ht},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Hp(e,t.resumeToken);const r=qp(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Fu.min())>0){n.readTime=Bp(e,t.snapshotVersion.toTimestamp());const r=qp(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fu()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.I_(t)}w_(e){const t={};t.database=eg(this.serializer),t.removeTarget=e,this.I_(t)}}class xm extends Im{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return pu(!!e.streamToken),this.lastStreamToken=e.streamToken,pu(!e.writeResults||0===e.writeResults.length),this.listener.D_()}onNext(e){pu(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=function(e,t){return e&&e.length>0?(pu(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?Gp(e.updateTime):Gp(t);return n.isEqual(Fu.min())&&(n=Gp(t)),new Zf(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Gp(e.commitTime);return this.listener.v_(n,t)}C_(){const e={};e.database=eg(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>rg(this.serializer,e))};this.I_(t)}}class Nm{}class Pm extends Nm{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.F_=!1}M_(){if(this.F_)throw new yu(mu.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,n,r){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[s,o]=i;return this.connection.So(e,Qp(t,n),r,s,o)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===mu.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new yu(mu.UNKNOWN,e.toString())})}Co(e,t,n,r,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[o,a]=s;return this.connection.Co(e,Qp(t,n),r,o,a,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===mu.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new yu(mu.UNKNOWN,e.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class Om{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){0===this.x_&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){"Online"===this.state?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,"Online"===e&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.N_?(uu(t),this.N_=!1):cu("OnlineStateTracker",t)}Q_(){null!==this.O_&&(this.O_.cancel(),this.O_=null)}}const Dm="RemoteStore";class Am{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=i,this.z_.To(e=>{n.enqueueAndForget(async()=>{qm(this)&&(cu(Dm,"Restarting streams for network reachability change."),await async function(e){const t=gu(e);t.W_.add(4),await Lm(t),t.j_.set("Unknown"),t.W_.delete(4),await Rm(t)}(this))})}),this.j_=new Om(n,r)}}async function Rm(e){if(qm(e))for(const t of e.G_)await t(!0)}async function Lm(e){for(const t of e.G_)await t(!1)}function Mm(e,t){const n=gu(e);n.K_.has(t.targetId)||(n.K_.set(t.targetId,t),zm(n)?Vm(n):ay(n).c_()&&Fm(n,t))}function jm(e,t){const n=gu(e),r=ay(n);n.K_.delete(t),r.c_()&&Um(n,t),0===n.K_.size&&(r.c_()?r.P_():qm(n)&&n.j_.set("Unknown"))}function Fm(e,t){if(e.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Fu.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}ay(e).y_(t)}function Um(e,t){e.H_.Ne(t),ay(e).w_(t)}function Vm(e){e.H_=new Lp({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>e.K_.get(t)||null,it:()=>e.datastore.serializer.databaseId}),ay(e).start(),e.j_.B_()}function zm(e){return qm(e)&&!ay(e).u_()&&e.K_.size>0}function qm(e){return 0===gu(e).W_.size}function Bm(e){e.H_=void 0}async function Hm(e){e.j_.set("Online")}async function Wm(e){e.K_.forEach((t,n)=>{Fm(e,t)})}async function Gm(e,t){Bm(e),zm(e)?(e.j_.q_(t),Vm(e)):e.j_.set("Unknown")}async function Km(e,t,n){if(e.j_.set("Online"),t instanceof Ap&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.K_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.K_.delete(r),e.H_.removeTarget(r))}(e,t)}catch(n){cu(Dm,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Qm(e,n)}else if(t instanceof Op?e.H_.We(t):t instanceof Dp?e.H_.Ze(t):e.H_.je(t),!n.isEqual(Fu.min()))try{const t=await nm(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.H_.ot(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.K_.get(r);i&&e.K_.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.K_.get(t);if(!r)return;e.K_.set(t,r.withResumeToken(Wh.EMPTY_BYTE_STRING,r.snapshotVersion)),Um(e,t);const i=new mg(r.target,t,n,r.sequenceNumber);Fm(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){cu(Dm,"Failed to raise snapshot:",t),await Qm(e,t)}}async function Qm(e,t,n){if(!nh(t))throw t;e.W_.add(1),await Lm(e),e.j_.set("Offline"),n||(n=()=>nm(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{cu(Dm,"Retrying IndexedDB access"),await n(),e.W_.delete(1),await Rm(e)})}function Ym(e,t){return t().catch(n=>Qm(e,n,t))}async function $m(e){const t=gu(e),n=ly(t);let r=t.U_.length>0?t.U_[t.U_.length-1].batchId:ih;for(;Xm(t);)try{const e=await im(t.localStore,r);if(null===e){0===t.U_.length&&n.P_();break}r=e.batchId,Jm(t,e)}catch(e){await Qm(t,e)}Zm(t)&&ey(t)}function Xm(e){return qm(e)&&e.U_.length<10}function Jm(e,t){e.U_.push(t);const n=ly(e);n.c_()&&n.S_&&n.b_(t.mutations)}function Zm(e){return qm(e)&&!ly(e).u_()&&e.U_.length>0}function ey(e){ly(e).start()}async function ty(e){ly(e).C_()}async function ny(e){const t=ly(e);for(const n of e.U_)t.b_(n.mutations)}async function ry(e,t,n){const r=e.U_.shift(),i=mp.from(r,t,n);await Ym(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await $m(e)}async function iy(e,t){t&&ly(e).S_&&await async function(e,t){if(function(e){return bp(e)&&e!==mu.ABORTED}(t.code)){const n=e.U_.shift();ly(e).h_(),await Ym(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await $m(e)}}(e,t),Zm(e)&&ey(e)}async function sy(e,t){const n=gu(e);n.asyncQueue.verifyOperationInProgress(),cu(Dm,"RemoteStore received new credentials");const r=qm(n);n.W_.add(3),await Lm(n),r&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.W_.delete(3),await Rm(n)}async function oy(e,t){const n=gu(e);t?(n.W_.delete(2),await Rm(n)):t||(n.W_.add(2),await Lm(n),n.j_.set("Unknown"))}function ay(e){return e.J_||(e.J_=function(e,t,n){const r=gu(e);return r.M_(),new km(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{xo:Hm.bind(null,e),No:Wm.bind(null,e),Lo:Gm.bind(null,e),p_:Km.bind(null,e)}),e.G_.push(async t=>{t?(e.J_.h_(),zm(e)?Vm(e):e.j_.set("Unknown")):(await e.J_.stop(),Bm(e))})),e.J_}function ly(e){return e.Y_||(e.Y_=function(e,t,n){const r=gu(e);return r.M_(),new xm(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{xo:()=>Promise.resolve(),No:ty.bind(null,e),Lo:iy.bind(null,e),D_:ny.bind(null,e),v_:ry.bind(null,e)}),e.G_.push(async t=>{t?(e.Y_.h_(),await $m(e)):(await e.Y_.stop(),e.U_.length>0&&(cu(Dm,"Stopping write stream with ".concat(e.U_.length," pending writes")),e.U_=[]))})),e.Y_}class cy{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new vu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new cy(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new yu(mu.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function uy(e,t){if(uu("AsyncQueue","".concat(t,": ").concat(e)),nh(e))return new yu(mu.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class hy{static emptySet(e){return new hy(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||Hu.comparator(t.key,n.key):(e,t)=>Hu.comparator(e.key,t.key),this.keyedMap=kf(),this.sortedSet=new Fh(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof hy))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new hy;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class dy{constructor(){this.Z_=new Fh(Hu.comparator)}track(e){const t=e.doc.key,n=this.Z_.get(t);n?0!==e.type&&3===n.type?this.Z_=this.Z_.insert(t,e):3===e.type&&1!==n.type?this.Z_=this.Z_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Z_=this.Z_.remove(t):1===e.type&&2===n.type?this.Z_=this.Z_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):fu():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,n)=>{e.push(n)}),e}}class fy{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new fy(e,t,hy.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class py{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class gy{constructor(){this.queries=my(),this.onlineState="Unknown",this.ia=new Set}terminate(){!function(e,t){const n=gu(e),r=n.queries;n.queries=my(),r.forEach((e,n)=>{for(const r of n.ta)r.onError(t)})}(this,new yu(mu.ABORTED,"Firestore shutting down"))}}function my(){return new Sf(e=>yf(e),mf)}async function yy(e,t){const n=gu(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.na()&&t.ra()&&(r=2):(s=new py,r=t.ra()?0:1);try{switch(r){case 0:s.ea=await n.onListen(i,!0);break;case 1:s.ea=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=uy(e,"Initialization of query '".concat(vf(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.ta.push(t),t.sa(n.onlineState),s.ea&&t.oa(s.ea)&&by(n)}async function vy(e,t){const n=gu(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.ta.indexOf(t);e>=0&&(s.ta.splice(e,1),0===s.ta.length?i=t.ra()?0:1:!s.na()&&t.ra()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function _y(e,t){const n=gu(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.ta)e.oa(i)&&(r=!0);t.ea=i}}r&&by(n)}function wy(e,t,n){const r=gu(e),i=r.queries.get(t);if(i)for(const s of i.ta)s.onError(n);r.queries.delete(t)}function by(e){e.ia.forEach(e=>{e.next()})}var Ey,Sy;(Sy=Ey||(Ey={}))._a="default",Sy.Cache="cache";class Cy{constructor(e,t,n){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=n||{}}oa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new fy(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache)return!0;if(!this.ra())return!0;const n="Offline"!==t;return(!this.options.Ta||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Pa(e){e=fy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==Ey.Cache}}class Ty{constructor(e){this.key=e}}class Iy{constructor(e){this.key=e}}class ky{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Rf(),this.mutatedKeys=Rf(),this.ya=bf(e),this.wa=new hy(this.ya)}get Sa(){return this.fa}ba(e,t){const n=t?t.Da:new dy,r=t?t.wa:this.wa;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=_f(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.va(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.ya(u,a)>0||l&&this.ya(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{wa:s,Da:n,ls:o,mutatedKeys:i}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const s=e.Da.X_();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fu()}};return n(e)-n(t)}(e.type,t.type)||this.ya(e.doc,t.doc)),this.Ca(n),r=null!=r&&r;const o=t&&!r?this.Fa():[],a=0===this.pa.size&&this.current&&!r?1:0,l=a!==this.ga;return this.ga=a,0!==s.length||l?{snapshot:new fy(this.query,e.wa,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ma:o}:{Ma:o}}sa(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({wa:this.wa,Da:new dy,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(e=>this.fa=this.fa.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.fa=this.fa.delete(e)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Rf(),this.wa.forEach(e=>{this.xa(e.key)&&(this.pa=this.pa.add(e.key))});const t=[];return e.forEach(e=>{this.pa.has(e)||t.push(new Iy(e))}),this.pa.forEach(n=>{e.has(n)||t.push(new Ty(n))}),t}Oa(e){this.fa=e.gs,this.pa=Rf();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return fy.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,0===this.ga,this.hasCachedResults)}}const xy="SyncEngine";class Ny{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Py{constructor(e){this.key=e,this.Ba=!1}}class Oy{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.La={},this.ka=new Sf(e=>yf(e),mf),this.qa=new Map,this.Qa=new Set,this.$a=new Fh(Hu.comparator),this.Ua=new Map,this.Ka=new Ug,this.Wa={},this.Ga=new Map,this.za=Tg.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return!0===this.ja}}async function Dy(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Zy(e);let i;const s=r.ka.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Na()):i=await Ry(r,t,n,!0),i}async function Ay(e,t){const n=Zy(e);await Ry(n,t,!0,!1)}async function Ry(e,t,n,r){const i=await sm(e.localStore,df(t)),s=i.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await Ly(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&Mm(e.remoteStore,i),a}async function Ly(e,t,n,r,i){e.Ha=(t,n,r)=>async function(e,t,n,r){let i=t.view.ba(n);i.ls&&(i=await am(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ba(n,i)}));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return Ky(e,t.targetId,a.Ma),a.snapshot}(e,t,n,r);const s=await am(e.localStore,t,!0),o=new ky(t,s.gs),a=o.ba(s.documents),l=Pp.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);Ky(e,n,c.Ma);const u=new Ny(t,n,o);return e.ka.set(t,u),e.qa.has(n)?e.qa.get(n).push(t):e.qa.set(n,[t]),c.snapshot}async function My(e,t,n){const r=gu(e),i=r.ka.get(t),s=r.qa.get(i.targetId);if(s.length>1)return r.qa.set(i.targetId,s.filter(e=>!mf(e,t))),void r.ka.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await om(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&jm(r.remoteStore,i.targetId),Wy(r,i.targetId)}).catch(Zu)):(Wy(r,i.targetId),await om(r.localStore,i.targetId,!0))}async function jy(e,t){const n=gu(e),r=n.ka.get(t),i=n.qa.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),jm(n.remoteStore,r.targetId))}async function Fy(e,t){const n=gu(e);try{const e=await function(e,t){const n=gu(e),r=t.snapshotVersion;let i=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.ds.newChangeBuffer({trackRemovals:!0});i=n.Ts;const o=[];t.targetChanges.forEach((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Hr.removeMatchingKeys(e,s.removedDocuments,a).next(()=>n.Hr.addMatchingKeys(e,s.addedDocuments,a)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(Wh.EMPTY_BYTE_STRING,Fu.min()).withLastLimboFreeSnapshotVersion(Fu.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,s)&&o.push(n.Hr.updateTargetData(e,c))});let a=Tf(),l=Rf();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(rm(e,s,t.documentUpdates).next(e=>{a=e.Vs,l=e.fs})),!r.isEqual(Fu.min())){const t=n.Hr.getLastRemoteSnapshotVersion(e).next(t=>n.Hr.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return eh.waitFor(o).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,l)).next(()=>a)}).then(e=>(n.Ts=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Ua.get(t);r&&(pu(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.Ba=!0:e.modifiedDocuments.size>0?pu(r.Ba):e.removedDocuments.size>0&&(pu(r.Ba),r.Ba=!1))}),await $y(n,e,t)}catch(e){await Zu(e)}}function Uy(e,t,n){const r=gu(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ka.forEach((n,r)=>{const i=r.view.sa(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=gu(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.ta)i.sa(t)&&(r=!0)}),r&&by(n)}(r.eventManager,t),e.length&&r.La.p_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Vy(e,t,n){const r=gu(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Ua.get(t),s=i&&i.key;if(s){let e=new Fh(Hu.comparator);e=e.insert(s,Od.newNoDocument(s,Fu.min()));const n=Rf().add(s),i=new Np(Fu.min(),new Map,new Fh(Pu),e,n);await Fy(r,i),r.$a=r.$a.remove(s),r.Ua.delete(t),Yy(r)}else await om(r.localStore,t,!1).then(()=>Wy(r,t,n)).catch(Zu)}async function zy(e,t){const n=gu(e),r=t.batch.batchId;try{const e=await function(e,t){const n=gu(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.ds.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=eh.resolve();return s.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);pu(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Rf();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);Hy(n,r,null),By(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await $y(n,e)}catch(e){await Zu(e)}}async function qy(e,t,n){const r=gu(e);try{const e=await function(e,t){const n=gu(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(pu(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);Hy(r,t,n),By(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await $y(r,e)}catch(n){await Zu(n)}}function By(e,t){(e.Ga.get(t)||[]).forEach(e=>{e.resolve()}),e.Ga.delete(t)}function Hy(e,t,n){const r=gu(e);let i=r.Wa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Wa[r.currentUser.toKey()]=i}}function Wy(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.qa.get(t))e.ka.delete(r),n&&e.La.Ja(r,n);e.qa.delete(t),e.isPrimaryClient&&e.Ka.br(t).forEach(t=>{e.Ka.containsKey(t)||Gy(e,t)})}function Gy(e,t){e.Qa.delete(t.path.canonicalString());const n=e.$a.get(t);null!==n&&(jm(e.remoteStore,n),e.$a=e.$a.remove(t),e.Ua.delete(n),Yy(e))}function Ky(e,t,n){for(const r of n)r instanceof Ty?(e.Ka.addReference(r.key,t),Qy(e,r)):r instanceof Iy?(cu(xy,"Document no longer in limbo: "+r.key),e.Ka.removeReference(r.key,t),e.Ka.containsKey(r.key)||Gy(e,r.key)):fu()}function Qy(e,t){const n=t.key,r=n.path.canonicalString();e.$a.get(n)||e.Qa.has(r)||(cu(xy,"New document in limbo: "+n),e.Qa.add(r),Yy(e))}function Yy(e){for(;e.Qa.size>0&&e.$a.size<e.maxConcurrentLimboResolutions;){const t=e.Qa.values().next().value;e.Qa.delete(t);const n=new Hu(zu.fromString(t)),r=e.za.next();e.Ua.set(r,new Py(n)),e.$a=e.$a.insert(n,r),Mm(e.remoteStore,new mg(df(lf(n.path)),r,"TargetPurposeLimboResolution",rh.ae))}}async function $y(e,t,n){const r=gu(e),i=[],s=[],o=[];r.ka.isEmpty()||(r.ka.forEach((e,a)=>{o.push(r.Ha(a,t,n).then(e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Yg.Yi(a.targetId,e);s.push(t)}}))}),await Promise.all(o),r.La.p_(i),await async function(e,t){const n=gu(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>eh.forEach(t,t=>eh.forEach(t.Hi,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>eh.forEach(t.Ji,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!nh(e))throw e;cu(Jg,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ts.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ts=n.Ts.insert(e,i)}}}(r.localStore,s))}async function Xy(e,t){const n=gu(e);if(!n.currentUser.isEqual(t)){cu(xy,"User change. New user:",t.toKey());const e=await tm(n.localStore,t);n.currentUser=t,function(e,t){e.Ga.forEach(e=>{e.forEach(e=>{e.reject(new yu(mu.CANCELLED,t))})}),e.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await $y(n,e.Rs)}}function Jy(e,t){const n=gu(e),r=n.Ua.get(t);if(r&&r.Ba)return Rf().add(r.key);{let e=Rf();const r=n.qa.get(t);if(!r)return e;for(const t of r){const r=n.ka.get(t);e=e.unionWith(r.view.Sa)}return e}}function Zy(e){const t=gu(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Fy.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Jy.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Vy.bind(null,t),t.La.p_=_y.bind(null,t.eventManager),t.La.Ja=wy.bind(null,t.eventManager),t}function ev(e){const t=gu(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=zy.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=qy.bind(null,t),t}class tv{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Sm(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return em(this.persistence,new Xg,e.initialUser,this.serializer)}Xa(e){return new Wg(Kg.ri,this.serializer)}Za(e){return new um}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}tv.provider={build:()=>new tv};class nv extends tv{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){pu(this.persistence.referenceDelegate instanceof Qg);const n=this.persistence.referenceDelegate.garbageCollector;return new Pg(n,e.asyncQueue,t)}Xa(e){const t=void 0!==this.cacheSizeBytes?Cg.withCacheSize(this.cacheSizeBytes):Cg.DEFAULT;return new Wg(e=>Qg.ri(e,t),this.serializer)}}class rv{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Uy(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Xy.bind(null,this.syncEngine),await oy(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new gy}createDatastore(e){const t=Sm(e.databaseInfo.databaseId),n=function(e){return new bm(e)}(e.databaseInfo);return function(e,t,n,r){return new Pm(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Am(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>Uy(this.syncEngine,e,0),fm.D()?new fm:new hm)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Oy(e,t,n,r,i,s);return o&&(a.ja=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=gu(e);cu(Dm,"RemoteStore shutting down."),t.W_.add(5),await Lm(t),t.z_.shutdown(),t.j_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}rv.provider={build:()=>new rv};class iv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):uu("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const sv="FirestoreClient";class ov{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=su.UNAUTHENTICATED,this.clientId=Nu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{cu(sv,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(cu(sv,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vu;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(Jt){const n=uy(Jt,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function av(e,t){e.asyncQueue.verifyOperationInProgress(),cu(sv,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await tm(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function lv(e,t){e.asyncQueue.verifyOperationInProgress();const n=await cv(e);cu(sv,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>sy(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>sy(t.remoteStore,n)),e._onlineComponents=t}async function cv(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){cu(sv,"Using user provided OfflineComponentProvider");try{await av(e,e._uninitializedComponentsProvider._offline)}catch(Jt){const n=Jt;if(!function(e){return"FirebaseError"===e.name?e.code===mu.FAILED_PRECONDITION||e.code===mu.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;hu("Error using user provided cache. Falling back to memory cache: "+n),await av(e,new tv)}}else cu(sv,"Using default OfflineComponentProvider"),await av(e,new nv(void 0));return e._offlineComponents}async function uv(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(cu(sv,"Using user provided OnlineComponentProvider"),await lv(e,e._uninitializedComponentsProvider._online)):(cu(sv,"Using default OnlineComponentProvider"),await lv(e,new rv))),e._onlineComponents}function hv(e){return uv(e).then(e=>e.syncEngine)}async function dv(e){const t=await uv(e),n=t.eventManager;return n.onListen=Dy.bind(null,t.syncEngine),n.onUnlisten=My.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Ay.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=jy.bind(null,t.syncEngine),n}function fv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new vu;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new iv({next:a=>{s.su(),t.enqueueAndForget(()=>vy(e,o));const l=a.docs.has(n);!l&&a.fromCache?i.reject(new yu(mu.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&a.fromCache&&r&&"server"===r.source?i.reject(new yu(mu.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:e=>i.reject(e)}),o=new Cy(lf(n.path),s,{includeMetadataChanges:!0,Ta:!0});return yy(e,o)}(await dv(e),e.asyncQueue,t,n,r)),r.promise}function pv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new vu;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new iv({next:n=>{s.su(),t.enqueueAndForget(()=>vy(e,o)),n.fromCache&&"server"===r.source?i.reject(new yu(mu.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new Cy(n,s,{includeMetadataChanges:!0,Ta:!0});return yy(e,o)}(await dv(e),e.asyncQueue,t,n,r)),r.promise}function gv(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const mv=new Map;function yv(e,t,n){if(!n)throw new yu(mu.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function vv(e){if(!Hu.isDocumentKey(e))throw new yu(mu.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function _v(e){if(Hu.isDocumentKey(e))throw new yu(mu.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function wv(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":fu()}function bv(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new yu(mu.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=wv(e);throw new yu(mu.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function Ev(e,t){if(t<=0)throw new yu(mu.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}const Sv="firestore.googleapis.com",Cv=!0;class Tv{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new yu(mu.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Sv,this.ssl=Cv}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:Cv;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=Sg;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<kg)throw new yu(mu.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new yu(mu.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gv(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new yu(mu.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new yu(mu.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new yu(mu.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Iv{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Tv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new yu(mu.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new yu(mu.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Tv(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new wu;switch(e.type){case"firstParty":return new Cu(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new yu(mu.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=mv.get(e);t&&(cu("ComponentProvider","Removing Datastore"),mv.delete(e),t.terminate())}(this),Promise.resolve()}}class kv{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new kv(this.firestore,e,this._query)}}class xv{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Nv(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xv(this.firestore,e,this._key)}}class Nv extends kv{constructor(e,t,n){super(e,t,lf(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xv(this.firestore,null,new Hu(e))}withConverter(e){return new Nv(this.firestore,e,this._path)}}function Pv(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=qi(e),yv("collection","path",t),e instanceof Iv){const n=zu.fromString(t,...r);return _v(n),new Nv(e,null,n)}{if(!(e instanceof xv||e instanceof Nv))throw new yu(mu.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(zu.fromString(t,...r));return _v(n),new Nv(e.firestore,null,n)}}function Ov(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=qi(e),1===arguments.length&&(t=Nu.newId()),yv("doc","path",t),e instanceof Iv){const n=zu.fromString(t,...r);return vv(n),new xv(e,null,new Hu(n))}{if(!(e instanceof xv||e instanceof Nv))throw new yu(mu.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(zu.fromString(t,...r));return vv(n),new xv(e.firestore,e instanceof Nv?e.converter:null,new Hu(n))}}const Dv="AsyncQueue";class Av{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new Cm(this,"async_queue_retry"),this.Su=()=>{const e=Em();e&&cu(Dv,"Visibility state changed to "+e.visibilityState),this.a_.t_()},this.bu=e;const t=Em();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=Em();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new vu;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(0!==this.Vu.length){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(sk){if(!nh(sk))throw sk;cu(Dv,"Operation failed with retryable error: "+sk)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.bu.then(()=>(this.pu=!0,e().catch(e=>{this.gu=e,this.pu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw uu("INTERNAL UNHANDLED ERROR: ",t),e}).then(e=>(this.pu=!1,e))));return this.bu=t,t}enqueueAfterDelay(e,t,n){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const r=cy.createAndSchedule(this,e,t,n,e=>this.Fu(e));return this.fu.push(r),r}Du(){this.gu&&fu()}verifyOperationInProgress(){}async Mu(){let e;do{e=this.bu,await e}while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}class Rv extends Iv{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Av,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Av(e),this._firestoreClient=void 0,await e}}}function Lv(e){if(e._terminated)throw new yu(mu.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Mv(e),e._firestoreClient}function Mv(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new rd(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,gv(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new ov(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class jv{constructor(e){this._byteString=e}static fromBase64String(e){try{return new jv(Wh.fromBase64String(e))}catch(e){throw new yu(mu.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new jv(Wh.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Fv{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new yu(mu.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bu(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Uv{constructor(e){this._methodName=e}}class Vv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new yu(mu.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new yu(mu.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Pu(this._lat,e._lat)||Pu(this._long,e._long)}}class zv{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const qv=/^__.*__$/;class Bv{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new cp(e,this.data,this.fieldMask,t,this.fieldTransforms):new lp(e,this.data,t,this.fieldTransforms)}}class Hv{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new cp(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Wv(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fu()}}class Gv{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Bu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Gv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ku({path:n,Qu:!1});return r.$u(e),r}Uu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ku({path:n,Qu:!1});return r.Bu(),r}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return l_(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(0===e.length)throw this.Wu("Document fields must not be empty");if(Wv(this.Lu)&&qv.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class Kv{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Sm(e)}ju(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Gv({Lu:e,methodName:t,zu:n,path:Bu.emptyPath(),Qu:!1,Gu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Qv(e){const t=e._freezeSettings(),n=Sm(e._databaseId);return new Kv(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Yv(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.ju(s.merge||s.mergeFields?2:0,t,n,i);i_("Data must be an object, but it was:",o,r);const a=n_(r,o);let l,c;if(s.merge)l=new Bh(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=s_(t,r,n);if(!o.contains(i))throw new yu(mu.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));c_(e,i)||e.push(i)}l=new Bh(e),c=o.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=o.fieldTransforms;return new Bv(new Nd(a),l,c)}class $v extends Uv{_toFieldTransform(e){if(2!==e.Lu)throw 1===e.Lu?e.Wu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Wu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $v}}class Xv extends Uv{_toFieldTransform(e){return new Jf(e.path,new Hf)}isEqual(e){return e instanceof Xv}}function Jv(e,t,n,r){const i=e.ju(1,t,n);i_("Data must be an object, but it was:",i,r);const s=[],o=Nd.empty();Mh(r,(e,r)=>{const a=a_(t,e,n);r=qi(r);const l=i.Uu(a);if(r instanceof $v)s.push(a);else{const e=t_(r,l);null!=e&&(s.push(a),o.set(a,e))}});const a=new Bh(s);return new Hv(o,a,i.fieldTransforms)}function Zv(e,t,n,r,i,s){const o=e.ju(1,t,n),a=[s_(t,r,n)],l=[i];if(s.length%2!=0)throw new yu(mu.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(s_(t,s[d])),l.push(s[d+1]);const c=[],u=Nd.empty();for(let d=a.length-1;d>=0;--d)if(!c_(c,a[d])){const e=a[d];let t=l[d];t=qi(t);const n=o.Uu(e);if(t instanceof $v)c.push(e);else{const r=t_(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new Bh(c);return new Hv(u,h,o.fieldTransforms)}function e_(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t_(n,e.ju(r?4:3,t))}function t_(e,t){if(r_(e=qi(e)))return i_("Unsupported field value:",t,e),n_(e,t);if(e instanceof Uv)return function(e,t){if(!Wv(t.Lu))throw t.Wu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Wu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Qu&&4!==t.Lu)throw t.Wu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=t_(i,t.Ku(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=qi(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Uf(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ju.fromDate(e);return{timestampValue:Bp(t.serializer,n)}}if(e instanceof ju){const n=new ju(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Bp(t.serializer,n)}}if(e instanceof Vv)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof jv)return{bytesValue:Hp(t.serializer,e._byteString)};if(e instanceof xv){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Wu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Kp(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof zv)return function(e,t){return{mapValue:{fields:{[od]:{stringValue:cd},[ud]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Wu("VectorValues must only contain numeric values.");return jf(t.serializer,e)})}}}}}}(e,t);throw t.Wu("Unsupported field value: ".concat(wv(e)))}(e,t)}function n_(e,t){const n={};return jh(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Mh(e,(e,r)=>{const i=t_(r,t.qu(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function r_(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ju||e instanceof Vv||e instanceof jv||e instanceof xv||e instanceof Uv||e instanceof zv)}function i_(e,t,n){if(!r_(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=wv(n);throw"an object"===r?t.Wu(e+" a custom object"):t.Wu(e+" "+r)}}function s_(e,t,n){if((t=qi(t))instanceof Fv)return t._internalPath;if("string"==typeof t)return a_(e,t);throw l_("Field path arguments must be of type string or ",e,!1,void 0,n)}const o_=new RegExp("[~\\*/\\[\\]]");function a_(e,t,n){if(t.search(o_)>=0)throw l_("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Fv(...t.split("."))._internalPath}catch(r){throw l_("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function l_(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new yu(mu.INVALID_ARGUMENT,a+e+l)}function c_(e,t){return e.some(e=>e.isEqual(t))}class u_{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new xv(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new h_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(d_("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class h_ extends u_{data(){return super.data()}}function d_(e,t){return"string"==typeof t?a_(e,t):t instanceof Fv?t._internalPath:t._delegate._internalPath}function f_(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new yu(mu.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class p_{}class g_ extends p_{}function m_(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof p_&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof __).length,n=e.filter(e=>e instanceof y_).length;if(t>1||t>0&&n>0)throw new yu(mu.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class y_ extends g_{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new y_(e,t,n)}_apply(e){const t=this._parse(e);return I_(e._query,t),new kv(e.firestore,e.converter,pf(e._query,t))}_parse(e){const t=Qv(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new yu(mu.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){T_(o,s);const t=[];for(const n of o)t.push(C_(r,e,n));a={arrayValue:{values:t}}}else a=C_(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||T_(o,s),a=e_(n,t,o,"in"===s||"not-in"===s);return Fd.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function v_(e,t,n){const r=t,i=d_("where",e);return y_._create(i,r,n)}class __ extends p_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new __(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:Ud.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)I_(n,i),n=pf(n,i)}(e._query,t),new kv(e.firestore,e.converter,pf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class w_ extends g_{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new w_(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new yu(mu.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new yu(mu.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ld(t,n)}(e._query,this._field,this._direction);return new kv(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new of(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function b_(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=d_("orderBy",e);return w_._create(n,t)}class E_ extends g_{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new E_(e,t,n)}_apply(e){return new kv(e.firestore,e.converter,gf(e._query,this._limit,this._limitType))}}function S_(e){return Ev("limit",e),E_._create("limit",e,"F")}function C_(e,t,n){if("string"==typeof(n=qi(n))){if(""===n)throw new yu(mu.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!uf(t)&&-1!==n.indexOf("/"))throw new yu(mu.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(zu.fromString(n));if(!Hu.isDocumentKey(r))throw new yu(mu.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return wd(e,new Hu(r))}if(n instanceof xv)return wd(e,n._key);throw new yu(mu.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(wv(n),"."))}function T_(e,t){if(!Array.isArray(e)||0===e.length)throw new yu(mu.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function I_(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new yu(mu.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new yu(mu.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class k_{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(hd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qh(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Yh(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw fu()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Mh(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t[ud].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(e=>Qh(e.doubleValue));return new zv(i)}convertGeoPoint(e){return new Vv(Qh(e.latitude),Qh(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=td(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(nd(e));default:return null}}convertTimestamp(e){const t=Kh(e);return new ju(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=zu.fromString(e);pu(gg(n));const r=new sd(n.get(1),n.get(3)),i=new Hu(n.popFirst(5));return r.isEqual(t)||uu("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function x_(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class N_{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class P_ extends u_{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new O_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(d_("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class O_ extends P_{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class D_{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new N_(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new O_(this._firestore,this._userDataWriter,n.key,n,new N_(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new yu(mu.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new O_(e._firestore,e._userDataWriter,n.doc.key,n.doc,new N_(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new O_(e._firestore,e._userDataWriter,t.doc.key,t.doc,new N_(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:A_(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function A_(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fu()}}function R_(e){e=bv(e,xv);const t=bv(e.firestore,Rv);return fv(Lv(t),e._key).then(n=>V_(t,e,n))}class L_ extends k_{constructor(e){super(),this.firestore=e}convertBytes(e){return new jv(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xv(this.firestore,null,t)}}function M_(e){e=bv(e,kv);const t=bv(e.firestore,Rv),n=Lv(t),r=new L_(t);return f_(e._query),pv(n,e._query).then(n=>new D_(t,r,e,n))}function j_(e,t,n){e=bv(e,xv);const r=bv(e.firestore,Rv),i=x_(e.converter,t,n);return U_(r,[Yv(Qv(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,ep.none())])}function F_(e,t){const n=bv(e.firestore,Rv),r=Ov(e),i=x_(e.converter,t);return U_(n,[Yv(Qv(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,ep.exists(!1))]).then(()=>r)}function U_(e,t){return function(e,t){const n=new vu;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=ev(e);try{const e=await function(e,t){const n=gu(e),r=ju.now(),i=t.reduce((e,t)=>e.add(t.key),Rf());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=Tf(),l=Rf();return n.ds.getEntries(e,i).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(i=>{s=i;const o=[];for(const e of t){const t=op(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new cp(e.key,t,Pd(t.value.mapValue),ep.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)}).next(t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:o.batchId,changes:xf(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Wa[e.currentUser.toKey()];r||(r=new Fh(Pu)),r=r.insert(t,n),e.Wa[e.currentUser.toKey()]=r}(r,e.batchId,n),await $y(r,e.changes),await $m(r.remoteStore)}catch(e){const t=uy(e,"Failed to persist write");n.reject(t)}}(await hv(e),t,n)),n.promise}(Lv(e),t)}function V_(e,t,n){const r=n.docs.get(t._key),i=new L_(e);return new P_(e,i,t._key,r,new N_(n.hasPendingWrites,n.fromCache),t.converter)}function z_(){return new Xv("serverTimestamp")}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){ou=e}(lo),ro(new Bi("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new Rv(new Eu(e.getProvider("auth-internal")),new Iu(s,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new yu(mu.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sd(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),ho(ru,iu,e),ho(ru,iu,"esm2017")}();const q_="@firebase/database",B_="1.0.14";let H_="";function W_(e){H_=e}class G_{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Ii(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Ti(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class K_{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return xi(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Q_=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new G_(t)}}catch(sk){}return new K_},Y_=Q_("localStorage"),$_=Q_("sessionStorage"),X_=new Zi("@firebase/database"),J_=function(){let e=1;return function(){return e++}}(),Z_=function(e){const t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const t=i-55296;r++,Xr(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(t<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new ji;n.update(t);const r=n.digest();return ei.encodeByteArray(r)},ew=function(){let e="";for(let t=0;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];Array.isArray(n)||n&&"object"===typeof n&&"number"===typeof n.length?e+=ew.apply(null,n):e+="object"===typeof n?Ii(n):n,e+=" "}return e};let tw=null,nw=!0;const rw=function(e,t){Xr(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(X_.logLevel=Qi.VERBOSE,tw=X_.log.bind(X_),t&&$_.set("logging_enabled",!0)):"function"===typeof e?tw=e:(tw=null,$_.remove("logging_enabled"))},iw=function(){if(!0===nw&&(nw=!1,null===tw&&!0===$_.get("logging_enabled")&&rw(!0)),tw){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=ew.apply(null,t);tw(r)}},sw=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];iw(e,...n)}},ow=function(){const e="FIREBASE INTERNAL ERROR: "+ew(...arguments);X_.error(e)},aw=function(){const e="FIREBASE FATAL ERROR: ".concat(ew(...arguments));throw X_.error(e),new Error(e)},lw=function(){const e="FIREBASE WARNING: "+ew(...arguments);X_.warn(e)},cw=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},uw="[MIN_NAME]",hw="[MAX_NAME]",dw=function(e,t){if(e===t)return 0;if(e===uw||t===hw)return-1;if(t===uw||e===hw)return 1;{const n=ww(e),r=ww(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},fw=function(e,t){return e===t?0:e<t?-1:1},pw=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Ii(t))},gw=function(e){if("object"!==typeof e||null===e)return Ii(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=Ii(t[r]),n+=":",n+=gw(e[t[r]]);return n+="}",n},mw=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function yw(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const vw=function(e){Xr(!cw(e),"Invalid JSON number");const t=1023;let n,r,i,s,o;0===e?(r=0,i=0,n=1/e===-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(s=Math.min(Math.floor(Math.log(e)/Math.LN2),t),r=s+t,i=Math.round(e*Math.pow(2,52-s)-Math.pow(2,52))):(r=0,i=Math.round(e/Math.pow(2,-1074))));const a=[];for(o=52;o;o-=1)a.push(i%2?1:0),i=Math.floor(i/2);for(o=11;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);a.push(n?1:0),a.reverse();const l=a.join("");let c="";for(o=0;o<64;o+=8){let e=parseInt(l.substr(o,8),2).toString(16);1===e.length&&(e="0"+e),c+=e}return c.toLowerCase()};const _w=new RegExp("^-?(0*)\\d{1,10}$"),ww=function(e){if(_w.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},bw=function(e){try{e()}catch(sk){setTimeout(()=>{const t=sk.stack||"";throw lw("Exception was thrown by user callback.",t),sk},Math.floor(0))}},Ew=function(e,t){const n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n};class Sw{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,so(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then(e=>this.appCheck=e)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,n)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(t=>t.addTokenListener(e))}notifyForInvalidToken(){lw('Provided AppCheck credentials for the app named "'.concat(this.appName,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}class Cw{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(e=>this.auth_=e)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(e=>e&&"auth/token-not-initialized"===e.code?(iw("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((t,n)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',lw(e)}}class Tw{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Tw.OWNER="owner";const Iw="5",kw=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,xw="ac",Nw="websocket",Pw="long_polling";class Ow{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=s,this.includeNamespaceInQueryParams=o,this.isUsingEmulator=a,this.emulatorOptions=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Y_.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Y_.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}function Dw(e,t,n){let r;if(Xr("string"===typeof t,"typeof type must == string"),Xr("object"===typeof n,"typeof params must == object"),t===Nw)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==Pw)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return yw(n,(e,t)=>{i.push(e+"="+t)}),r+i.join("&")}class Aw{constructor(){this.counters_={}}incrementCounter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;xi(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return si(this.counters_)}}const Rw={},Lw={};function Mw(e){const t=e.toString();return Rw[t]||(Rw[t]=new Aw),Rw[t]}class jw{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&bw(()=>{this.onMessage_(e[t])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const Fw="start";class Uw{constructor(e,t,n,r,i,s,o){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=s,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=sw(e),this.stats_=Mw(t),this.urlFn=e=>(this.appCheckToken&&(e[xw]=this.appCheckToken),Dw(t,Pw,e))}open(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new jw(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(e){if(_i()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Vw(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s,o,a,l]=t;if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===Fw)n.id=s,n.password=o;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,()=>{n.onClosed_()})):n.onClosed_()}},function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s]=t;n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,s)},()=>{this.onClosed_()},this.urlFn);const e={};e[Fw]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=Iw,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[xw]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&kw.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Uw.forceAllow_=!0}static forceDisallow(){Uw.forceDisallow_=!0}static isAvailable(){return!_i()&&(!!Uw.forceAllow_||!Uw.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=Ii(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=ni(t),r=mw(n,1840);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(_i())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=Ii(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Vw{constructor(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,_i())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=J_(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Vw.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){n='<script>document.domain="'+document.domain+'";<\/script>'}const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(sk){iw("frame writing exception"),sk.stack&&iw(sk.stack),iw(sk)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||iw("No IE domain setting required")}catch(sk){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(r),n()})}addTag(e,t){_i()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{iw("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(sk){}},Math.floor(1))}}let zw=null;"undefined"!==typeof MozWebSocket?zw=MozWebSocket:"undefined"!==typeof WebSocket&&(zw=WebSocket);class qw{constructor(e,t,n,r,i,s,o){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=sw(this.connId),this.stats_=Mw(t),this.connURL=qw.connectionURL_(t,s,o,r,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r,i){const s={};return s.v=Iw,!_i()&&"undefined"!==typeof location&&location.hostname&&kw.test(location.hostname)&&(s.r="f"),t&&(s.s=t),n&&(s.ls=n),r&&(s[xw]=r),i&&(s.p=i),Dw(e,Nw,s)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Y_.set("previous_websocket_failure",!0);try{let e;if(_i()){const t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":"Firebase/".concat(Iw,"/").concat(H_,"/").concat(process.platform,"/").concat(t),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyAOZkZ8FGkHv6J4xD-yckuKOasuO4zEF2c",REACT_APP_FIREBASE_APP_ID:"1:37869262835:web:9d463c1b217727d88e6486",REACT_APP_FIREBASE_AUTH_DOMAIN:"sortly-1b701.firebaseapp.com",REACT_APP_FIREBASE_DATABASE_URL:"https://sortly-1b701-default-rtdb.europe-west1.firebasedatabase.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"37869262835",REACT_APP_FIREBASE_PROJECT_ID:"sortly-1b701",REACT_APP_FIREBASE_STORAGE_BUCKET:"sortly-1b701.firebasestorage.app"},r=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;r&&(e.proxy={origin:r})}this.mySock=new zw(this.connURL,[],e)}catch(sk){this.log_("Error instantiating WebSocket.");const t=sk.message||sk.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){qw.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==zw&&!qw.forceDisallow_}static previouslyFailed(){return Y_.isInMemoryStorage||!0===Y_.get("previous_websocket_failure")}markConnectionHealthy(){Y_.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=Ti(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Xr(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=Ii(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=mw(t,16384);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(sk){this.log_("Exception thrown from WebSocket.send():",sk.message||sk.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}qw.responsesRequiredToBeHealthy=2,qw.healthyTimeout=3e4;class Bw{static get ALL_TRANSPORTS(){return[Uw,qw]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=qw&&qw.isAvailable();let n=t&&!qw.previouslyFailed();if(e.webSocketOnly&&(t||lw("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[qw];else{const e=this.transports_=[];for(const t of Bw.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);Bw.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Bw.globalTransportInitialized_=!1;class Hw{constructor(e,t,n,r,i,s,o,a,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=s,this.onReady_=o,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=sw("c:"+this.id+":"),this.transportManager_=new Bw(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,n)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Ew(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=pw("t",e),n=pw("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=pw("t",e),n=pw("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=pw("t",e);if("d"in e){const n=e.d;if("h"===t){const e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?ow("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ow("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Iw!==n&&lw("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),Ew(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ew(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Y_.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Ww{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class Gw{constructor(e){this.allowedEvents_=e,this.listeners_={},Xr(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let e=0;e<i.length;e++)i[e].callback.apply(i[e].context,n)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}validateEventType_(e){Xr(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class Kw extends Gw{static getInstance(){return new Kw}constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||yi()||(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return Xr("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Qw{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Yw(){return new Qw("")}function $w(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Xw(e){return e.pieces_.length-e.pieceNum_}function Jw(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new Qw(e.pieces_,t)}function Zw(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function eb(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function tb(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Qw(t,0)}function nb(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof Qw)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new Qw(n,0)}function rb(e){return e.pieceNum_>=e.pieces_.length}function ib(e,t){const n=$w(e),r=$w(t);if(null===n)return t;if(n===r)return ib(Jw(e),Jw(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function sb(e,t){const n=eb(e,0),r=eb(t,0);for(let i=0;i<n.length&&i<r.length;i++){const e=dw(n[i],r[i]);if(0!==e)return e}return n.length===r.length?0:n.length<r.length?-1:1}function ob(e,t){if(Xw(e)!==Xw(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function ab(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(Xw(e)>Xw(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class lb{constructor(e,t){this.errorPrefix_=t,this.parts_=eb(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=zi(this.parts_[n]);cb(this)}}function cb(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+ub(e))}function ub(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class hb extends Gw{static getInstance(){return new hb}constructor(){let e,t;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))},!1)}getInitialEvent(e){return Xr("visible"===e,"Unknown event type: "+e),[this.visible_]}}const db=1e3;class fb extends Ww{constructor(e,t,n,r,i,s,o,a){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=s,this.appCheckTokenProvider_=o,this.authOverride_=a,this.id=fb.nextPersistentConnectionId_++,this.log_=sw("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=db,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a&&!_i())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");hb.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&Kw.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(Ii(i)),Xr(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new pi,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,r){this.initConnection_();const i=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),Xr(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Xr(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");const o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(s).set(i,o),this.connected_&&this.sendListen_(o)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)})}sendListen_(e){const t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,i=>{const s=i.d,o=i.s;fb.warnOnListenWarnings_(s,t);(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",i),"ok"!==o&&this.removeListen_(n,r),e.onComplete&&e.onComplete(o,s))})}static warnOnListenWarnings_(e,t){if(e&&"object"===typeof e&&xi(e,"w")){const n=Ni(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();lw("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(e," at ")+"".concat(n," to your security rules for better performance."))}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=ki(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=ki(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"===typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)})}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Xr(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,e=>{r&&setTimeout(()=>{r(e.s,e.d)},Math.floor(0))})}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const s={p:t,d:n};void 0!==i&&(s.h=i),this.outstandingPuts_.push({action:e,request:s,onComplete:r}),this.outstandingPutCount_++;const o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Ii(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):ow("Unrecognized action received from server: "+Ii(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Xr(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=db,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=db,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=db),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=Math.max(0,(new Date).getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+fb.nextConnectionId_++,i=this.lastSessionId;let s=!1,o=null;const a=function(){o?o.close():(s=!0,n())},l=function(e){Xr(o,"sendRequest call when we're not connected not allowed."),o.sendRequest(e)};this.realtime_={close:a,sendRequest:l};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[a,l]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);s?iw("getToken() completed but was canceled"):(iw("getToken() completed. Creating connection."),this.authToken_=a&&a.accessToken,this.appCheckToken_=l&&l.token,o=new Hw(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,e=>{lw(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")},i))}catch(ow){this.log_("Failed to get token: "+ow),s||(this.repoInfo_.nodeAdmin&&lw(ow),a())}}}interrupt(e){iw("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){iw("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Pi(this.interruptReasons_)&&(this.reconnectDelay_=db,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map(e=>gw(e)).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new Qw(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){iw("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){iw("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";_i()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+H_.replace(/\./g,"-")]=1,yi()?e["framework.cordova"]=1:vi()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Kw.getInstance().currentlyOnline();return Pi(this.interruptReasons_)&&e}}fb.nextPersistentConnectionId_=0,fb.nextConnectionId_=0;class pb{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new pb(e,t)}}class gb{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new pb(uw,e),r=new pb(uw,t);return 0!==this.compare(n,r)}minPost(){return pb.MIN}}let mb;class yb extends gb{static get __EMPTY_NODE(){return mb}static set __EMPTY_NODE(e){mb=e}compare(e,t){return dw(e.name,t.name)}isDefinedOn(e){throw Jr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return pb.MIN}maxPost(){return new pb(hw,mb)}makePost(e,t){return Xr("string"===typeof e,"KeyIndex indexValue must always be a string."),new pb(e,mb)}toString(){return".key"}}const vb=new yb;class _b{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,r&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class wb{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:wb.RED,this.left=null!=r?r:bb.EMPTY_NODE,this.right=null!=i?i:bb.EMPTY_NODE}copy(e,t,n,r,i){return new wb(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return bb.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return bb.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,wb.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,wb.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}wb.RED=!0,wb.BLACK=!1;class bb{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bb.EMPTY_NODE;this.comparator_=e,this.root_=t}insert(e,t){return new bb(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,wb.BLACK,null,null))}remove(e){return new bb(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,wb.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new _b(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new _b(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new _b(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new _b(this.root_,null,this.comparator_,!0,e)}}function Eb(e,t){return dw(e.name,t.name)}function Sb(e,t){return dw(e,t)}let Cb;bb.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new wb(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Tb=function(e){return"number"===typeof e?"number:"+vw(e):"string:"+e},Ib=function(e){if(e.isLeafNode()){const t=e.val();Xr("string"===typeof t||"number"===typeof t||"object"===typeof t&&xi(t,".sv"),"Priority must be a string or number.")}else Xr(e===Cb||e.isEmpty(),"priority of unexpected type.");Xr(e===Cb||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let kb,xb,Nb;class Pb{static set __childrenNodeConstructor(e){kb=e}static get __childrenNodeConstructor(){return kb}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pb.__childrenNodeConstructor.EMPTY_NODE;this.value_=e,this.priorityNode_=t,this.lazyHash_=null,Xr(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Ib(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Pb(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:Pb.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return rb(e)?this:".priority"===$w(e)?this.priorityNode_:Pb.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:Pb.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=$w(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(Xr(".priority"!==n||1===Xw(e),".priority must be the last token in a path"),this.updateImmediateChild(n,Pb.__childrenNodeConstructor.EMPTY_NODE.updateChild(Jw(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Tb(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?vw(this.value_):this.value_,this.lazyHash_=Z_(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Pb.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Pb.__childrenNodeConstructor?-1:(Xr(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,r=Pb.VALUE_TYPE_ORDER.indexOf(t),i=Pb.VALUE_TYPE_ORDER.indexOf(n);return Xr(r>=0,"Unknown leaf type: "+t),Xr(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}Pb.VALUE_TYPE_ORDER=["object","boolean","number","string"];const Ob=new class extends gb{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?dw(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return pb.MIN}maxPost(){return new pb(hw,new Pb("[PRIORITY-POST]",Nb))}makePost(e,t){const n=xb(e);return new pb(t,new Pb("[PRIORITY-POST]",n))}toString(){return".priority"}},Db=Math.log(2);class Ab{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/Db,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Rb=function(e,t,n,r){e.sort(t);const i=function(t,r){const s=r-t;let o,a;if(0===s)return null;if(1===s)return o=e[t],a=n?n(o):o,new wb(a,o.node,wb.BLACK,null,null);{const l=parseInt(s/2,10)+t,c=i(t,l),u=i(l+1,r);return o=e[l],a=n?n(o):o,new wb(a,o.node,wb.BLACK,c,u)}},s=function(t){let r=null,s=null,o=e.length;const a=function(t,r){const s=o-t,a=o;o-=t;const c=i(s+1,a),u=e[s],h=n?n(u):u;l(new wb(h,u.node,r,null,c))},l=function(e){r?(r.left=e,r=e):(s=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?a(r,wb.BLACK):(a(r,wb.BLACK),a(r,wb.RED))}return s}(new Ab(e.length));return new bb(r||t,s)};let Lb;const Mb={};class jb{static get Default(){return Xr(Mb&&Ob,"ChildrenNode.ts has not been loaded"),Lb=Lb||new jb({".priority":Mb},{".priority":Ob}),Lb}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=Ni(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof bb?t:null}hasIndex(e){return xi(this.indexSet_,e.toString())}addIndex(e,t){Xr(e!==vb,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=t.getIterator(pb.Wrap);let s,o=i.getNext();for(;o;)r=r||e.isDefinedOn(o.node),n.push(o),o=i.getNext();s=r?Rb(n,e.getCompare()):Mb;const a=e.toString(),l=Object.assign({},this.indexSet_);l[a]=e;const c=Object.assign({},this.indexes_);return c[a]=s,new jb(c,l)}addToIndexes(e,t){const n=Oi(this.indexes_,(n,r)=>{const i=Ni(this.indexSet_,r);if(Xr(i,"Missing index implementation for "+r),n===Mb){if(i.isDefinedOn(e.node)){const n=[],r=t.getIterator(pb.Wrap);let s=r.getNext();for(;s;)s.name!==e.name&&n.push(s),s=r.getNext();return n.push(e),Rb(n,i.getCompare())}return Mb}{const r=t.get(e.name);let i=n;return r&&(i=i.remove(new pb(e.name,r))),i.insert(e,e.node)}});return new jb(n,this.indexSet_)}removeFromIndexes(e,t){const n=Oi(this.indexes_,n=>{if(n===Mb)return n;{const r=t.get(e.name);return r?n.remove(new pb(e.name,r)):n}});return new jb(n,this.indexSet_)}}let Fb;class Ub{static get EMPTY_NODE(){return Fb||(Fb=new Ub(new bb(Sb),null,jb.Default))}constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Ib(this.priorityNode_),this.children_.isEmpty()&&Xr(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Fb}updatePriority(e){return this.children_.isEmpty()?this:new Ub(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?Fb:t}}getChild(e){const t=$w(e);return null===t?this:this.getImmediateChild(t).getChild(Jw(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(Xr(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new pb(e,t);let r,i;t.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(n,this.children_));const s=r.isEmpty()?Fb:this.priorityNode_;return new Ub(r,s,i)}}updateChild(e,t){const n=$w(e);if(null===n)return t;{Xr(".priority"!==$w(e)||1===Xw(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(Jw(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,r=0,i=!0;if(this.forEachChild(Ob,(s,o)=>{t[s]=o.val(e),n++,i&&Ub.INTEGER_REGEXP_.test(s)?r=Math.max(r,Number(s)):i=!1}),!e&&i&&r<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+Tb(this.getPriority().val())+":"),this.forEachChild(Ob,(t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)}),this.lazyHash_=""===e?"":Z_(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new pb(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new pb(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new pb(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal(e=>t(e.name,e.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,e=>e);{const n=this.children_.getIteratorFrom(e.name,pb.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,e=>e);{const n=this.children_.getReverseIteratorFrom(e.name,pb.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Vb?-1:0}withIndex(e){if(e===vb||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new Ub(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===vb||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(Ob),n=t.getIterator(Ob);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===vb?null:this.indexMap_.get(e.toString())}}Ub.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const Vb=new class extends Ub{constructor(){super(new bb(Sb),Ub.EMPTY_NODE,jb.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ub.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(pb,{MIN:{value:new pb(uw,Ub.EMPTY_NODE)},MAX:{value:new pb(hw,Vb)}}),yb.__EMPTY_NODE=Ub.EMPTY_NODE,Pb.__childrenNodeConstructor=Ub,Cb=Vb,function(e){Nb=e}(Vb);function zb(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return Ub.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Xr(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){return new Pb(e,zb(t))}if(e instanceof Array){let n=Ub.EMPTY_NODE;return yw(e,(t,r)=>{if(xi(e,t)&&"."!==t.substring(0,1)){const e=zb(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}}),n.updatePriority(zb(t))}{const n=[];let r=!1;if(yw(e,(e,t)=>{if("."!==e.substring(0,1)){const i=zb(t);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new pb(e,i)))}}),0===n.length)return Ub.EMPTY_NODE;const i=Rb(n,Eb,e=>e.name,Sb);if(r){const e=Rb(n,Ob.getCompare());return new Ub(i,zb(t),new jb({".priority":e},{".priority":Ob}))}return new Ub(i,zb(t),jb.Default)}}!function(e){xb=e}(zb);class qb extends gb{constructor(e){super(),this.indexPath_=e,Xr(!rb(e)&&".priority"!==$w(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?dw(e.name,t.name):i}makePost(e,t){const n=zb(e),r=Ub.EMPTY_NODE.updateChild(this.indexPath_,n);return new pb(t,r)}maxPost(){const e=Ub.EMPTY_NODE.updateChild(this.indexPath_,Vb);return new pb(hw,e)}toString(){return eb(this.indexPath_,0).join("/")}}const Bb=new class extends gb{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?dw(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return pb.MIN}maxPost(){return pb.MAX}makePost(e,t){const n=zb(e);return new pb(t,n)}toString(){return".value"}};function Hb(e){return{type:"value",snapshotNode:e}}function Wb(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Gb(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Kb(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class Qb{constructor(e){this.index_=e}updateChild(e,t,n,r,i,s){Xr(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=s&&(n.isEmpty()?e.hasChild(t)?s.trackChildChange(Gb(t,o)):Xr(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?s.trackChildChange(Wb(t,n)):s.trackChildChange(Kb(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(Ob,(e,r)=>{t.hasChild(e)||n.trackChildChange(Gb(e,r))}),t.isLeafNode()||t.forEachChild(Ob,(t,r)=>{if(e.hasChild(t)){const i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(Kb(t,r,i))}else n.trackChildChange(Wb(t,r))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Ub.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Yb{constructor(e){this.indexedFilter_=new Qb(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Yb.getStartPost_(e),this.endPost_=Yb.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,r,i,s){return this.matches(new pb(t,n))||(n=Ub.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,s)}updateFullNode(e,t,n){t.isLeafNode()&&(t=Ub.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(Ub.EMPTY_NODE);const i=this;return t.forEachChild(Ob,(e,t)=>{i.matches(new pb(e,t))||(r=r.updateImmediateChild(e,Ub.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class $b{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{const t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new Yb(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,r,i,s){return this.rangedFilter_.matches(new pb(t,n))||(n=Ub.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,s):this.fullLimitUpdateChild_(e,t,n,i,s)}updateFullNode(e,t,n){let r;if(t.isLeafNode()||t.isEmpty())r=Ub.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;r=Ub.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();if(this.withinDirectionalStart(t)){if(!this.withinDirectionalEnd(t))break;r=r.updateImmediateChild(t.name,t.node),n++}}}else{let e;r=t.withIndex(this.index_),r=r.updatePriority(Ub.EMPTY_NODE),e=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let n=0;for(;e.hasNext();){const t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:r=r.updateImmediateChild(t.name,Ub.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,r,i){let s;if(this.reverse_){const e=this.index_.getCompare();s=(t,n)=>e(n,t)}else s=this.index_.getCompare();const o=e;Xr(o.numChildren()===this.limit_,"");const a=new pb(t,n),l=this.reverse_?o.getFirstChild(this.index_):o.getLastChild(this.index_),c=this.rangedFilter_.matches(a);if(o.hasChild(t)){const e=o.getImmediateChild(t);let u=r.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=u&&(u.name===t||o.hasChild(u.name));)u=r.getChildAfterChild(this.index_,u,this.reverse_);const h=null==u?1:s(u,a);if(c&&!n.isEmpty()&&h>=0)return null!=i&&i.trackChildChange(Kb(t,n,e)),o.updateImmediateChild(t,n);{null!=i&&i.trackChildChange(Gb(t,e));const n=o.updateImmediateChild(t,Ub.EMPTY_NODE);return null!=u&&this.rangedFilter_.matches(u)?(null!=i&&i.trackChildChange(Wb(u.name,u.node)),n.updateImmediateChild(u.name,u.node)):n}}return n.isEmpty()?e:c&&s(l,a)>=0?(null!=i&&(i.trackChildChange(Gb(l.name,l.node)),i.trackChildChange(Wb(t,n))),o.updateImmediateChild(t,n).updateImmediateChild(l.name,Ub.EMPTY_NODE)):e}}class Xb{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ob}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return Xr(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Xr(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:uw}hasEnd(){return this.endSet_}getIndexEndValue(){return Xr(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Xr(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:hw}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return Xr(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ob}copy(){const e=new Xb;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Jb(e){const t={};if(e.isDefault())return t;let n;if(e.index_===Ob?n="$priority":e.index_===Bb?n="$value":e.index_===vb?n="$key":(Xr(e.index_ instanceof qb,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=Ii(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=Ii(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+Ii(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=Ii(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+Ii(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function Zb(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==Ob&&(t.i=e.index_.toString()),t}class eE extends Ww{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(Xr(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=sw("p:rest:"),this.listens_={}}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const s=eE.getListenId_(e,n),o={};this.listens_[s]=o;const a=Jb(e._queryParams);this.restRequest_(i+".json",a,(e,t)=>{let a=t;if(404===e&&(a=null,e=null),null===e&&this.onDataUpdate_(i,a,!1,n),Ni(this.listens_,s)===o){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}})}unlisten(e,t){const n=eE.getListenId_(e,t);delete this.listens_[n]}get(e){const t=Jb(e._queryParams),n=e._path.toString(),r=new pi;return this.restRequest_(n+".json",t,(e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))}),r.promise}refreshAuthToken(e){}restRequest_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(r=>{let[i,s]=r;i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Ri(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let e=null;if(a.status>=200&&a.status<300){try{e=Ti(a.responseText)}catch(sk){lw("Failed to parse JSON response for "+o+": "+a.responseText)}n(null,e)}else 401!==a.status&&404!==a.status&&lw("Got unsuccessful REST response for "+o+" Status: "+a.status),n(a.status);n=null}},a.open("GET",o,!0),a.send()})}}class tE{constructor(){this.rootNode_=Ub.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function nE(){return{value:null,children:new Map}}function rE(e,t,n){if(rb(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=$w(t);e.children.has(r)||e.children.set(r,nE());rE(e.children.get(r),t=Jw(t),n)}}function iE(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((e,n)=>{t(n,e)})}(e,(e,r)=>{iE(r,new Qw(t.toString()+"/"+e),n)})}class sE{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&yw(this.last_,(e,n)=>{t[e]=t[e]-n}),this.last_=e,t}}class oE{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new sE(e);const n=1e4+2e4*Math.random();Ew(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;yw(e,(e,r)=>{r>0&&xi(this.statsToReport_,e)&&(t[e]=r,n=!0)}),n&&this.server_.reportStats(t),Ew(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var aE;function lE(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(aE||(aE={}));class cE{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=aE.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(rb(this.path)){if(null!=this.affectedTree.value)return Xr(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Qw(e));return new cE(Yw(),t,this.revert)}}return Xr($w(this.path)===e,"operationForChild called for unrelated child."),new cE(Jw(this.path),this.affectedTree,this.revert)}}class uE{constructor(e,t){this.source=e,this.path=t,this.type=aE.LISTEN_COMPLETE}operationForChild(e){return rb(this.path)?new uE(this.source,Yw()):new uE(this.source,Jw(this.path))}}class hE{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=aE.OVERWRITE}operationForChild(e){return rb(this.path)?new hE(this.source,Yw(),this.snap.getImmediateChild(e)):new hE(this.source,Jw(this.path),this.snap)}}class dE{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=aE.MERGE}operationForChild(e){if(rb(this.path)){const t=this.children.subtree(new Qw(e));return t.isEmpty()?null:t.value?new hE(this.source,Yw(),t.value):new dE(this.source,Yw(),t)}return Xr($w(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new dE(this.source,Jw(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class fE{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(rb(e))return this.isFullyInitialized()&&!this.filtered_;const t=$w(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class pE{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function gE(e,t,n,r,i,s){const o=r.filter(e=>e.type===n);o.sort((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw Jr("Should only compare child_ events.");const r=new pb(t.childName,t.snapshotNode),i=new pb(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)),o.forEach(n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,s);i.forEach(i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))})})}function mE(e,t){return{eventCache:e,serverCache:t}}function yE(e,t,n,r){return mE(new fE(t,n,r),e.serverCache)}function vE(e,t,n,r){return mE(e.eventCache,new fE(t,n,r))}function _E(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function wE(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let bE;class EE{static fromObject(e){let t=new EE(null);return yw(e,(e,n)=>{t=t.set(new Qw(e),n)}),t}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(bE||(bE=new bb(fw)),bE);this.value=e,this.children=t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Yw(),value:this.value};if(rb(e))return null;{const n=$w(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(Jw(e),t);if(null!=i){return{path:nb(new Qw(n),i.path),value:i.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(rb(e))return this;{const t=$w(e),n=this.children.get(t);return null!==n?n.subtree(Jw(e)):new EE(null)}}set(e,t){if(rb(e))return new EE(t,this.children);{const n=$w(e),r=(this.children.get(n)||new EE(null)).set(Jw(e),t),i=this.children.insert(n,r);return new EE(this.value,i)}}remove(e){if(rb(e))return this.children.isEmpty()?new EE(null):new EE(null,this.children);{const t=$w(e),n=this.children.get(t);if(n){const r=n.remove(Jw(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new EE(null):new EE(this.value,i)}return this}}get(e){if(rb(e))return this.value;{const t=$w(e),n=this.children.get(t);return n?n.get(Jw(e)):null}}setTree(e,t){if(rb(e))return t;{const n=$w(e),r=(this.children.get(n)||new EE(null)).setTree(Jw(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new EE(this.value,i)}}fold(e){return this.fold_(Yw(),e)}fold_(e,t){const n={};return this.children.inorderTraversal((r,i)=>{n[r]=i.fold_(nb(e,r),t)}),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,Yw(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(rb(e))return null;{const r=$w(e),i=this.children.get(r);return i?i.findOnPath_(Jw(e),nb(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Yw(),t)}foreachOnPath_(e,t,n){if(rb(e))return this;{this.value&&n(t,this.value);const r=$w(e),i=this.children.get(r);return i?i.foreachOnPath_(Jw(e),nb(t,r),n):new EE(null)}}foreach(e){this.foreach_(Yw(),e)}foreach_(e,t){this.children.inorderTraversal((n,r)=>{r.foreach_(nb(e,n),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,n)=>{n.value&&e(t,n.value)})}}class SE{constructor(e){this.writeTree_=e}static empty(){return new SE(new EE(null))}}function CE(e,t,n){if(rb(t))return new SE(new EE(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let s=r.value;const o=ib(i,t);return s=s.updateChild(o,n),new SE(e.writeTree_.set(i,s))}{const r=new EE(n),i=e.writeTree_.setTree(t,r);return new SE(i)}}}function TE(e,t,n){let r=e;return yw(n,(e,n)=>{r=CE(r,nb(t,e),n)}),r}function IE(e,t){if(rb(t))return SE.empty();{const n=e.writeTree_.setTree(t,new EE(null));return new SE(n)}}function kE(e,t){return null!=xE(e,t)}function xE(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(ib(n.path,t)):null}function NE(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Ob,(e,n)=>{t.push(new pb(e,n))}):e.writeTree_.children.inorderTraversal((e,n)=>{null!=n.value&&t.push(new pb(e,n.value))}),t}function PE(e,t){if(rb(t))return e;{const n=xE(e,t);return new SE(null!=n?new EE(n):e.writeTree_.subtree(t))}}function OE(e){return e.writeTree_.isEmpty()}function DE(e,t){return AE(Yw(),e.writeTree_,t)}function AE(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal((t,i)=>{".priority"===t?(Xr(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=AE(nb(e,t),i,n)}),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(nb(e,".priority"),r)),n}}function RE(e,t){return KE(t,e)}function LE(e,t){const n=e.allWrites.findIndex(e=>e.writeId===t);Xr(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,s=!1,o=e.allWrites.length-1;for(;i&&o>=0;){const t=e.allWrites[o];t.visible&&(o>=n&&ME(t,r.path)?i=!1:ab(r.path,t.path)&&(s=!0)),o--}if(i){if(s)return function(e){e.visibleWrites=FE(e.allWrites,jE,Yw()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(r.snap)e.visibleWrites=IE(e.visibleWrites,r.path);else{yw(r.children,t=>{e.visibleWrites=IE(e.visibleWrites,nb(r.path,t))})}return!0}return!1}function ME(e,t){if(e.snap)return ab(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&ab(nb(e.path,n),t))return!0;return!1}function jE(e){return e.visible}function FE(e,t,n){let r=SE.empty();for(let i=0;i<e.length;++i){const s=e[i];if(t(s)){const e=s.path;let t;if(s.snap)ab(n,e)?(t=ib(n,e),r=CE(r,t,s.snap)):ab(e,n)&&(t=ib(e,n),r=CE(r,Yw(),s.snap.getChild(t)));else{if(!s.children)throw Jr("WriteRecord should have .snap or .children");if(ab(n,e))t=ib(n,e),r=TE(r,t,s.children);else if(ab(e,n))if(t=ib(e,n),rb(t))r=TE(r,Yw(),s.children);else{const e=Ni(s.children,$w(t));if(e){const n=e.getChild(Jw(t));r=CE(r,Yw(),n)}}}}}return r}function UE(e,t,n,r,i){if(r||i){const s=PE(e.visibleWrites,t);if(!i&&OE(s))return n;if(i||null!=n||kE(s,Yw())){const s=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(ab(e.path,t)||ab(t,e.path))};return DE(FE(e.allWrites,s,t),n||Ub.EMPTY_NODE)}return null}{const r=xE(e.visibleWrites,t);if(null!=r)return r;{const r=PE(e.visibleWrites,t);if(OE(r))return n;if(null!=n||kE(r,Yw())){return DE(r,n||Ub.EMPTY_NODE)}return null}}}function VE(e,t,n,r){return UE(e.writeTree,e.treePath,t,n,r)}function zE(e,t){return function(e,t,n){let r=Ub.EMPTY_NODE;const i=xE(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(Ob,(e,t)=>{r=r.updateImmediateChild(e,t)}),r;if(n){const i=PE(e.visibleWrites,t);return n.forEachChild(Ob,(e,t)=>{const n=DE(PE(i,new Qw(e)),t);r=r.updateImmediateChild(e,n)}),NE(i).forEach(e=>{r=r.updateImmediateChild(e.name,e.node)}),r}return NE(PE(e.visibleWrites,t)).forEach(e=>{r=r.updateImmediateChild(e.name,e.node)}),r}(e.writeTree,e.treePath,t)}function qE(e,t,n,r){return function(e,t,n,r,i){Xr(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=nb(t,n);if(kE(e.visibleWrites,s))return null;{const t=PE(e.visibleWrites,s);return OE(t)?i.getChild(n):DE(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function BE(e,t){return function(e,t){return xE(e.visibleWrites,t)}(e.writeTree,nb(e.treePath,t))}function HE(e,t,n,r,i,s){return function(e,t,n,r,i,s,o){let a;const l=PE(e.visibleWrites,t),c=xE(l,Yw());if(null!=c)a=c;else{if(null==n)return[];a=DE(l,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=o.getCompare(),n=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let l=n.getNext();for(;l&&e.length<i;)0!==t(l,r)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,r,i,s)}function WE(e,t,n){return function(e,t,n,r){const i=nb(t,n),s=xE(e.visibleWrites,i);if(null!=s)return s;if(r.isCompleteForChild(n))return DE(PE(e.visibleWrites,i),r.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function GE(e,t){return KE(nb(e.treePath,t),e.writeTree)}function KE(e,t){return{treePath:e,writeTree:t}}class QE{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;Xr("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Xr(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,Kb(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,Gb(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,Wb(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw Jr("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,Kb(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const YE=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class $E{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new fE(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return WE(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:wE(this.viewCache_),i=HE(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}function XE(e,t,n,r,i){const s=new QE;let o,a;if(n.type===aE.OVERWRITE){const l=n;l.source.fromUser?o=eS(e,t,l.path,l.snap,r,i,s):(Xr(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!rb(l.path),o=ZE(e,t,l.path,l.snap,r,i,a,s))}else if(n.type===aE.MERGE){const l=n;l.source.fromUser?o=function(e,t,n,r,i,s,o){let a=t;return r.foreach((r,l)=>{const c=nb(n,r);tS(t,$w(c))&&(a=eS(e,a,c,l,i,s,o))}),r.foreach((r,l)=>{const c=nb(n,r);tS(t,$w(c))||(a=eS(e,a,c,l,i,s,o))}),a}(e,t,l.path,l.children,r,i,s):(Xr(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),o=rS(e,t,l.path,l.children,r,i,a,s))}else if(n.type===aE.ACK_USER_WRITE){const a=n;o=a.revert?function(e,t,n,r,i,s){let o;if(null!=BE(r,n))return t;{const a=new $E(r,t,i),l=t.eventCache.getNode();let c;if(rb(n)||".priority"===$w(n)){let n;if(t.serverCache.isFullyInitialized())n=VE(r,wE(t));else{const e=t.serverCache.getNode();Xr(e instanceof Ub,"serverChildren would be complete if leaf node"),n=zE(r,e)}c=e.filter.updateFullNode(l,n,s)}else{const i=$w(n);let u=WE(r,i,t.serverCache);null==u&&t.serverCache.isCompleteForChild(i)&&(u=l.getImmediateChild(i)),c=null!=u?e.filter.updateChild(l,i,u,Jw(n),a,s):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(l,i,Ub.EMPTY_NODE,Jw(n),a,s):l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=VE(r,wE(t)),o.isLeafNode()&&(c=e.filter.updateFullNode(c,o,s)))}return o=t.serverCache.isFullyInitialized()||null!=BE(r,Yw()),yE(t,c,o,e.filter.filtersNodes())}}(e,t,a.path,r,i,s):function(e,t,n,r,i,s,o){if(null!=BE(i,n))return t;const a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=r.value){if(rb(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return ZE(e,t,n,l.getNode().getChild(n),i,s,a,o);if(rb(n)){let r=new EE(null);return l.getNode().forEachChild(vb,(e,t)=>{r=r.set(new Qw(e),t)}),rS(e,t,n,r,i,s,a,o)}return t}{let c=new EE(null);return r.foreach((e,t)=>{const r=nb(n,e);l.isCompleteForPath(r)&&(c=c.set(e,l.getNode().getChild(r)))}),rS(e,t,n,c,i,s,a,o)}}(e,t,a.path,a.affectedTree,r,i,s)}else{if(n.type!==aE.LISTEN_COMPLETE)throw Jr("Unknown operation type: "+n.type);o=function(e,t,n,r,i){const s=t.serverCache,o=vE(t,s.getNode(),s.isFullyInitialized()||rb(n),s.isFiltered());return JE(e,o,n,r,YE,i)}(e,t,n.path,r,s)}const l=s.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=_E(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(Hb(_E(t)))}}(t,o,l),{viewCache:o,changes:l}}function JE(e,t,n,r,i,s){const o=t.eventCache;if(null!=BE(r,n))return t;{let a,l;if(rb(n))if(Xr(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=wE(t),i=zE(r,n instanceof Ub?n:Ub.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),i,s)}else{const n=VE(r,wE(t));a=e.filter.updateFullNode(t.eventCache.getNode(),n,s)}else{const c=$w(n);if(".priority"===c){Xr(1===Xw(n),"Can't have a priority with additional path components");const i=o.getNode();l=t.serverCache.getNode();const s=qE(r,n,i,l);a=null!=s?e.filter.updatePriority(i,s):o.getNode()}else{const u=Jw(n);let h;if(o.isCompleteForChild(c)){l=t.serverCache.getNode();const e=qE(r,n,o.getNode(),l);h=null!=e?o.getNode().getImmediateChild(c).updateChild(u,e):o.getNode().getImmediateChild(c)}else h=WE(r,c,t.serverCache);a=null!=h?e.filter.updateChild(o.getNode(),c,h,u,i,s):o.getNode()}}return yE(t,a,o.isFullyInitialized()||rb(n),e.filter.filtersNodes())}}function ZE(e,t,n,r,i,s,o,a){const l=t.serverCache;let c;const u=o?e.filter:e.filter.getIndexedFilter();if(rb(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),e,null)}else{const e=$w(n);if(!l.isCompleteForPath(n)&&Xw(n)>1)return t;const i=Jw(n),s=l.getNode().getImmediateChild(e).updateChild(i,r);c=".priority"===e?u.updatePriority(l.getNode(),s):u.updateChild(l.getNode(),e,s,i,YE,null)}const h=vE(t,c,l.isFullyInitialized()||rb(n),u.filtersNodes());return JE(e,h,n,i,new $E(i,h,s),a)}function eS(e,t,n,r,i,s,o){const a=t.eventCache;let l,c;const u=new $E(i,t,s);if(rb(n))c=e.filter.updateFullNode(t.eventCache.getNode(),r,o),l=yE(t,c,!0,e.filter.filtersNodes());else{const i=$w(n);if(".priority"===i)c=e.filter.updatePriority(t.eventCache.getNode(),r),l=yE(t,c,a.isFullyInitialized(),a.isFiltered());else{const s=Jw(n),c=a.getNode().getImmediateChild(i);let h;if(rb(s))h=r;else{const e=u.getCompleteChild(i);h=null!=e?".priority"===Zw(s)&&e.getChild(tb(s)).isEmpty()?e:e.updateChild(s,r):Ub.EMPTY_NODE}if(c.equals(h))l=t;else{l=yE(t,e.filter.updateChild(a.getNode(),i,h,s,u,o),a.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function tS(e,t){return e.eventCache.isCompleteForChild(t)}function nS(e,t,n){return n.foreach((e,n)=>{t=t.updateChild(e,n)}),t}function rS(e,t,n,r,i,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=rb(n)?r:new EE(null).setTree(n,r);const u=t.serverCache.getNode();return l.children.inorderTraversal((n,r)=>{if(u.hasChild(n)){const l=nS(0,t.serverCache.getNode().getImmediateChild(n),r);c=ZE(e,c,new Qw(n),l,i,s,o,a)}}),l.children.inorderTraversal((n,r)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!u.hasChild(n)&&!l){const l=nS(0,t.serverCache.getNode().getImmediateChild(n),r);c=ZE(e,c,new Qw(n),l,i,s,o,a)}}),c}class iS{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,r=new Qb(n.getIndex()),i=(s=n).loadsAllData()?new Qb(s.getIndex()):s.hasLimit()?new $b(s):new Yb(s);var s;this.processor_=function(e){return{filter:e}}(i);const o=t.serverCache,a=t.eventCache,l=r.updateFullNode(Ub.EMPTY_NODE,o.getNode(),null),c=i.updateFullNode(Ub.EMPTY_NODE,a.getNode(),null),u=new fE(l,o.isFullyInitialized(),r.filtersNodes()),h=new fE(c,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=mE(h,u),this.eventGenerator_=new pE(this.query_)}get query(){return this.query_}}function sS(e,t){const n=wE(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!rb(t)&&!n.getImmediateChild($w(t)).isEmpty())?n.getChild(t):null}function oS(e){return 0===e.eventRegistrations_.length}function aS(e,t,n){const r=[];if(n){Xr(null==t,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach(e=>{const t=e.createCancelEvent(n,i);t&&r.push(t)})}if(t){let n=[];for(let r=0;r<e.eventRegistrations_.length;++r){const i=e.eventRegistrations_[r];if(i.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(r+1));break}}else n.push(i)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return r}function lS(e,t,n,r){t.type===aE.MERGE&&null!==t.source.queryId&&(Xr(wE(e.viewCache_),"We should always have a full cache before handling merges"),Xr(_E(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,s=XE(e.processor_,i,t,n,r);var o,a;return o=e.processor_,a=s.viewCache,Xr(a.eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),Xr(a.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed"),Xr(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,cS(e,s.changes,s.viewCache.eventCache.getNode(),null)}function cS(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){const i=[],s=[];return t.forEach(t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&s.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))}),gE(e,i,"child_removed",t,r,n),gE(e,i,"child_added",t,r,n),gE(e,i,"child_moved",s,r,n),gE(e,i,"child_changed",t,r,n),gE(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}let uS,hS;class dS{constructor(){this.views=new Map}}function fS(e,t,n,r){const i=t.source.queryId;if(null!==i){const s=e.views.get(i);return Xr(null!=s,"SyncTree gave us an op for an invalid query."),lS(s,t,n,r)}{let i=[];for(const s of e.views.values())i=i.concat(lS(s,t,n,r));return i}}function pS(e,t,n,r,i){const s=t._queryIdentifier,o=e.views.get(s);if(!o){let e=VE(n,i?r:null),s=!1;e?s=!0:r instanceof Ub?(e=zE(n,r),s=!1):(e=Ub.EMPTY_NODE,s=!1);const o=mE(new fE(e,s,!1),new fE(r,i,!1));return new iS(t,o)}return o}function gS(e,t,n,r,i,s){const o=pS(e,t,r,i,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){const n=e.viewCache_.eventCache,r=[];n.getNode().isLeafNode()||n.getNode().forEachChild(Ob,(e,t)=>{r.push(Wb(e,t))});return n.isFullyInitialized()&&r.push(Hb(n.getNode())),cS(e,r,n.getNode(),t)}(o,n)}function mS(e,t,n,r){const i=t._queryIdentifier,s=[];let o=[];const a=bS(e);if("default"===i)for(const[l,c]of e.views.entries())o=o.concat(aS(c,n,r)),oS(c)&&(e.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const t=e.views.get(i);t&&(o=o.concat(aS(t,n,r)),oS(t)&&(e.views.delete(i),t.query._queryParams.loadsAllData()||s.push(t.query)))}return a&&!bS(e)&&s.push(new(Xr(uS,"Reference.ts has not been loaded"),uS)(t._repo,t._path)),{removed:s,events:o}}function yS(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function vS(e,t){let n=null;for(const r of e.views.values())n=n||sS(r,t);return n}function _S(e,t){if(t._queryParams.loadsAllData())return ES(e);{const n=t._queryIdentifier;return e.views.get(n)}}function wS(e,t){return null!=_S(e,t)}function bS(e){return null!=ES(e)}function ES(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let SS=1;class CS{constructor(e){this.listenProvider_=e,this.syncPointTree_=new EE(null),this.pendingWriteTree_={visibleWrites:SE.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function TS(e,t,n,r,i){return function(e,t,n,r,i){Xr(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=CE(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?RS(e,new hE({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function IS(e,t,n,r){!function(e,t,n,r){Xr(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=TE(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);const i=EE.fromObject(n);return RS(e,new dE({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function kS(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(LE(e.pendingWriteTree_,t)){let t=new EE(null);return null!=r.snap?t=t.set(Yw(),!0):yw(r.children,e=>{t=t.set(new Qw(e),!0)}),RS(e,new cE(r.path,t,n))}return[]}function xS(e,t,n){return RS(e,new hE({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function NS(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=t._path,o=e.syncPointTree_.get(s);let a=[];if(o&&("default"===t._queryIdentifier||wS(o,t))){const l=mS(o,t,n,r);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!i){const n=-1!==c.findIndex(e=>e._queryParams.loadsAllData()),i=e.syncPointTree_.findOnPath(s,(e,t)=>bS(t));if(n&&!i){const t=e.syncPointTree_.subtree(s);if(!t.isEmpty()){const n=function(e){return e.fold((e,t,n)=>{if(t&&bS(t)){return[ES(t)]}{let e=[];return t&&(e=yS(t)),yw(n,(t,n)=>{e=e.concat(n)}),e}})}(t);for(let t=0;t<n.length;++t){const r=n[t],i=r.query,s=jS(e,r);e.listenProvider_.startListening(BS(i),FS(e,i),s.hashFn,s.onComplete)}}}if(!i&&c.length>0&&!r)if(n){const n=null;e.listenProvider_.stopListening(BS(t),n)}else c.forEach(t=>{const n=e.queryToTagMap.get(US(t));e.listenProvider_.stopListening(BS(t),n)})}!function(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const t=US(r),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,c)}return a}function PS(e,t,n,r){const i=VS(e,r);if(null!=i){const r=zS(i),s=r.path,o=r.queryId,a=ib(s,t);return qS(e,s,new hE(lE(o),a,n))}return[]}function OS(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=t._path;let s=null,o=!1;e.syncPointTree_.foreachOnPath(i,(e,t)=>{const n=ib(e,i);s=s||vS(t,n),o=o||bS(t)});let a,l=e.syncPointTree_.get(i);if(l?(o=o||bS(l),s=s||vS(l,Yw())):(l=new dS,e.syncPointTree_=e.syncPointTree_.set(i,l)),null!=s)a=!0;else{a=!1,s=Ub.EMPTY_NODE;e.syncPointTree_.subtree(i).foreachChild((e,t)=>{const n=vS(t,Yw());n&&(s=s.updateImmediateChild(e,n))})}const c=wS(l,t);if(!c&&!t._queryParams.loadsAllData()){const n=US(t);Xr(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const r=SS++;e.queryToTagMap.set(n,r),e.tagToQueryMap.set(r,n)}let u=gS(l,t,n,RE(e.pendingWriteTree_,i),s,a);if(!c&&!o&&!r){const n=_S(l,t);u=u.concat(function(e,t,n){const r=t._path,i=FS(e,t),s=jS(e,n),o=e.listenProvider_.startListening(BS(t),i,s.hashFn,s.onComplete),a=e.syncPointTree_.subtree(r);if(i)Xr(!bS(a.value),"If we're adding a query, it shouldn't be shadowed");else{const t=a.fold((e,t,n)=>{if(!rb(e)&&t&&bS(t))return[ES(t).query];{let e=[];return t&&(e=e.concat(yS(t).map(e=>e.query))),yw(n,(t,n)=>{e=e.concat(n)}),e}});for(let n=0;n<t.length;++n){const r=t[n];e.listenProvider_.stopListening(BS(r),FS(e,r))}}return o}(e,t,n))}return u}function DS(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(e,n)=>{const r=vS(n,ib(e,t));if(r)return r});return UE(r,t,i,n,!0)}function AS(e,t){const n=t._path;let r=null;e.syncPointTree_.foreachOnPath(n,(e,t)=>{const i=ib(e,n);r=r||vS(t,i)});let i=e.syncPointTree_.get(n);i?r=r||vS(i,Yw()):(i=new dS,e.syncPointTree_=e.syncPointTree_.set(n,i));const s=null!=r,o=s?new fE(r,!0,!1):null;return function(e){return _E(e.viewCache_)}(pS(i,t,RE(e.pendingWriteTree_,t._path),s?o.getNode():Ub.EMPTY_NODE,s))}function RS(e,t){return LS(t,e.syncPointTree_,null,RE(e.pendingWriteTree_,Yw()))}function LS(e,t,n,r){if(rb(e.path))return MS(e,t,n,r);{const i=t.get(Yw());null==n&&null!=i&&(n=vS(i,Yw()));let s=[];const o=$w(e.path),a=e.operationForChild(o),l=t.children.get(o);if(l&&a){const e=n?n.getImmediateChild(o):null,t=GE(r,o);s=s.concat(LS(a,l,e,t))}return i&&(s=s.concat(fS(i,e,r,n))),s}}function MS(e,t,n,r){const i=t.get(Yw());null==n&&null!=i&&(n=vS(i,Yw()));let s=[];return t.children.inorderTraversal((t,i)=>{const o=n?n.getImmediateChild(t):null,a=GE(r,t),l=e.operationForChild(t);l&&(s=s.concat(MS(l,i,o,a)))}),i&&(s=s.concat(fS(i,e,r,n))),s}function jS(e,t){const n=t.query,r=FS(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||Ub.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return r?function(e,t,n){const r=VS(e,n);if(r){const n=zS(r),i=n.path,s=n.queryId,o=ib(i,t);return qS(e,i,new uE(lE(s),o))}return[]}(e,n._path,r):function(e,t){return RS(e,new uE({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const r=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return NS(e,n,null,r)}}}}function FS(e,t){const n=US(t);return e.queryToTagMap.get(n)}function US(e){return e._path.toString()+"$"+e._queryIdentifier}function VS(e,t){return e.tagToQueryMap.get(t)}function zS(e){const t=e.indexOf("$");return Xr(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Qw(e.substr(0,t))}}function qS(e,t,n){const r=e.syncPointTree_.get(t);Xr(r,"Missing sync point for query tag that we're tracking");return fS(r,n,RE(e.pendingWriteTree_,t),null)}function BS(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Xr(hS,"Reference.ts has not been loaded"),hS)(e._repo,e._path):e}class HS{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new HS(t)}node(){return this.node_}}class WS{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=nb(this.path_,e);return new WS(this.syncTree_,t)}node(){return DS(this.syncTree_,this.path_)}}const GS=function(e,t,n){return e&&"object"===typeof e?(Xr(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?KS(e[".sv"],t,n):"object"===typeof e[".sv"]?QS(e[".sv"],t):void Xr(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},KS=function(e,t,n){if("timestamp"===e)return n.timestamp;Xr(!1,"Unexpected server value: "+e)},QS=function(e,t,n){e.hasOwnProperty("increment")||Xr(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!==typeof r&&Xr(!1,"Unexpected increment value: "+r);const i=t.node();if(Xr(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const s=i.getValue();return"number"!==typeof s?r:s+r},YS=function(e,t,n,r){return XS(t,new WS(n,e),r)},$S=function(e,t,n){return XS(e,new HS(t),n)};function XS(e,t,n){const r=e.getPriority().val(),i=GS(r,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const r=e,s=GS(r.getValue(),t,n);return s!==r.getValue()||i!==r.getPriority().val()?new Pb(s,zb(i)):e}{const r=e;return s=r,i!==r.getPriority().val()&&(s=s.updatePriority(new Pb(i))),r.forEachChild(Ob,(e,r)=>{const i=XS(r,t.getImmediateChild(e),n);i!==r&&(s=s.updateImmediateChild(e,i))}),s}}class JS{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};this.name=e,this.parent=t,this.node=n}}function ZS(e,t){let n=t instanceof Qw?t:new Qw(t),r=e,i=$w(n);for(;null!==i;){const e=Ni(r.node.children,i)||{children:{},childCount:0};r=new JS(i,r,e),n=Jw(n),i=$w(n)}return r}function eC(e){return e.node.value}function tC(e,t){e.node.value=t,oC(e)}function nC(e){return e.node.childCount>0}function rC(e,t){yw(e.node.children,(n,r)=>{t(new JS(n,e,r))})}function iC(e,t,n,r){n&&!r&&t(e),rC(e,e=>{iC(e,t,!0,r)}),n&&r&&t(e)}function sC(e){return new Qw(null===e.parent?e.name:sC(e.parent)+"/"+e.name)}function oC(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===eC(e)&&!nC(e)}(n),i=xi(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,oC(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,oC(e))}(e.parent,e.name,e)}const aC=/[\[\].#$\/\u0000-\u001F\u007F]/,lC=/[\[\].#$\u0000-\u001F\u007F]/,cC=10485760,uC=function(e){return"string"===typeof e&&0!==e.length&&!aC.test(e)},hC=function(e){return"string"===typeof e&&0!==e.length&&!lC.test(e)},dC=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!cw(e)||e&&"object"===typeof e&&xi(e,".sv")},fC=function(e,t,n,r){r&&void 0===t||pC(Vi(e,"value"),t,n)},pC=function(e,t,n){const r=n instanceof Qw?new lb(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+ub(r));if("function"===typeof t)throw new Error(e+"contains a function "+ub(r)+" with contents = "+t.toString());if(cw(t))throw new Error(e+"contains "+t.toString()+" "+ub(r));if("string"===typeof t&&t.length>cC/3&&zi(t)>cC)throw new Error(e+"contains a string greater than "+cC+" utf8 bytes "+ub(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){let n=!1,i=!1;if(yw(t,(t,s)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!uC(t)))throw new Error(e+" contains an invalid key ("+t+") "+ub(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=zi(t),cb(e)}(r,t),pC(e,s,r),function(e){const t=e.parts_.pop();e.byteLength_-=zi(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)}),n&&i)throw new Error(e+' contains ".value" child '+ub(r)+" in addition to actual children.")}},gC=function(e,t,n,r){if(r&&void 0===t)return;const i=Vi(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");const s=[];yw(t,(e,t)=>{const r=new Qw(e);if(pC(i,t,nb(n,r)),".priority"===Zw(r)&&!dC(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(r)}),function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];const i=eb(r);for(let t=0;t<i.length;t++)if(".priority"===i[t]&&t===i.length-1);else if(!uC(i[t]))throw new Error(e+"contains an invalid key ("+i[t]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(sb);let i=null;for(n=0;n<t.length;n++){if(r=t[n],null!==i&&ab(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},mC=function(e,t,n,r){if((!r||void 0!==n)&&!hC(n))throw new Error(Vi(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},yC=function(e,t){if(".info"===$w(t))throw new Error(e+" failed = Can't modify data under /.info/")},vC=function(e,t){const n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!uC(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),hC(e)}(n))throw new Error(Vi(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class _C{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function wC(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],s=i.getPath();null===n||ob(s,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(i)}n&&e.eventLists_.push(n)}function bC(e,t,n){wC(e,n),SC(e,e=>ob(e,t))}function EC(e,t,n){wC(e,n),SC(e,e=>ab(e,t)||ab(t,e))}function SC(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];if(i){t(i.path)?(CC(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function CC(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();tw&&iw("event: "+n.toString()),bw(r)}}}const TC="repo_interrupt";class IC{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new _C,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=nE(),this.transactionQueueTree_=new JS,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function kC(e,t,n){if(e.stats_=Mw(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new eE(e.repoInfo_,(t,n,r,i)=>{PC(e,t,n,r,i)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>OC(e,!0),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ii(n)}catch(sk){throw new Error("Invalid authOverride provided: "+sk)}}e.persistentConnection_=new fb(e.repoInfo_,t,(t,n,r,i)=>{PC(e,t,n,r,i)},t=>{OC(e,t)},t=>{!function(e,t){yw(t,(t,n)=>{DC(e,t,n)})}(e,t)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(t=>{e.server_.refreshAuthToken(t)}),e.appCheckProvider_.addTokenChangeListener(t=>{e.server_.refreshAppCheckToken(t.token)}),e.statsReporter_=function(e,t){const n=e.toString();return Lw[n]||(Lw[n]=t()),Lw[n]}(e.repoInfo_,()=>new oE(e.stats_,e.server_)),e.infoData_=new tE,e.infoSyncTree_=new CS({startListening:(t,n,r,i)=>{let s=[];const o=e.infoData_.getNode(t._path);return o.isEmpty()||(s=xS(e.infoSyncTree_,t._path,o),setTimeout(()=>{i("ok")},0)),s},stopListening:()=>{}}),DC(e,"connected",!1),e.serverSyncTree_=new CS({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,(n,r)=>{const s=i(n,r);EC(e.eventQueue_,t._path,s)}),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function xC(e){const t=e.infoData_.getNode(new Qw(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function NC(e){return(t=(t={timestamp:xC(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function PC(e,t,n,r,i){e.dataUpdateCount++;const s=new Qw(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(i)if(r){const t=Oi(n,e=>zb(e));o=function(e,t,n,r){const i=VS(e,r);if(i){const r=zS(i),s=r.path,o=r.queryId,a=ib(s,t),l=EE.fromObject(n);return qS(e,s,new dE(lE(o),a,l))}return[]}(e.serverSyncTree_,s,t,i)}else{const t=zb(n);o=PS(e.serverSyncTree_,s,t,i)}else if(r){const t=Oi(n,e=>zb(e));o=function(e,t,n){const r=EE.fromObject(n);return RS(e,new dE({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,s,t)}else{const t=zb(n);o=xS(e.serverSyncTree_,s,t)}let a=s;o.length>0&&(a=zC(e,s)),EC(e.eventQueue_,a,o)}function OC(e,t){DC(e,"connected",t),!1===t&&function(e){jC(e,"onDisconnectEvents");const t=NC(e),n=nE();iE(e.onDisconnect_,Yw(),(r,i)=>{const s=YS(r,i,e.serverSyncTree_,t);rE(n,r,s)});let r=[];iE(n,Yw(),(t,n)=>{r=r.concat(xS(e.serverSyncTree_,t,n));const i=GC(e,t);zC(e,i)}),e.onDisconnect_=nE(),EC(e.eventQueue_,Yw(),r)}(e)}function DC(e,t,n){const r=new Qw("/.info/"+t),i=zb(n);e.infoData_.updateSnapshot(r,i);const s=xS(e.infoSyncTree_,r,i);EC(e.eventQueue_,r,s)}function AC(e){return e.nextWriteId_++}function RC(e,t,n,r,i){jC(e,"set",{path:t.toString(),value:n,priority:r});const s=NC(e),o=zb(n,r),a=DS(e.serverSyncTree_,t),l=$S(o,a,s),c=AC(e),u=TS(e.serverSyncTree_,t,l,c,!0);wC(e.eventQueue_,u),e.server_.put(t.toString(),o.val(!0),(n,r)=>{const s="ok"===n;s||lw("set at "+t+" failed: "+n);const o=kS(e.serverSyncTree_,c,!s);EC(e.eventQueue_,t,o),FC(e,i,n,r)});const h=GC(e,t);zC(e,h),EC(e.eventQueue_,h,[])}function LC(e,t,n){let r;r=".info"===$w(t._path)?NS(e.infoSyncTree_,t,n):NS(e.serverSyncTree_,t,n),bC(e.eventQueue_,t._path,r)}function MC(e){e.persistentConnection_&&e.persistentConnection_.interrupt(TC)}function jC(e){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];iw(t,...r)}function FC(e,t,n,r){t&&bw(()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let i=e;r&&(i+=": "+r);const s=new Error(i);s.code=e,t(s)}})}function UC(e,t,n){return DS(e.serverSyncTree_,t,n)||Ub.EMPTY_NODE}function VC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||WC(e,t),eC(t)){const n=BC(e,t);Xr(n.length>0,"Sending zero length transaction queue");n.every(e=>0===e.status)&&function(e,t,n){const r=n.map(e=>e.currentWriteId),i=UC(e,t,r);let s=i;const o=i.hash();for(let c=0;c<n.length;c++){const e=n[c];Xr(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const r=ib(t,e.path);s=s.updateChild(r,e.currentOutputSnapshotRaw)}const a=s.val(!0),l=t;e.server_.put(l.toString(),a,r=>{jC(e,"transaction put response",{path:l.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(kS(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push(()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)),n[t].unwatcher();WC(e,ZS(e.transactionQueueTree_,t)),VC(e,e.transactionQueueTree_),EC(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)bw(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{lw("transaction at "+l.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}zC(e,t)}},o)}(e,sC(t),n)}else nC(t)&&rC(t,t=>{VC(e,t)})}function zC(e,t){const n=qC(e,t),r=sC(n);return function(e,t,n){if(0===t.length)return;const r=[];let i=[];const s=t.filter(e=>0===e.status),o=s.map(e=>e.currentWriteId);for(let a=0;a<t.length;a++){const s=t[a],l=ib(n,s.path);let c,u=!1;if(Xr(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)u=!0,c=s.abortReason,i=i.concat(kS(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=25)u=!0,c="maxretry",i=i.concat(kS(e.serverSyncTree_,s.currentWriteId,!0));else{const n=UC(e,s.path,o);s.currentInputSnapshot=n;const r=t[a].update(n.val());if(void 0!==r){pC("transaction failed: Data returned ",r,s.path);let t=zb(r);"object"===typeof r&&null!=r&&xi(r,".priority")||(t=t.updatePriority(n.getPriority()));const a=s.currentWriteId,l=NC(e),c=$S(t,n,l);s.currentOutputSnapshotRaw=t,s.currentOutputSnapshotResolved=c,s.currentWriteId=AC(e),o.splice(o.indexOf(a),1),i=i.concat(TS(e.serverSyncTree_,s.path,c,s.currentWriteId,s.applyLocally)),i=i.concat(kS(e.serverSyncTree_,a,!0))}else u=!0,c="nodata",i=i.concat(kS(e.serverSyncTree_,s.currentWriteId,!0))}EC(e.eventQueue_,n,i),i=[],u&&(t[a].status=2,function(e){setTimeout(e,Math.floor(0))}(t[a].unwatcher),t[a].onComplete&&("nodata"===c?r.push(()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot)):r.push(()=>t[a].onComplete(new Error(c),!1,null))))}WC(e,e.transactionQueueTree_);for(let a=0;a<r.length;a++)bw(r[a]);VC(e,e.transactionQueueTree_)}(e,BC(e,n),r),r}function qC(e,t){let n,r=e.transactionQueueTree_;for(n=$w(t);null!==n&&void 0===eC(r);)r=ZS(r,n),n=$w(t=Jw(t));return r}function BC(e,t){const n=[];return HC(e,t,n),n.sort((e,t)=>e.order-t.order),n}function HC(e,t,n){const r=eC(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);rC(t,t=>{HC(e,t,n)})}function WC(e,t){const n=eC(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,tC(t,n.length>0?n:void 0)}rC(t,t=>{WC(e,t)})}function GC(e,t){const n=sC(qC(e,t)),r=ZS(e.transactionQueueTree_,t);return function(e,t,n){let r=n?e:e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,t=>{KC(e,t)}),KC(e,r),iC(r,t=>{KC(e,t)}),n}function KC(e,t){const n=eC(t);if(n){const r=[];let i=[],s=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(Xr(s===t-1,"All SENT items should be at beginning of queue."),s=t,n[t].status=3,n[t].abortReason="set"):(Xr(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(kS(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===s?tC(t,void 0):n.length=s+1,EC(e.eventQueue_,sC(t),i);for(let e=0;e<r.length;e++)bw(r[e])}}const QC=function(e,t){const n=YC(e),r=n.namespace;"firebase.com"===n.domain&&aw(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||aw("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&lw("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Ow(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new Qw(n.pathString)}},YC=function(e){let t="",n="",r="",i="",s="",o=!0,a="https",l=443;if("string"===typeof e){let c=e.indexOf("//");c>=0&&(a=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(u,h)),u<h&&(i=function(e){let t="";const n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let e=n[r];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(sk){}t+="/"+e}return t}(e.substring(u,h)));const d=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):lw("Invalid query segment '".concat(n,"' in query '").concat(e,"'"))}return t}(e.substring(Math.min(e.length,h)));c=t.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(t.substring(c+1),10)):c=t.length;const f=t.slice(0,c);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=r}"ns"in d&&(s=d.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}},$C="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz";!function(){let e=0;const t=[]}();class XC{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Ii(this.snapshot.exportVal())}}class JC{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class ZC{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return Xr(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class eT{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return rb(this._path)?null:Zw(this._path)}get ref(){return new tT(this._repo,this._path)}get _queryIdentifier(){const e=Zb(this._queryParams),t=gw(e);return"{}"===t?"default":t}get _queryObject(){return Zb(this._queryParams)}isEqual(e){if(!((e=qi(e))instanceof eT))return!1;const t=this._repo===e._repo,n=ob(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}class tT extends eT{constructor(e,t){super(e,t,new Xb,!1)}get parent(){const e=tb(this._path);return null===e?null:new tT(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class nT{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Qw(e),n=iT(this.ref,e);return new nT(this._node.getChild(t),n,Ob)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){if(this._node.isLeafNode())return!1;return!!this._node.forEachChild(this._index,(t,n)=>e(new nT(n,iT(this.ref,t),Ob)))}hasChild(e){const t=new Qw(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function rT(e,t){return(e=qi(e))._checkNotDeleted("ref"),void 0!==t?iT(e._root,t):e._root}function iT(e,t){var n,r,i,s;return null===$w((e=qi(e))._path)?(n="child",r="path",s=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),mC(n,r,i,s)):mC("child","path",t,!1),new tT(e._repo,nb(e._path,t))}function sT(e){return yC("remove",e._path),oT(e,null)}function oT(e,t){e=qi(e),yC("set",e._path),fC("set",t,e._path,!1);const n=new pi;return RC(e._repo,e._path,t,null,n.wrapCallback(()=>{})),n.promise}function aT(e,t){gC("update",t,e._path,!1);const n=new pi;return function(e,t,n,r){jC(e,"update",{path:t.toString(),value:n});let i=!0;const s=NC(e),o={};if(yw(n,(n,r)=>{i=!1,o[n]=YS(nb(t,n),zb(r),e.serverSyncTree_,s)}),i)iw("update() called with empty data.  Don't do anything."),FC(0,r,"ok",void 0);else{const i=AC(e),s=IS(e.serverSyncTree_,t,o,i);wC(e.eventQueue_,s),e.server_.merge(t.toString(),n,(n,s)=>{const o="ok"===n;o||lw("update at "+t+" failed: "+n);const a=kS(e.serverSyncTree_,i,!o),l=a.length>0?zC(e,t):t;EC(e.eventQueue_,l,a),FC(0,r,n,s)}),yw(n,n=>{const r=GC(e,nb(t,n));zC(e,r)}),EC(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback(()=>{})),n.promise}function lT(e){e=qi(e);const t=new ZC(()=>{}),n=new cT(t);return function(e,t,n){const r=AS(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then(r=>{const i=zb(r).withIndex(t._queryParams.getIndex());let s;if(OS(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())s=xS(e.serverSyncTree_,t._path,i);else{const n=FS(e.serverSyncTree_,t);s=PS(e.serverSyncTree_,t._path,i,n)}return EC(e.eventQueue_,t._path,s),NS(e.serverSyncTree_,t,n,null,!0),i},n=>(jC(e,"get for query "+Ii(t)+" failed: "+n),Promise.reject(new Error(n))))}(e._repo,e,n).then(t=>new nT(t,new tT(e._repo,e._path),e._queryParams.getIndex()))}class cT{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new XC("value",this,new nT(e.snapshotNode,new tT(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new JC(this,e,t):null}matches(e){return e instanceof cT&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class uT{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new JC(this,e,t):null}createEvent(e,t){Xr(null!=e.childName,"Child events should have a childName.");const n=iT(new tT(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new XC(e.type,this,new nT(e.snapshotNode,n,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof uT&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))}hasAnyCallback(){return!!this.callbackContext}}function hT(e,t,n,r,i){let s;if("object"===typeof r&&(s=void 0,i=r),"function"===typeof r&&(s=r),i&&i.onlyOnce){const t=n,r=(n,r)=>{LC(e._repo,e,a),t(n,r)};r.userCallback=n.userCallback,r.context=n.context,n=r}const o=new ZC(n,s||void 0),a="value"===t?new cT(o):new uT(t,o);return function(e,t,n){let r;r=".info"===$w(t._path)?OS(e.infoSyncTree_,t,n):OS(e.serverSyncTree_,t,n),bC(e.eventQueue_,t._path,r)}(e._repo,e,a),()=>LC(e._repo,e,a)}function dT(e,t,n,r){return hT(e,"value",t,n,r)}function fT(e,t,n){let r=null;const i=n?new ZC(n):null;"value"===t?r=new cT(i):t&&(r=new uT(t,i)),LC(e._repo,e,r)}!function(e){Xr(!uS,"__referenceConstructor has already been defined"),uS=e}(tT),function(e){Xr(!hS,"__referenceConstructor has already been defined"),hS=e}(tT);const pT={};let gT=!1;function mT(e,t,n,r,i){let s=r||e.options.databaseURL;void 0===s&&(e.options.projectId||aw("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),iw("Using default host for project ",e.options.projectId),s="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));let o,a,l=QC(s,i),c=l.repoInfo;"undefined"!==typeof process&&(a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyAOZkZ8FGkHv6J4xD-yckuKOasuO4zEF2c",REACT_APP_FIREBASE_APP_ID:"1:37869262835:web:9d463c1b217727d88e6486",REACT_APP_FIREBASE_AUTH_DOMAIN:"sortly-1b701.firebaseapp.com",REACT_APP_FIREBASE_DATABASE_URL:"https://sortly-1b701-default-rtdb.europe-west1.firebasedatabase.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"37869262835",REACT_APP_FIREBASE_PROJECT_ID:"sortly-1b701",REACT_APP_FIREBASE_STORAGE_BUCKET:"sortly-1b701.firebasestorage.app"}.FIREBASE_DATABASE_EMULATOR_HOST),a?(o=!0,s="http://".concat(a,"?ns=").concat(c.namespace),l=QC(s,i),c=l.repoInfo):o=!l.repoInfo.secure;const u=i&&o?new Tw(Tw.OWNER):new Cw(e.name,e.options,t);vC("Invalid Firebase Database URL",l),rb(l.path)||aw("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function(e,t,n,r){let i=pT[t.name];i||(i={},pT[t.name]=i);let s=i[e.toURLString()];s&&aw("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return s=new IC(e,gT,n,r),i[e.toURLString()]=s,s}(c,e,u,new Sw(e,n));return new yT(h,e)}class yT{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(kC(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new tT(this._repo,Yw())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=pT[t];n&&n[e.key]===e||aw("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),MC(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&aw("Cannot call "+e+" on a deleted database.")}}fb.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},fb.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){W_(lo),ro(new Bi("database",(e,t)=>{let{instanceIdentifier:n}=t;return mT(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)},"PUBLIC").setMultipleInstances(!0)),ho(q_,B_,e),ho(q_,B_,"esm2017")}();const vT=co({apiKey:"AIzaSyAOZkZ8FGkHv6J4xD-yckuKOasuO4zEF2c",authDomain:"sortly-1b701.firebaseapp.com",projectId:"sortly-1b701",storageBucket:"sortly-1b701.firebasestorage.app",messagingSenderId:"37869262835",appId:"1:37869262835:web:9d463c1b217727d88e6486",databaseURL:"https://sortly-1b701-default-rtdb.europe-west1.firebasedatabase.app"}),_T=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uo();const t=io(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=io(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(Di(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;No(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Mc,persistence:[Gl,Nl,Ol]}),r=fi("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Vc)return;const r=null===t||void 0===t?void 0:t.token;zc!==r&&(zc=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){qi(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){qi(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var i;const s=ui("auth");return s&&Ya(n,"http://".concat(s)),n}(vT),wT=function(e,t){const n="object"==typeof e?e:uo(),r="string"==typeof e?e:t||id,i=io(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=hi("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=bv(e,Iv))._getSettings(),o=Object.assign(Object.assign({},s),{emulatorOptions:e._getEmulatorOptions()}),a="".concat(t,":").concat(n);s.host!==Sv&&s.host!==a&&hu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=Object.assign(Object.assign({},s),{host:a,ssl:!1,emulatorOptions:r});if(!Di(l,o)&&(e._setSettings(l),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=su.MOCK_USER;else{t=gi(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new yu(mu.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new su(s)}e._authCredentials=new bu(new _u(t,n))}}(i,...e)}return i}(vT),bT=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uo(),t=arguments.length>1?arguments[1]:void 0;const n=io(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const e=hi("database");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=qi(e),e._checkNotDeleted("useEmulator");const i="".concat(t,":").concat(n),s=e._repoInternal;if(e._instanceStarted){if(i===e._repoInternal.repoInfo_.host&&Di(r,s.repoInfo_.emulatorOptions))return;aw("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&aw('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Tw(Tw.OWNER);else if(r.mockUserToken){const t="string"===typeof r.mockUserToken?r.mockUserToken:gi(r.mockUserToken,e.app.options.projectId);o=new Tw(t)}!function(e,t,n,r){e.repoInfo_=new Ow(t,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(e.authTokenProvider_=r)}(s,i,r,o)}(n,...e)}return n}(vT),ET=(0,r.createContext)();function ST(){return(0,r.useContext)(ET)}function CT(e){let{children:t}=e;const[n,i]=(0,r.useState)(null),[s,o]=(0,r.useState)(!0);(0,r.useEffect)(()=>{const e=function(e,t,n,r){return qi(e).onAuthStateChanged(t,n,r)}(_T,e=>{i(e),o(!1)});return e},[]);const a={currentUser:n,signup:function(e,t){return async function(e,t,n){if(so(e.app))return Promise.reject(Do(e));const r=ja(e),i=Ka(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",gl,"EMAIL_PASSWORD_PROVIDER"),s=await i.catch(t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Cl(e),t}),o=await ml._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}(_T,e,t)},login:function(e,t){return function(e,t,n){return so(e.app)?Promise.reject(Do(e)):Sl(qi(e),ll.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Cl(e),t})}(_T,e,t)},logout:function(){return function(e){return qi(e).signOut()}(_T)}};return(0,Re.jsx)(ET.Provider,{value:a,children:!s&&t})}const TT={getAvatarOptions:()=>[{id:"default",url:"https://api.dicebear.com/7.x/avataaars/svg?seed=default",name:"Default"},{id:"happy",url:"https://api.dicebear.com/7.x/avataaars/svg?seed=happy",name:"Happy"},{id:"cool",url:"https://api.dicebear.com/7.x/avataaars/svg?seed=cool",name:"Cool"},{id:"smart",url:"https://api.dicebear.com/7.x/avataaars/svg?seed=smart",name:"Smart"},{id:"friendly",url:"https://api.dicebear.com/7.x/avataaars/svg?seed=friendly",name:"Friendly"},{id:"adventurous",url:"https://api.dicebear.com/7.x/avataaars/svg?seed=adventurous",name:"Adventurous"},{id:"creative",url:"https://api.dicebear.com/7.x/avataaars/svg?seed=creative",name:"Creative"},{id:"mysterious",url:"https://api.dicebear.com/7.x/avataaars/svg?seed=mysterious",name:"Mysterious"}]},IT="users",kT={async getUserProfile(e){try{const t=await R_(Ov(wT,IT,e));if(t.exists())return t.data();const n={nickname:"",country:"",avatarUrl:TT.getAvatarOptions()[0].url,createdAt:new Date};return await this.updateUserProfile(e,n),n}catch(ow){throw console.error("Error getting user profile:",ow),ow}},async updateUserProfile(e,t){try{const n=Ov(wT,IT,e);await j_(n,is(is({},t),{},{updatedAt:new Date}),{merge:!0})}catch(ow){throw console.error("Error updating user profile:",ow),ow}},async updateProfileField(e,t,n){try{const r=Ov(wT,IT,e);await function(e,t,n){e=bv(e,xv);const r=bv(e.firestore,Rv),i=Qv(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=qi(t))||t instanceof Fv?Zv(i,"updateDoc",e._key,t,n,a):Jv(i,"updateDoc",e._key,t),U_(r,[s.toMutation(e._key,ep.exists(!0))])}(r,{[t]:n,updatedAt:new Date})}catch(ow){throw console.error("Error updating profile field:",ow),ow}}};function xT(){const{currentUser:e,login:t,signup:n,logout:i}=ST(),[s,o]=(0,r.useState)(""),[a,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[h,d]=(0,r.useState)(!1),[f,p]=(0,r.useState)(!1),[g,m]=(0,r.useState)(null),y=ne();return(0,r.useEffect)(()=>{(async()=>{if(e)try{const t=await kT.getUserProfile(e.uid);m(t)}catch(c){console.error("Error loading user profile:",c)}})()},[e]),e?(0,Re.jsxs)("div",{className:"login-button",children:[(0,Re.jsxs)("div",{className:"user-profile-button",onClick:()=>y("/profile"),children:[(0,Re.jsx)("img",{src:(null===g||void 0===g?void 0:g.avatarUrl)||TT.getAvatarOptions()[0].url,alt:"Profile",className:"header-avatar"}),(0,Re.jsx)("span",{className:"user-name",children:(null===g||void 0===g?void 0:g.nickname)||e.email})]}),(0,Re.jsx)("button",{onClick:async function(){try{u(""),d(!0),await i(),y("/")}catch(c){u("Failed to log out: "+c.message)}d(!1)},disabled:h,className:"logout-button",children:"Log Out"})]}):(0,Re.jsx)("div",{className:"login-button",children:f?(0,Re.jsxs)("div",{className:"login-form",children:[(0,Re.jsx)("input",{type:"email",value:s,onChange:e=>o(e.target.value),placeholder:"Email",required:!0}),(0,Re.jsx)("input",{type:"password",value:a,onChange:e=>l(e.target.value),placeholder:"Password",required:!0}),(0,Re.jsxs)("div",{className:"login-buttons",children:[(0,Re.jsx)("button",{onClick:async function(e){e.preventDefault();try{u(""),d(!0),await t(s,a),p(!1),y("/profile")}catch(c){u("Failed to log in: "+c.message)}d(!1)},disabled:h,children:"Login"}),(0,Re.jsx)("button",{onClick:async function(e){e.preventDefault();try{u(""),d(!0),await n(s,a),p(!1),y("/profile")}catch(c){u("Failed to create an account: "+c.message)}d(!1)},disabled:h,children:"Sign Up"}),(0,Re.jsx)("button",{onClick:()=>p(!1),children:"Cancel"})]}),c&&(0,Re.jsx)("p",{style:{color:"red"},children:c})]}):(0,Re.jsx)("button",{onClick:()=>p(!0),children:"Login / Sign Up"})})}const NT=e=>e&&e[0].toUpperCase()+e.slice(1);const PT=function(){const[e,t]=(0,r.useState)(!1),n=ne(),i=()=>{t(!1)},s=[{name:"classic",label:"Classic"},{name:"cooperation",label:"Cooperation"},{name:"battleroyale",label:"Battle Royale"}];return(0,Re.jsx)("header",{className:"header",children:(0,Re.jsxs)("div",{className:"header-container",children:[(0,Re.jsxs)(Pe,{to:"/",className:"header-logo",onClick:i,children:[(0,Re.jsx)("img",{src:Kr,alt:"Sortly Logo",className:"logo-image"}),(0,Re.jsx)("span",{className:"site-name",children:"Sortly"})]}),(0,Re.jsx)("button",{className:"menu-button",onClick:()=>{t(!e)},children:"\u2630"}),(0,Re.jsxs)("nav",{className:"header-nav ".concat(e?"active":""),children:[(0,Re.jsx)(Pe,{to:"/",className:"nav-link",onClick:i,children:"Home"}),["population","area","gini"].map(e=>(0,Re.jsxs)("div",{className:"nav-dropdown",children:[(0,Re.jsx)("button",{className:"nav-link dropdown-toggle",children:NT(e)}),(0,Re.jsx)("div",{className:"dropdown-menu",children:s.map(t=>(0,Re.jsx)("button",{className:"dropdown-item",onClick:()=>function(e){n(e,{state:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}}),i()}("/game/".concat(e,"/").concat(t.name),"classic"===t.name?{category:e}:{}),children:t.label},t.name))})]},e)),(0,Re.jsx)(Pe,{to:"/leaderboard",className:"nav-link",onClick:i,children:"Leaderboard"}),(0,Re.jsx)("div",{className:"nav-login",children:(0,Re.jsx)(xT,{})})]})]})})};const OT=function(){return(0,Re.jsx)("footer",{className:"footer",children:(0,Re.jsxs)("div",{className:"footer-container",children:[(0,Re.jsx)("img",{src:Kr,alt:"Sortly Logo",className:"footer-logo"}),(0,Re.jsxs)("p",{children:["\xa9 ",(new Date).getFullYear()," Sortly. All rights reserved."]})]})})},DT=e=>{let{title:t,description:n,keywords:r,image:i,url:s,type:o,schema:a}=e;const l="Sortly - Interactive Country Sorting Game",c=n||"Challenge yourself with Sortly, the interactive sorting game. Sort countries by population or area and test your knowledge!",u=r||"sortly, sorting game, countries, population, area, game, interactive, geography",h=i||"".concat(window.location.origin,"/logo512.png"),d=s||window.location.href,f=o||"website";return(0,Re.jsxs)(Wr,{children:[(0,Re.jsx)("title",{children:t?"".concat(t," | Sortly"):l}),(0,Re.jsx)("meta",{name:"description",content:c}),(0,Re.jsx)("meta",{name:"keywords",content:u}),(0,Re.jsx)("meta",{property:"og:type",content:f}),(0,Re.jsx)("meta",{property:"og:url",content:d}),(0,Re.jsx)("meta",{property:"og:title",content:t||l}),(0,Re.jsx)("meta",{property:"og:description",content:c}),(0,Re.jsx)("meta",{property:"og:image",content:h}),(0,Re.jsx)("meta",{name:"twitter:card",content:"summary_large_image"}),(0,Re.jsx)("meta",{name:"twitter:url",content:d}),(0,Re.jsx)("meta",{name:"twitter:title",content:t||l}),(0,Re.jsx)("meta",{name:"twitter:description",content:c}),(0,Re.jsx)("meta",{name:"twitter:image",content:h}),a&&(0,Re.jsx)("script",{type:"application/ld+json",children:JSON.stringify(a)})]})},AT=n.p+"static/media/population.5f01d14d3649796eeee6.jpg",RT=n.p+"static/media/area.9c56856dd8f399e4c888.jpg",LT=n.p+"static/media/gini.496d644c292a01288b01.jpg",MT=e=>e&&e[0].toUpperCase()+e.slice(1);const jT=function(){const e=ne(),t=[{name:"population",image:AT},{name:"area",image:RT},{name:"gini",image:LT}],n=["classic","cooperation","battleroyale"];return(0,Re.jsxs)("div",{className:"homepage",children:[(0,Re.jsx)(DT,{title:"Sortly - Interactive Country Sorting Game",description:"Challenge yourself sort countries by population, area, or Gini index. Test your geography knowledge with Sortly!",keywords:"sortly, geography game, sort countries, population, area, gini index, educational game",schema:{"@context":"https://schema.org","@type":"SoftwareApplication",name:"Sortly",applicationCategory:"Game",operatingSystem:"Any",offers:{"@type":"Offer",price:"0",priceCurrency:"USD"},publisher:{"@type":"Organization",name:"Sortly",url:"https://sortly.de",logo:{"@type":"ImageObject",url:"https://sortly.de/logo512.png"}}}}),t.map(t=>(0,Re.jsx)("div",{className:"section ".concat(t.name,"-section"),style:{backgroundImage:"url(".concat(t.image,")"),backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat"},children:(0,Re.jsxs)("div",{className:"overlay",children:[(0,Re.jsxs)("h2",{children:["Sort by ",MT(t.name)]}),(0,Re.jsx)("div",{className:"mode-buttons ".concat(t.name,"-modes"),children:n.map(n=>(0,Re.jsxs)("button",{className:"button button-primary",onClick:()=>((t,n)=>{const r="battleRoyale"===n?"Battle Royale":MT(n),i=MT(t),s="/game/".concat(t,"/").concat(n);console.log("Navigating to: ".concat(s)),Gr.Ay.event({category:"Game Navigation",action:"Clicked Play ".concat(i," ").concat(r),label:"".concat(i," - ").concat(r)}),"classic"===n?e(s,{state:{category:t}}):"cooperation"===n||"battleroyale"===n?e(s):console.error("Unknown mode for navigation:",n)})(t.name,n),children:["battleroyale"===n?"Battle Royale":MT(n)," Mode"]},n))})]})},t.name))]})},FT=e=>{if(!e||"object"!==typeof e||0===Object.keys(e).length)return null;const t=e[Object.keys(e).sort().pop()];return"number"===typeof t?t:null},UT=async()=>{try{const e="https://restcountries.com/v3.1/all?fields=name,flags,population,area,gini,unMember",t=await fetch(e);if(!t.ok)throw new Error("HTTP error! status: ".concat(t.status));const n=await t.json();if(!Array.isArray(n))throw new Error("Invalid data format received from API");const r=n.filter(e=>{var t,n;const r=FT(e.gini);return e.unMember&&(null===(t=e.name)||void 0===t?void 0:t.common)&&(null===(n=e.flags)||void 0===n?void 0:n.svg)&&"number"===typeof e.population&&"number"===typeof e.area&&null!==r}).map((e,t)=>({id:e.name.common,name:e.name.common,flagUrl:e.flags.svg,population:e.population,area:e.area,gini:FT(e.gini)}));return console.log("Fetched ".concat(r.length," countries with valid Pop, Area, and Gini.")),r.length<2&&console.warn("Fetched fewer than 2 countries with valid data including Gini."),r}catch(ow){throw console.error("Error fetching countries:",ow),new Error("Failed to fetch countries data. Please try again later.")}};const VT=function(e){let{country:t,mode:n,statisticValue:i,isFlippable:s,isClickable:o,highlight:a,onClick:l,customClassName:c}=e;const[u,h]=(0,r.useState)(!1),d=a?"highlighted-".concat(a):"";return(0,Re.jsx)("div",{className:"country-card ".concat(s?"flippable":""," ").concat(u?"flipped":""," ").concat(o?"clickable":""," ").concat(d," ").concat(c||""),onClick:()=>{s?h(!u):o&&l&&l()},children:(0,Re.jsxs)("div",{className:"card-inner",children:[(0,Re.jsxs)("div",{className:"card-face card-front ".concat(d),children:[(0,Re.jsx)("img",{src:t.flagUrl,alt:"Flag of ".concat(t.name),className:"country-flag"}),(0,Re.jsx)("div",{className:"country-info",children:(0,Re.jsx)("h3",{className:"country-name",children:t.name})})]}),(0,Re.jsx)("div",{className:"card-face card-back ".concat(d),children:(0,Re.jsxs)("div",{className:"country-info",children:[(0,Re.jsx)("h3",{className:"country-name",children:t.name}),(0,Re.jsx)("p",{className:"country-detail",children:(()=>{const e="number"!==typeof(t=i)?"":"gini"===n?t.toFixed(1):t.toLocaleString();var t;switch(n){case"population":return"Population: ".concat(e);case"area":return"Area: ".concat(e," km\xb2");case"gini":return"Gini Index: ".concat(e);default:return""}})()})]})})]})})};var zT=n(122);const qT="undefined"!==typeof window?r.useLayoutEffect:r.useEffect;function BT(e,t,n){const[i,s]=function(e,t,n){const[i,s]=(0,r.useState)(()=>t(e)),o=(0,r.useCallback)(()=>{const r=t(e);zT(i,r)||(s(r),n&&n())},[i,e,n]);return qT(o),[i,o]}(e,t,n);return qT(function(){const t=e.getHandlerId();if(null!=t)return e.subscribeToStateChange(s,{handlerIds:[t]})},[e,s]),i}function HT(e,t,n){return BT(t,e||(()=>({})),()=>n.reconnect())}function WT(e,t){const n=[...t||[]];return null==t&&"function"!==typeof e&&n.push(e),(0,r.useMemo)(()=>"function"===typeof e?e():e,n)}function GT(e){return(0,r.useMemo)(()=>e.hooks.dragSource(),[e])}function KT(e){return(0,r.useMemo)(()=>e.hooks.dragPreview(),[e])}function QT(e,t,n,r){let i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;const s=Object.keys(e),o=Object.keys(t);if(s.length!==o.length)return!1;const a=Object.prototype.hasOwnProperty.bind(t);for(let l=0;l<s.length;l++){const o=s[l];if(!a(o))return!1;const c=e[o],u=t[o];if(i=n?n.call(r,c,u,o):void 0,!1===i||void 0===i&&c!==u)return!1}return!0}function YT(e){return null!==e&&"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function $T(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!(0,r.isValidElement)(t)){const r=t;return e(r,n),r}const i=t;!function(e){if("string"===typeof e.type)return;const t=e.type.displayName||e.type.name||"the component";throw new Error("Only native element nodes can now be passed to React DnD connectors."+"You can either wrap ".concat(t," into a <div>, or turn it into a ")+"drag source or a drop target itself.")}(i);return function(e,t){const n=e.ref;return ze("string"!==typeof n,"Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),n?(0,r.cloneElement)(e,{ref:e=>{JT(n,e),JT(t,e)}}):(0,r.cloneElement)(e,{ref:t})}(i,n?t=>e(t,n):e)}}function XT(e){const t={};return Object.keys(e).forEach(n=>{const r=e[n];if(n.endsWith("Ref"))t[n]=e[n];else{const e=$T(r);t[n]=()=>e}}),t}function JT(e,t){"function"===typeof e?e(t):e.current=t}class ZT{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,t=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return t&&this.disconnectDragSource(),this.handlerId?e?(t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),t):(this.lastConnectedDragSource=e,t):t}reconnectDragPreview(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.dragPreview,n=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();n&&this.disconnectDragPreview(),this.handlerId&&(t?n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=t,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,t,this.dragPreviewOptions)):this.lastConnectedDragPreview=t)}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!QT(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!QT(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=XT({dragSource:(e,t)=>{this.clearDragSource(),this.dragSourceOptions=t||null,YT(e)?this.dragSourceRef=e:this.dragSourceNode=e,this.reconnectDragSource()},dragPreview:(e,t)=>{this.clearDragPreview(),this.dragPreviewOptions=t||null,YT(e)?this.dragPreviewRef=e:this.dragPreviewNode=e,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}function eI(){const{dragDropManager:e}=(0,r.useContext)(Bt);return ze(null!=e,"Expected drag drop context"),e}let tI=!1,nI=!1;class rI{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){ze(!tI,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return tI=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{tI=!1}}isDragging(){if(!this.sourceId)return!1;ze(!nI,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return nI=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{nI=!1}}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,t){return this.internalMonitor.isOverTarget(e,t)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}class iI{beginDrag(){const e=this.spec,t=this.monitor;let n=null;return n="object"===typeof e.item?e.item:"function"===typeof e.item?e.item(t):{},null!==n&&void 0!==n?n:null}canDrag(){const e=this.spec,t=this.monitor;return"boolean"===typeof e.canDrag?e.canDrag:"function"!==typeof e.canDrag||e.canDrag(t)}isDragging(e,t){const n=this.spec,r=this.monitor,{isDragging:i}=n;return i?i(r):t===e.getSourceId()}endDrag(){const e=this.spec,t=this.monitor,n=this.connector,{end:r}=e;r&&r(t.getItem(),t),n.reconnect()}constructor(e,t,n){this.spec=e,this.monitor=t,this.connector=n}}function sI(e,t,n){const i=eI(),s=function(e,t,n){const i=(0,r.useMemo)(()=>new iI(e,t,n),[t,n]);return(0,r.useEffect)(()=>{i.spec=e},[e]),i}(e,t,n),o=function(e){return(0,r.useMemo)(()=>{const t=e.type;return ze(null!=t,"spec.type must be defined"),t},[e])}(e);qT(function(){if(null!=o){const[e,r]=function(e,t,n){const r=n.getRegistry(),i=r.addSource(e,t);return[i,()=>r.removeSource(i)]}(o,s,i);return t.receiveHandlerId(e),n.receiveHandlerId(e),r}},[i,t,n,s,o])}function oI(e,t){const n=WT(e,t);ze(!n.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const i=function(){const e=eI();return(0,r.useMemo)(()=>new rI(e),[e])}(),s=function(e,t){const n=eI(),i=(0,r.useMemo)(()=>new ZT(n.getBackend()),[n]);return qT(()=>(i.dragSourceOptions=e||null,i.reconnect(),()=>i.disconnectDragSource()),[i,e]),qT(()=>(i.dragPreviewOptions=t||null,i.reconnect(),()=>i.disconnectDragPreview()),[i,t]),i}(n.options,n.previewOptions);return sI(n,i,s),[HT(n.collect,i,s),GT(s),KT(s)]}function aI(e){return(0,r.useMemo)(()=>e.hooks.dropTarget(),[e])}class lI{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const t=this.dropTarget;this.handlerId&&(t?e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions)):this.lastConnectedDropTarget=t)}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!QT(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=XT({dropTarget:(e,t)=>{this.clearDropTarget(),this.dropTargetOptions=t,YT(e)?this.dropTargetRef=e:this.dropTargetNode=e,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}let cI=!1;class uI{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}canDrop(){if(!this.targetId)return!1;ze(!cI,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return cI=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{cI=!1}}isOver(e){return!!this.targetId&&this.internalMonitor.isOverTarget(this.targetId,e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}class hI{canDrop(){const e=this.spec,t=this.monitor;return!e.canDrop||e.canDrop(t.getItem(),t)}hover(){const e=this.spec,t=this.monitor;e.hover&&e.hover(t.getItem(),t)}drop(){const e=this.spec,t=this.monitor;if(e.drop)return e.drop(t.getItem(),t)}constructor(e,t){this.spec=e,this.monitor=t}}function dI(e,t,n){const i=eI(),s=function(e,t){const n=(0,r.useMemo)(()=>new hI(e,t),[t]);return(0,r.useEffect)(()=>{n.spec=e},[e]),n}(e,t),o=function(e){const{accept:t}=e;return(0,r.useMemo)(()=>(ze(null!=e.accept,"accept must be defined"),Array.isArray(t)?t:[t]),[t])}(e);qT(function(){const[e,r]=function(e,t,n){const r=n.getRegistry(),i=r.addTarget(e,t);return[i,()=>r.removeTarget(i)]}(o,s,i);return t.receiveHandlerId(e),n.receiveHandlerId(e),r},[i,t,s,n,o.map(e=>e.toString()).join("|")])}function fI(e,t){const n=WT(e,t),i=function(){const e=eI();return(0,r.useMemo)(()=>new uI(e),[e])}(),s=function(e){const t=eI(),n=(0,r.useMemo)(()=>new lI(t.getBackend()),[t]);return qT(()=>(n.dropTargetOptions=e||null,n.reconnect(),()=>n.disconnectDropTarget()),[e]),n}(n.options);return dI(n,i,s),[HT(n.collect,i,s),aI(s)]}const pI="card",gI=e=>{let{country:t,mode:n,statisticValue:r}=e;const[{isDragging:i},s]=oI(()=>({type:pI,item:{country:t},collect:e=>({isDragging:!!e.isDragging()})}));return(0,Re.jsx)("div",{ref:s,style:{opacity:i?.5:1,cursor:"move",width:"100%",maxWidth:"220px",display:"flex",justifyContent:"center",alignItems:"center",touchAction:"none"},children:(0,Re.jsx)(VT,{country:t,mode:n,statisticValue:r,isFlippable:!1,isClickable:!1})})},mI=e=>{let{onDrop:t,index:n,isEmpty:r}=e;const[{isOver:i,canDrop:s},o]=fI(()=>({accept:pI,drop:e=>t(n,e.country),collect:e=>({isOver:!!e.isOver(),canDrop:!!e.canDrop()})}));let a="drop-zone";return i&&s&&(a+=" active-drop"),r&&(a+=" empty-drop"),(0,Re.jsx)("div",{ref:o,className:a})},yI=e=>"string"!==typeof e||0===e.length?e:e.charAt(0).toUpperCase()+e.slice(1);const vI=function(e){let{category:t="population"}=e;const[n,i]=(0,r.useState)([]),[s,o]=(0,r.useState)([]),[a,l]=(0,r.useState)(null),[c,u]=(0,r.useState)(0),[h,d]=(0,r.useState)("loading"),[f,p]=(0,r.useState)(!0),[g,m]=(0,r.useState)(null),y=ne();(0,r.useEffect)(()=>{(async()=>{p(!0),m(null);try{const e=(await UT()).filter(e=>"undefined"!==typeof e[t]&&null!==e[t]);if(e.length<2)return m("Not enough countries found with valid data for category: ".concat(t,".")),d("ended"),void p(!1);const n=e.sort(()=>.5-Math.random()),r=[n[0],n[1]].sort((e,n)=>{var r,i;return(null!==(r=e[t])&&void 0!==r?r:0)-(null!==(i=n[t])&&void 0!==i?i:0)}),s=r[0],a=r[1];o([s]),l(a),i(n.slice(2).sort(()=>.5-Math.random())),u(1),d("placing")}catch(e){console.error("Failed to load countries for category ".concat(t,":"),e),m(e.message||"Failed to load game data for ".concat(t,".")),d("ended")}finally{p(!1)}})()},[t]);const v=(0,r.useCallback)(()=>{if(n.length>0){const e=n[0];l(e),i(n.slice(1)),d("placing")}else d("ended"),y("/gameover",{state:{score:c,message:"Congratulations! You sorted all countries by ".concat("gini"===t?"Gini index":yI(t),"!"),category:t,gameMode:"classic_".concat(t)},replace:!0})},[n,c,t,y]),_=e=>{if(!a||"placing"!==h)return;const n=a,r=[...s];r.splice(e,0,n);let i=!0;var f,p,g,m;e>0&&(i=i&&(null!==(f=r[e-1][t])&&void 0!==f?f:0)<=(null!==(p=n[t])&&void 0!==p?p:0));e<r.length-1&&(i=i&&(null!==(g=n[t])&&void 0!==g?g:0)<=(null!==(m=r[e+1][t])&&void 0!==m?m:0));if(i)o(r),u(c+1),l(null),d("picking");else{const r=[...s],i=n,o=e,a=[...s];a.splice(e,0,i),d("ended"),y("/gameover",{state:{score:c,message:"Incorrect placement based on ".concat("gini"===t?"Gini index":yI(t),". Game Over!"),category:t,gameMode:"classic_".concat(t),finalSortedList:r,incorrectCountry:i,attemptedIndex:o,userOrder:a},replace:!0})}};return(0,r.useEffect)(()=>{"picking"===h&&v()},[h,v]),f?(0,Re.jsx)("div",{className:"game-mode-loading",children:"Loading Classic Game..."}):g?(0,Re.jsxs)("div",{className:"game-mode-error",children:["Error: ",g," ",(0,Re.jsx)("button",{onClick:()=>window.location.reload(),children:"Retry"})]}):(0,Re.jsxs)("div",{className:"game-mode classic-mode",children:[(0,Re.jsxs)("h2",{children:["Classic Mode - Sort by ","gini"===t?"Gini Index":yI(t)," (Lowest to Highest)"]}),(0,Re.jsxs)("p",{children:["Score: ",c>0?c-1:0]}),(0,Re.jsx)("div",{className:"sorted-countries-container",children:(0,Re.jsxs)("div",{className:"sorted-countries",children:[a&&"placing"===h&&(0,Re.jsx)(mI,{index:0,onDrop:e=>_(e),isEmpty:0===s.length}),s.map((e,n)=>(0,Re.jsxs)(r.Fragment,{children:[(0,Re.jsx)(VT,{country:e,mode:t,statisticValue:e[t],isFlippable:!0,isClickable:!1}),a&&"placing"===h&&(0,Re.jsx)(mI,{index:n+1,onDrop:e=>_(e)})]},"fragment-".concat(e.id)))]})}),"placing"===h&&a&&(0,Re.jsxs)("div",{className:"current-country",children:[(0,Re.jsx)("h3",{children:"Drag this Country to Place It:"}),(0,Re.jsx)("div",{className:"current-country-wrapper",title:"".concat(a.name," - drag me!"),style:{maxWidth:"220px",margin:"0 auto"},children:(0,Re.jsx)(gI,{country:a,mode:t,statisticValue:a[t]})})]})]})},_I="gameStates",wI={async initializeGameState(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"population";try{if(n=await UT(),n.sort((e,t)=>{var n,i;return(null!==(n=e[r])&&void 0!==n?n:0)-(null!==(i=t[r])&&void 0!==i?i:0)}),!n||n.length<11)throw new Error("Not enough valid countries fetched to start cooperation mode for category ".concat(r,"."))}catch(h){throw console.error("Failed to fetch countries for initialization:",h),new Error("Could not fetch country data for category ".concat(r," to start the game."))}const i=((o=11)>(s=n).length&&(console.warn("Requested more elements than available"),o=s.length),[...s].sort(()=>.5-Math.random()).slice(0,o));var s,o;const a=i[0],l=i.slice(1).sort((e,t)=>.5-Math.random()),c=rT(bT,"".concat(_I,"/").concat(e)),u={lobbyId:e,category:r,currentPlayer:t[0].id,players:t,mode:"choosing",sortedCountries:[a],remainingCountries:l,currentCountry:null,score:1,status:"playing",createdAt:Date.now(),lastUpdated:Date.now()};await oT(c,u),console.log("Initialized ".concat(r," cooperation game state for lobby"),e)},subscribeToGameState(e,t){const n=rT(bT,"".concat(_I,"/").concat(e)),r=dT(n,e=>{const n=e.val();t(n)},e=>{console.error("Error subscribing to game state:",e),t(null)});return()=>fT(n,"value",r)},async updateGameState(e,t){const n=rT(bT,"".concat(_I,"/").concat(e));await aT(n,is(is({},t),{},{lastUpdated:Date.now()}))},async chooseCard(e,t,n){const r=rT(bT,"".concat(_I,"/").concat(e)),i=(await lT(r)).val();if(!i||"playing"!==i.status)throw new Error("Game is not active or not found");if("choosing"!==i.mode)throw new Error("Not in choosing mode");if(i.currentPlayer!==t)throw new Error("Not your turn to choose");if(!i.remainingCountries||!i.remainingCountries.some(e=>e.id===n.id))throw console.error("Chosen country ID not found in remaining:",null===n||void 0===n?void 0:n.id,i.remainingCountries),new Error("Chosen country is not valid or not in the remaining inventory");await aT(r,{currentCountry:n,mode:"placing",lastUpdated:Date.now()})},async placeCard(e,t,n){const r=rT(bT,"".concat(_I,"/").concat(e)),i=(await lT(r)).val();if(!i||"playing"!==i.status)throw new Error("Game is not active or not found");if("placing"!==i.mode)throw new Error("Not in placing mode");if(i.currentPlayer!==t)throw new Error("Not your turn to place");if(!i.currentCountry)throw new Error("No country currently chosen for placement");if("number"!==typeof n||n<0||n>i.sortedCountries.length)throw console.error("Invalid placement index received:",n,"Current sorted length:",i.sortedCountries.length),new Error("Invalid placement index");const s=i.category||"population",o=[...i.sortedCountries];o.splice(n,0,i.currentCountry);if((e=>{if(!Array.isArray(e))return console.error("isCorrect received non-array:",e),!1;for(let t=0;t<e.length-1;t++)if(!e[t]||!e[t+1]||"undefined"===typeof e[t][s]||"undefined"===typeof e[t+1][s]||e[t][s]>e[t+1][s])return console.warn("Incorrect order found at index ".concat(t," for category ").concat(s,":"),e[t][s],e[t+1][s]),!1;return!0})(o)){var a;const e=i.currentCountry.id;let n=i.remainingCountries||[];n=n.filter(t=>t.id!==e);let s=null===(a=i.players[0])||void 0===a?void 0:a.id;if(i.players.length>1){const e=i.players.findIndex(e=>e.id===t);s=i.players[(e+1)%i.players.length].id}const l={currentPlayer:s,sortedCountries:o,remainingCountries:n,currentCountry:null,mode:"choosing",score:i.score+1,lastUpdated:Date.now()};0===n.length&&(l.status="completed",l.result="win",l.mode="finished"),await aT(r,l)}else console.log("Incorrect placement by ".concat(t,". Ending game.")),await this.endGame(e)},async endGame(e){const t=rT(bT,"".concat(_I,"/").concat(e)),n=await lT(t);n.exists()&&"playing"===n.val().status?(await aT(t,{status:"completed",result:"lose",mode:"finished",currentCountry:null,lastUpdated:Date.now()}),console.log("Game ended with lose state for lobby:",e)):console.log("Game already completed or does not exist, skipping endGame call for lobby:",e)},async cleanupGameState(e){const t=rT(bT,"".concat(_I,"/").concat(e));await oT(t,null)}},bI=e=>e&&e[0].toUpperCase()+e.slice(1);const EI=function(e){var t,n;let{lobbyId:i,category:s="population"}=e;const{currentUser:o}=ST(),[a,l]=(0,r.useState)([]),[c,u]=(0,r.useState)(null),[h,d]=(0,r.useState)([]),[f,p]=(0,r.useState)(0),[g,m]=(0,r.useState)("waiting"),[y,v]=(0,r.useState)(null),_=ne(),w=(null===y||void 0===y?void 0:y.category)||s;(0,r.useEffect)(()=>{if(!i)return console.error("CooperationMode requires a lobbyId prop."),void _("/");const e=wI.subscribeToGameState(i,e=>{if(e){v(e),p(void 0!==e.score?e.score:0),l(e.sortedCountries||[]),u(e.currentCountry||null),d(e.remainingCountries||[]),m(e.status||"waiting");const t=e.category||"population";if("completed"===e.status){let n="Game Over!",r=e.score||0;const i="gini"===t?"Gini index":bI(t);"win"===e.result?n="Congratulations! You sorted all countries correctly by ".concat(i,"."):"lose"===e.result&&(n="Game Over! An incorrect move was made while sorting by ".concat(i,".")),_("/gameover",{state:{score:r,message:n,category:t,gameMode:"cooperation_".concat(t)},replace:!0})}}else console.error("Game state not found for lobby:",i),_("/")});return()=>e()},[i,_,o]);const b=async e=>{if(y&&o&&c&&y.currentPlayer===o.uid&&"placing"===y.mode)try{await wI.placeCard(y.lobbyId,o.uid,e)}catch(ow){console.error("Error placing card:",ow)}};if(!y||"waiting"===g)return(0,Re.jsx)("div",{className:"game-mode-loading",children:"Loading Cooperation Game..."});const E=y.currentPlayer===(null===o||void 0===o?void 0:o.uid),S=(null===(t=y.players)||void 0===t||null===(n=t.find(e=>e.id===y.currentPlayer))||void 0===n?void 0:n.name)||"Unknown",C="placing"===y.mode&&E&&c;return(0,Re.jsxs)("div",{className:"game-mode cooperation-mode",children:[" ",(0,Re.jsxs)("h2",{children:["Cooperation Mode - Sort by ","gini"===w?"Gini Index":bI(w)]}),(0,Re.jsxs)("p",{children:["Current Turn: ",S]}),(0,Re.jsxs)("p",{children:["Score: ",f]}),(0,Re.jsxs)("div",{className:"sorted-countries-container",children:[(0,Re.jsx)("h3",{children:"Sorted Countries:"}),(0,Re.jsxs)("div",{className:"sorted-countries",children:[C&&(0,Re.jsx)("button",{className:"place-button plus-button",onClick:()=>b(0),"aria-label":"Place card at the beginning",children:"+"}),a.map((e,t)=>(0,Re.jsxs)(r.Fragment,{children:[(0,Re.jsx)(VT,{country:e,mode:w,statisticValue:e[w],isFlippable:!0,isClickable:!1}),C&&(0,Re.jsx)("button",{className:"place-button plus-button",onClick:()=>b(t+1),"aria-label":"Place card after ".concat(e.name),children:"+"})]},"sorted-fragment-".concat(e.id))),0===a.length&&C&&(0,Re.jsx)("button",{className:"place-button plus-button",onClick:()=>b(0),"aria-label":"Place first card",children:"+"})]})]}),(0,Re.jsxs)("div",{className:"remaining-countries",children:[(0,Re.jsxs)("h3",{children:["Remaining Countries to Sort: (",h.length,")"]}),(0,Re.jsx)("div",{className:"remaining-countries-grid",children:h.map(e=>{const t="placing"===y.mode&&c&&e.id===c.id;return(0,Re.jsx)(VT,{country:e,mode:w,statisticValue:e[w],isFlippable:!1,isClickable:"choosing"===y.mode&&E,onClick:()=>"choosing"===y.mode&&E&&(async e=>{if(y&&o&&y.currentPlayer===o.uid&&"choosing"===y.mode)try{await wI.chooseCard(y.lobbyId,o.uid,e)}catch(ow){console.error("Error choosing card:",ow)}})(e),customClassName:t?"selected-for-placing":""},"remaining-".concat(e.id))})})]}),(0,Re.jsxs)("div",{className:"game-instructions",children:["choosing"===y.mode&&(E?(0,Re.jsx)("p",{children:"Choose a country from the remaining countries to place next."}):(0,Re.jsxs)("p",{children:["Waiting for ",S," to choose a country..."]})),"placing"===y.mode&&(E?(0,Re.jsxs)("p",{children:["Place ",null===c||void 0===c?void 0:c.name," in the correct position based on ","gini"===w?"Gini index":w,"."]}):(0,Re.jsxs)("p",{children:["Waiting for ",S," to place ",null===c||void 0===c?void 0:c.name,"..."]}))]})]})},SI="battleRoyaleGameStates",CI={async initializeGameState(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"population";if(t.length<2||t.length>8)throw new Error("Battle Royale mode requires between 2 and 8 players.");try{if(n=await UT(),n.sort((e,t)=>{var n,i;return(null!==(n=e[r])&&void 0!==n?n:0)-(null!==(i=t[r])&&void 0!==i?i:0)}),!n||n.length<26)throw new Error("Not enough valid countries fetched to start Battle Royale mode for category ".concat(r,". Need ").concat(26,"."))}catch(d){throw console.error("Failed to fetch countries for initialization:",d),new Error("Could not fetch country data for category ".concat(r," to start the game."))}const i=((o=26)>(s=n).length&&(console.warn("Requested more elements than available"),o=s.length),[...s].sort(()=>.5-Math.random()).slice(0,o));var s,o;const a=i[0],l=i.slice(1).sort((e,t)=>.5-Math.random()),c=t.map(e=>is(is({},e),{},{isActive:!0,score:0})),u=rT(bT,"".concat(SI,"/").concat(e)),h={lobbyId:e,category:r,gameType:"battleRoyale",currentPlayer:c[0].id,players:c,activePlayers:c.map(e=>e.id),mode:"choosing",sortedCountries:[a],remainingCountries:l,currentCountry:null,status:"playing",createdAt:Date.now(),lastUpdated:Date.now()};await oT(u,h),console.log("Initialized ".concat(r," Battle Royale game state for lobby"),e,"at path ".concat(SI,"/").concat(e))},subscribeToGameState(e,t){const n=rT(bT,"".concat(SI,"/").concat(e)),r=dT(n,e=>{const n=e.val();t(n)},e=>{console.error("Error subscribing to game state:",e),t(null)});return()=>fT(n,"value",r)},async updateGameState(e,t){const n=rT(bT,"".concat(SI,"/").concat(e));await aT(n,is(is({},t),{},{lastUpdated:Date.now()}))},async chooseCard(e,t,n){const r=rT(bT,"".concat(SI,"/").concat(e)),i=(await lT(r)).val();if(!i||"playing"!==i.status)throw new Error("Game is not active or not found");if("choosing"!==i.mode)throw new Error("Not in choosing mode");if(i.currentPlayer!==t)throw new Error("Not your turn to choose");const s=i.players.find(e=>e.id===t);if(!s||!s.isActive)throw new Error("You have been eliminated from the game.");if(!i.remainingCountries||!i.remainingCountries.some(e=>e.id===n.id))throw console.error("Chosen country ID not found in remaining:",null===n||void 0===n?void 0:n.id,i.remainingCountries),new Error("Chosen country is not valid or not in the remaining inventory");await aT(r,{currentCountry:n,mode:"placing",lastUpdated:Date.now()})},_findNextActivePlayer(e,t){const n=e.filter(e=>e.isActive);if(0===n.length)return null;const r=n.findIndex(e=>e.id===t);return-1===r||r===n.length-1?n[0].id:n[r+1].id},async placeCard(e,t,n){const r=rT(bT,"".concat(SI,"/").concat(e));let i=(await lT(r)).val();if(!i||"playing"!==i.status)throw new Error("Game is not active or not found");if("placing"!==i.mode)throw new Error("Not in placing mode");if(i.currentPlayer!==t)throw new Error("Not your turn to place");if(!i.currentCountry)throw new Error("No country currently chosen for placement");const s=i.players.find(e=>e.id===t);if(!s||!s.isActive)throw new Error("You have been eliminated from the game.");if("number"!==typeof n||n<0||n>i.sortedCountries.length)throw console.error("Invalid placement index received:",n,"Current sorted length:",i.sortedCountries.length),new Error("Invalid placement index");const o=i.category||"population",a=[...i.sortedCountries];a.splice(n,0,i.currentCountry);let l={};const c=i.players,u=i.currentCountry.id;if((e=>{if(!Array.isArray(e))return!1;for(let t=0;t<e.length-1;t++)if(!e[t]||!e[t+1]||"undefined"===typeof e[t][o]||"undefined"===typeof e[t+1][o]||e[t][o]>e[t+1][o])return console.warn("Incorrect order found at index ".concat(t," for category ").concat(o,":"),e[t][o],e[t+1][o]),!1;return!0})(a)){console.log("Correct placement by ".concat(t,"."));const e=(i.remainingCountries||[]).filter(e=>e.id!==u),n=c.findIndex(e=>e.id===t);-1!==n&&(c[n].score=(c[n].score||0)+1);l={players:c,currentPlayer:this._findNextActivePlayer(c,t),sortedCountries:a,remainingCountries:e,currentCountry:null,mode:"choosing",lastUpdated:Date.now()}}else{console.log("Incorrect placement by ".concat(t,". Eliminating player."));const e=c.findIndex(e=>e.id===t);-1!==e&&(c[e].isActive=!1);const n=c.filter(e=>e.isActive),r=n.map(e=>e.id);if(n.length<=1)console.log("Battle Royale finished. Winner determined."),l={players:c,activePlayers:r,status:"completed",mode:"finished",result:1===n.length?n[0].id:"draw",winner:1===n.length?n[0]:null,currentCountry:null,lastUpdated:Date.now()};else{l={players:c,activePlayers:r,currentPlayer:this._findNextActivePlayer(c,t),currentCountry:null,remainingCountries:(i.remainingCountries||[]).filter(e=>e.id!==u),mode:"choosing",lastUpdated:Date.now()}}}await aT(r,l)},async endGame(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=rT(bT,"".concat(SI,"/").concat(e)),r=await lT(n);if(r.exists()){const e=r.val();if("playing"===e.status){const r=e.players.find(e=>e.id===t);await aT(n,{status:"completed",result:t||"ended",winner:r||null,mode:"finished",currentCountry:null,lastUpdated:Date.now()}),console.log("Battle Royale game ended. Winner: ".concat(t||"N/A"))}else console.log("Game already completed, skipping endGame call.")}else console.log("Game state not found, cannot end game for lobby:",e)},async cleanupGameState(e){const t=rT(bT,"".concat(SI,"/").concat(e));await oT(t,null),console.log("Cleaned up Battle Royale game state for lobby:",e)}},TI=e=>e&&e[0].toUpperCase()+e.slice(1);const II=function(e){var t,n,i;let{lobbyId:s,category:o="population"}=e;const{currentUser:a}=ST(),[l,c]=(0,r.useState)([]),[u,h]=(0,r.useState)(null),[d,f]=(0,r.useState)([]),[p,g]=(0,r.useState)("waiting"),[m,y]=(0,r.useState)(null),v=ne(),_=(null===m||void 0===m?void 0:m.category)||o;(0,r.useEffect)(()=>{if(!s)return console.error("BattleRoyaleMode requires a lobbyId prop."),void v("/");const e=CI.subscribeToGameState(s,e=>{if(e){y(e),c(e.sortedCountries||[]),h(e.currentCountry||null),f(e.remainingCountries||[]),g(e.status||"waiting");const t=e.category||"population";if("completed"===e.status){let n="Battle Royale Over!",r="N/A",i=0;e.winner?(r=e.winner.name,i=e.winner.score||0,n="".concat(r," is the last one standing!")):"draw"===e.result&&(n="The Battle Royale ended in a draw!"),v("/gameover",{state:{score:i,message:n,winnerName:r,category:t,gameMode:"battleRoyale_".concat(t),finalPlayersState:e.players},replace:!0})}}else console.error("Game state not found for lobby:",s),v("/")});return()=>e()},[s,v]);const w=async e=>{if(!m||!a||!u)return;if(m.currentPlayer!==a.uid)return;if("placing"!==m.mode)return;const t=m.players.find(e=>e.id===a.uid);if(t&&t.isActive)try{await CI.placeCard(m.lobbyId,a.uid,e)}catch(ow){console.error("Error placing card:",ow)}else console.log("Cannot place card, you are eliminated.")};if(!m||"waiting"===p)return(0,Re.jsx)("div",{className:"game-mode-loading",children:"Loading Battle Royale..."});const b=null===(t=m.players)||void 0===t?void 0:t.find(e=>e.id===(null===a||void 0===a?void 0:a.uid)),E=m.currentPlayer===(null===a||void 0===a?void 0:a.uid)&&(null===b||void 0===b?void 0:b.isActive),S=null===b||void 0===b?void 0:b.isActive,C=null===(n=m.players)||void 0===n?void 0:n.find(e=>e.id===m.currentPlayer),T=(null===C||void 0===C?void 0:C.name)||"Unknown",I="choosing"===m.mode&&E,k="placing"===m.mode&&E&&u;return(0,Re.jsxs)("div",{className:"game-mode battle-royale-mode ".concat(S?"":"eliminated"),children:[" ",(0,Re.jsxs)("h2",{children:["Battle Royale - ","gini"===_?"Gini Index":TI(_)]}),(0,Re.jsxs)("div",{className:"player-status-container",children:[(0,Re.jsx)("h3",{children:"Players:"}),(0,Re.jsx)("ul",{children:null===(i=m.players)||void 0===i?void 0:i.map(e=>(0,Re.jsxs)("li",{className:"".concat(e.isActive?"":"eliminated-player"," ").concat(e.id===m.currentPlayer?"current-turn":""),children:[e.name," ",e.id===(null===a||void 0===a?void 0:a.uid)?"(You)":""," - Score: ",e.score||0," ",e.isActive?"":"(Eliminated)"]},e.id))})]}),!S&&(0,Re.jsx)("p",{className:"eliminated-message",children:"You have been eliminated!"}),(0,Re.jsxs)("p",{children:["Current Turn: ",T," ",m.currentPlayer===(null===a||void 0===a?void 0:a.uid)?"(Your Turn)":""]}),(0,Re.jsxs)("div",{className:"sorted-countries-container",children:[(0,Re.jsxs)("h3",{children:["Sorted Countries: (",l.length,")"]}),(0,Re.jsxs)("div",{className:"sorted-countries",children:[k&&(0,Re.jsx)("button",{className:"place-button plus-button",onClick:()=>w(0),"aria-label":"Place card at the beginning",disabled:!S,children:"+"}),l.map((e,t)=>(0,Re.jsxs)(r.Fragment,{children:[(0,Re.jsx)(VT,{country:e,mode:_,statisticValue:e[_],isFlippable:!0,isClickable:!1}),k&&(0,Re.jsx)("button",{className:"place-button plus-button",onClick:()=>w(t+1),"aria-label":"Place card after ".concat(e.name),disabled:!S,children:"+"})]},"sorted-fragment-".concat(e.id))),0===l.length&&k&&(0,Re.jsx)("button",{className:"place-button plus-button",onClick:()=>w(0),"aria-label":"Place first card",disabled:!S,children:"+"})]})]}),(0,Re.jsxs)("div",{className:"remaining-countries",children:[(0,Re.jsxs)("h3",{children:["Remaining Countries: (",d.length,")"]}),(0,Re.jsx)("div",{className:"remaining-countries-grid",children:d.map(e=>{const t="placing"===m.mode&&u&&e.id===u.id;return(0,Re.jsx)(VT,{country:e,mode:_,statisticValue:e[_],isFlippable:!1,isClickable:I,onClick:()=>I&&(async e=>{if(!m||!a)return;if(m.currentPlayer!==a.uid)return;if("choosing"!==m.mode)return;const t=m.players.find(e=>e.id===a.uid);if(t&&t.isActive)try{await CI.chooseCard(m.lobbyId,a.uid,e)}catch(ow){console.error("Error choosing card:",ow)}else console.log("Cannot choose card, you are eliminated.")})(e),customClassName:"".concat(t?"selected-for-placing":""," ").concat(S?"":"disabled-card")},"remaining-".concat(e.id))})})]}),(0,Re.jsxs)("div",{className:"game-instructions",children:[S&&"choosing"===m.mode&&(E?(0,Re.jsx)("p",{children:"Choose a country to place next."}):(0,Re.jsxs)("p",{children:["Waiting for ",T," to choose..."]})),S&&"placing"===m.mode&&(E?(0,Re.jsxs)("p",{children:["Place ",null===u||void 0===u?void 0:u.name," in the correct position based on ","gini"===_?"Gini index":_,"."]}):(0,Re.jsxs)("p",{children:["Waiting for ",T," to place ",null===u||void 0===u?void 0:u.name,"..."]})),!S&&"completed"!==p&&(0,Re.jsx)("p",{children:"Waiting for the remaining players..."})]})]})},kI=["population","area","gini"],xI=["classic","cooperation","battleroyale"];const NI=function(){var e;const{category:t,mode:n}=re(),r=Z(),i=kI.includes(null===t||void 0===t?void 0:t.toLowerCase()),s=xI.includes(null===n||void 0===n?void 0:n.toLowerCase());if(!i||!s)return console.error("Invalid category (".concat(t,") or mode (").concat(n,") accessed.")),(0,Re.jsx)(ye,{to:"/",replace:!0});const o=null===(e=r.state)||void 0===e?void 0:e.lobbyId;return"cooperation"!==n&&"battleroyale"!==n||o?(0,Re.jsxs)("div",{className:"game-page-container",children:[(0,Re.jsx)(DT,{title:"Sort by ".concat(t.charAt(0).toUpperCase()+t.slice(1)," (").concat(n,")"),description:"Play Sortly: Sort countries by ".concat(t," in ").concat(n," mode.")}),(()=>{switch(n.toLowerCase()){case"classic":return(0,Re.jsx)(vI,{category:t});case"cooperation":return(0,Re.jsx)(EI,{category:t,lobbyId:o});case"battleroyale":return(0,Re.jsx)(II,{category:t,lobbyId:o});default:return console.error("Reached default case in renderGameMode - should not happen!"),(0,Re.jsx)(ye,{to:"/",replace:!0})}})()]}):(console.error("".concat(n," mode requires a lobbyId in location state.")),(0,Re.jsx)(ye,{to:"/",replace:!0,state:{error:"Lobby ID missing for multiplayer game."}}))},PI="leaderboards",OI={async submitScore(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(!n||"string"!==typeof n)return console.error("Invalid category provided to submitScore:",n),null;try{const s={playerName:e,score:t,category:n,gameHistoryId:r,userId:i,timestamp:z_()},o=await F_(Pv(wT,PI),s);return console.log("Global leaderboard score submitted:",o.id),o.id}catch(ow){return console.error("Error submitting global score:",ow),null}},async getTopScores(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;if(!e)return[];try{const n=m_(Pv(wT,PI),v_("category","==",e),b_("score","desc"),S_(t));return(await M_(n)).docs.map(e=>is({id:e.id},e.data()))}catch(ow){return console.error("Error fetching global leaderboard:",ow),[]}}},DI="achievements",AI={population:{sorting:{bronze:{id:"population_sorting_bronze",title:"Population Bronze Sorter",description:"Correctly sort 3 countries by population",icon:"\ud83e\udd49",requirement:3},silver:{id:"population_sorting_silver",title:"Population Silver Sorter",description:"Correctly sort 7 countries by population",icon:"\ud83e\udd48",requirement:7},gold:{id:"population_sorting_gold",title:"Population Gold Sorter",description:"Correctly sort 12 countries by population",icon:"\ud83e\udd47",requirement:12},platinum:{id:"population_sorting_platinum",title:"Population Platinum Sorter",description:"Correctly sort 20 countries by population",icon:"\ud83d\udc51",requirement:20}},gameCount:{id:"population_games",title:"Population Game Master",description:"Complete 50 population sorting games",icon:"\ud83c\udfae",requirement:50}},area:{sorting:{bronze:{id:"area_sorting_bronze",title:"Area Bronze Sorter",description:"Correctly sort 3 countries by area",icon:"\ud83e\udd49",requirement:3},silver:{id:"area_sorting_silver",title:"Area Silver Sorter",description:"Correctly sort 7 countries by area",icon:"\ud83e\udd48",requirement:7},gold:{id:"area_sorting_gold",title:"Area Gold Sorter",description:"Correctly sort 12 countries by area",icon:"\ud83e\udd47",requirement:12},platinum:{id:"area_sorting_platinum",title:"Area Platinum Sorter",description:"Correctly sort 20 countries by area",icon:"\ud83d\udc51",requirement:20}},gameCount:{id:"area_games",title:"Area Game Master",description:"Complete 50 area sorting games",icon:"\ud83c\udfae",requirement:50}},gini:{sorting:{bronze:{id:"gini_sorting_bronze",title:"Gini Bronze Sorter",description:"Correctly sort 3 countries by Gini index",icon:"\ud83e\udd49",requirement:3},silver:{id:"gini_sorting_silver",title:"Gini Silver Sorter",description:"Correctly sort 7 countries by Gini index",icon:"\ud83e\udd48",requirement:7},gold:{id:"gini_sorting_gold",title:"Gini Gold Sorter",description:"Correctly sort 12 countries by Gini index",icon:"\ud83e\udd47",requirement:12},platinum:{id:"gini_sorting_platinum",title:"Gini Platinum Sorter",description:"Correctly sort 20 countries by Gini index",icon:"\ud83d\udc51",requirement:20}},gameCount:{id:"gini_games",title:"Gini Game Master",description:"Complete 50 Gini sorting games",icon:"\ud83c\udfae",requirement:50}}},RI={async getUserAchievements(e){try{const t=await R_(Ov(wT,DI,e));return t.exists()?t.data():null}catch(ow){throw console.error("Error getting user achievements:",ow),ow}},async updateUserAchievements(e,t){try{await j_(Ov(wT,DI,e),is(is({},t),{},{updatedAt:z_()}),{merge:!0})}catch(ow){throw console.error("Error updating user achievements:",ow),ow}},async checkAndUpdateAchievements(e,t,n){try{var r,i;const s=await this.getUserAchievements(e)||{},o=AI[t];let a=!1;Object.values(o.sorting).forEach(e=>{!s[e.id]&&n>=e.requirement&&(s[e.id]={unlocked:!0,unlockedAt:z_()},a=!0)});const l=o.gameCount,c=((null===(r=s[l.id])||void 0===r?void 0:r.count)||0)+1;return c>=l.requirement&&(null===(i=s[l.id])||void 0===i||!i.unlocked)?(s[l.id]={unlocked:!0,unlockedAt:z_(),count:c},a=!0):(s[l.id]=is(is({},s[l.id]),{},{count:c}),a=!0),a&&await this.updateUserAchievements(e,s),s}catch(ow){throw console.error("Error checking achievements:",ow),ow}},getAchievementDefinitions:()=>AI};function LI(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}const MI=["id","name","flagUrl"],jI=["id","name","flagUrl"],FI="gameHistory",UI=["population","area","gini"],VI={async getTopGames(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"classic",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5;try{console.log("Fetching top games for: userId=".concat(e,", category=").concat(t,", mode=").concat(n,", limit=").concat(r));const i=m_(Pv(wT,FI),v_("userId","==",e),v_("category","==",t),v_("mode","==",n),b_("score","desc"),S_(r)),s=(await M_(i)).docs.map(e=>is({id:e.id},e.data()));return console.log("Fetched games:",s),s}catch(ow){console.error("Error fetching top games, attempting fallback:",ow);try{const i=m_(Pv(wT,FI),v_("userId","==",e),v_("category","==",t),v_("mode","==",n)),s=(await M_(i)).docs.map(e=>is({id:e.id},e.data())),o=s.sort((e,t)=>t.score-e.score).slice(0,r);return console.log("Fetched games (fallback):",o),o}catch(i){throw console.error("Fallback fetch also failed:",i),i}}},async getAllTopGames(e){try{const t={};return await Promise.all(UI.map(async n=>{t[n]=await this.getTopGames(e,n)})),t}catch(ow){return console.error("Error fetching all top games:",ow),{}}},async getGameDetails(e){try{const t=Ov(wT,FI,e),n=await R_(t);return n.exists()?(console.log("Fetched game details for ID:",e,n.data()),is({id:n.id},n.data())):(console.log("No such game document!",e),null)}catch(ow){throw console.error("Error getting game details:",ow),ow}},async saveGame(e,t,n,r,i,s,o){try{const a=i?i.map(e=>{let{id:n,name:r,flagUrl:i}=e;return{id:n,name:r,flagUrl:i,value:LI(e,MI)[t]}}):null,l="classic"===n&&s?s.map(e=>{let{id:n,name:r,flagUrl:i}=e;return{id:n,name:r,flagUrl:i,value:LI(e,jI)[t]}}):null,c="classic"===n&&o?{id:o.id,name:o.name,flagUrl:o.flagUrl,value:o[t]}:null,u={userId:e,category:t,mode:n,score:r,userAttemptList:a,correctlySortedList:l,incorrectCountry:c,timestamp:z_()};Object.keys(u).forEach(e=>{null===u[e]&&delete u[e]});const h=await F_(Pv(wT,FI),u);return console.log("Game history saved with ID:",h.id,"Data:",u),h.id}catch(ow){throw console.error("Error saving game history:",ow),ow}}};const zI=function(){const e=Z(),t=ne(),{currentUser:n}=ST(),{score:i=0,message:s="Game Over!",gameMode:o="unknown",incorrectCountry:a,userOrder:l,finalSortedList:c,winnerName:u,finalPlayersState:h}=e.state||{},{mode:d,category:f}=(e=>{if(!e||"string"!==typeof e)return{mode:"unknown",category:"unknown"};const t=e.split("_");if(2===t.length)return{mode:t[0].toLowerCase(),category:t[1].toLowerCase()};return 1===t.length?{mode:t[0].toLowerCase(),category:"unknown"}:{mode:"unknown",category:"unknown"}})(o),[p,g]=(0,r.useState)(""),[m,y]=(0,r.useState)(!1),[v,_]=(0,r.useState)(""),[w,b]=(0,r.useState)(null),E=(0,r.useRef)(!1);return(0,r.useEffect)(()=>{(async()=>{if(n)try{const e=await kT.getUserProfile(n.uid);null!==e&&void 0!==e&&e.nickname&&g(e.nickname)}catch(e){console.error("Error fetching user profile:",e)}})()},[n]),(0,r.useEffect)(()=>{(async()=>{if(E.current||"unknown"===f||"unknown"===d)return E.current&&console.log("Save skipped: Already attempted."),void("unknown"!==f&&"unknown"!==d||console.log("Save skipped: Unknown category or mode."));if(E.current=!0,!n)return void console.log("Firestore save skipped: No user logged in.");console.log("Attempting to save game history...");let e=0,t=null,r=null,s=null;if("classic"===d||"cooperation"===d)e=i>0?i-1:0,l&&(t=l.map(e=>({id:e.id,name:e.name,flagUrl:e.flagUrl,[f]:e[f]}))),"classic"===d&&(c&&(r=c.map(e=>({id:e.id,name:e.name,flagUrl:e.flagUrl,[f]:e[f]}))),a&&(s={id:a.id,name:a.name,flagUrl:a.flagUrl,[f]:a[f]}));else{if("battleroyale"!==d)return void console.log("Save skipped: Unrecognized game mode:",d);e=i,h&&(t=h.map(e=>({name:e.name,score:e.score,isActive:e.isActive})))}if(e>=0||t&&t.length>0)try{console.log("Calling gameHistoryService.saveGame with:",{userId:n.uid,category:f,mode:d,historyScore:e});const i=await VI.saveGame(n.uid,f,d,e,t,r,s);if(b(i),console.log("Game history saved successfully with ID:",i),"classic"===d&&e>0)try{await RI.checkAndUpdateAchievements(n.uid,f,e),console.log("Achievements checked successfully")}catch(o){console.error("Error updating achievements:",o)}}catch(u){console.error("Error saving game history:",u),_("Failed to save game details. Score submission may not link correctly.")}else console.log("Skipping game history save: Score is zero and no other data to save.")})()},[n,d,f,i,l,c,a,h]),(0,Re.jsxs)("div",{className:"game-over-page game-over-".concat(d,"-").concat(f),children:[" ",(0,Re.jsx)("h2",{children:"Game Over"}),(0,Re.jsx)("p",{children:s}),(0,Re.jsx)("p",{children:"classic"===d||"cooperation"===d?"Your final score: ".concat(i>0?i-1:0):"battleroyale"===d&&u?"".concat(u,"'s winning score: ").concat(i):"Final Score: ".concat(i)}),"battleroyale"===d&&h&&(0,Re.jsxs)("div",{className:"final-player-standings",children:[(0,Re.jsx)("h3",{children:"Final Standings:"}),(0,Re.jsx)("ul",{children:h.sort((e,t)=>(t.score||0)-(e.score||0)).map(e=>(0,Re.jsxs)("li",{className:e.isActive?"":"eliminated-player",children:[e.name,": ",e.score||0," points ",e.isActive?"":"(Eliminated)"]},e.id||e.name))})]}),!m&&("classic"===d||"cooperation"===d||"battleroyale"===d&&i>0)&&(0,Re.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!p.trim())return void _("Please enter your name");let t=0;if("classic"===d||"cooperation"===d?t=i>0?i-1:0:"battleroyale"===d&&(t=i),t<0)_("Only scores of 0 or greater can be submitted.");else if("unknown"!==f)try{console.log("Submitting score to Global Leaderboard: ".concat(p,", ").concat(t,", ").concat(f,", History ID: ").concat(w));await OI.submitScore(p,t,f,w,n?n.uid:null)?(y(!0),_("")):_("Failed to submit score. Please try again.")}catch(r){console.error("Error during score submission:",r),_("Failed to submit score. Please try again.")}else _("Cannot submit score for unknown category.")},className:"score-submission",children:[(0,Re.jsxs)("div",{className:"input-group",children:[(0,Re.jsx)("label",{htmlFor:"playerName",children:"Enter your name for Leaderboard:"}),(0,Re.jsx)("input",{type:"text",id:"playerName",value:p,onChange:e=>g(e.target.value),placeholder:"Your name",maxLength:20,disabled:!n})]}),!n&&(0,Re.jsx)("p",{className:"info-text",children:"Log in to save game details and submit scores!"}),v&&(0,Re.jsx)("p",{className:"error",children:v}),(0,Re.jsx)("button",{type:"submit",className:"button button-primary",disabled:!p.trim()||!E.current,children:"Submit Score"})]}),m&&(0,Re.jsx)("div",{className:"submission-success",children:(0,Re.jsx)("p",{children:"Score submitted successfully!"})}),"classic"===d&&l&&a&&(0,Re.jsxs)("div",{className:"user-order",children:[(0,Re.jsxs)("h3",{children:["Your final attempt (","gini"===f?"Gini":yI(f),"):"]}),(0,Re.jsx)("div",{className:"country-list",children:l.map(e=>(0,Re.jsx)(VT,{country:e,isClickable:!1,highlight:e.id===a.id?"incorrect":"",mode:f,statisticValue:e[f],isFlippable:!0},e.id))})]}),"classic"===d&&c&&a&&(0,Re.jsxs)("div",{className:"correct-order-display",children:[(0,Re.jsx)("h3",{children:"Correctly sorted before mistake:"}),(0,Re.jsxs)("div",{className:"country-list",children:[c.map(e=>(0,Re.jsx)(VT,{country:e,isClickable:!1,highlight:"correct",mode:f,statisticValue:e[f],isFlippable:!0},e.id)),(0,Re.jsx)("p",{style:{textAlign:"center",width:"100%",margin:"10px 0"},children:"...then you incorrectly placed:"}),(0,Re.jsx)("div",{className:"country-list",style:{justifyContent:"center"},children:(0,Re.jsx)(VT,{country:a,isClickable:!1,highlight:"incorrect-standalone",mode:f,statisticValue:a[f],isFlippable:!0},a.id)})]})]}),(0,Re.jsxs)("div",{className:"navigation-buttons",children:[(0,Re.jsx)("button",{onClick:()=>t("unknown"===f||"unknown"===d?"/":"classic"===d?"/game/".concat(f,"/classic"):"cooperation"===d?"/game/".concat(f,"/cooperation"):"battleroyale"===d?"/game/".concat(f,"/battleroyale"):"/"),className:"button button-secondary",children:"Play Again"}),(0,Re.jsx)("button",{onClick:()=>t("/"),className:"button button-secondary",children:"Go Home"}),(0,Re.jsx)("button",{onClick:()=>t("/leaderboard"),className:"button button-secondary",children:"Leaderboard"})]})]})},qI=e=>{try{let t=null;if(e&&"function"===typeof e.toDate)t=e.toDate();else if("string"===typeof e){if(t=new Date(e),isNaN(t.getTime()))return console.warn("formatDate received an invalid date string:",e),"Invalid Date"}else e instanceof Date&&(t=e);return t?t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):(console.warn("formatDate received an invalid input:",e),"Unknown Date")}catch(ow){return console.error("Error formatting date:",e,ow),"Date Error"}},BI=["population","area","gini"];const HI=function(){const[e,t]=(0,r.useState)({}),[n,i]=(0,r.useState)(!0),s=ne();(0,r.useEffect)(()=>{(async()=>{i(!0);const e={};try{for(const t of BI){const n=await OI.getTopScores(t,5),r=await Promise.all(n.map(async e=>{if(!e.gameHistoryId)return is(is({},e),{},{details:null});try{const t=await VI.getGameDetails(e.gameHistoryId);return is(is({},e),{},{details:t||null})}catch(t){return console.error("Failed to fetch details for game ".concat(e.gameHistoryId,":"),t),is(is({},e),{},{details:null})}}));e[t]=r}console.log("Enriched Leaderboards:",e),t(e)}catch(ow){console.error("Error loading leaderboards:",ow)}finally{i(!1)}})()},[]);const o=(e,t)=>{const n="Classic ".concat(yI("gini"===e?"Gini Index":e));return(0,Re.jsxs)("div",{className:"leaderboard-section",children:[(0,Re.jsx)("h3",{children:n}),t&&t.length>0?(0,Re.jsx)("div",{className:"leaderboard-table",children:(0,Re.jsxs)("table",{children:[(0,Re.jsx)("thead",{children:(0,Re.jsxs)("tr",{children:[(0,Re.jsx)("th",{children:"Rank"}),(0,Re.jsx)("th",{children:"Player"}),(0,Re.jsx)("th",{children:"Score"}),(0,Re.jsx)("th",{children:"Date"}),(0,Re.jsx)("th",{children:"Game Overview"})]})}),(0,Re.jsx)("tbody",{children:t.map((e,t)=>{var n;return(0,Re.jsxs)("tr",{onClick:()=>{var t;(t=e.gameHistoryId)?(console.log("Navigating to game review for ID:",t),s("/game-review/".concat(t))):(console.log("No game history ID associated with this leaderboard entry."),alert("Detailed game view not available for this entry (likely older data or not logged in when played)."))},className:e.gameHistoryId?"clickable-row":"",title:e.gameHistoryId?"Click to see game details":"Game details not available",children:[(0,Re.jsx)("td",{children:t+1}),(0,Re.jsx)("td",{children:e.playerName}),(0,Re.jsx)("td",{children:e.score}),(0,Re.jsx)("td",{children:qI(e.timestamp||e.date)}),(0,Re.jsx)("td",{className:"leaderboard-flags",children:e.details&&"classic"===e.details.mode?(0,Re.jsxs)(Re.Fragment,{children:[null===(n=e.details.correctlySortedList)||void 0===n?void 0:n.map(e=>(0,Re.jsx)("img",{src:e.flagUrl,alt:e.name,title:e.name,className:"flag-image"},"flag-correct-".concat(e.id||e.name))),e.details.incorrectCountry&&(0,Re.jsx)("img",{src:e.details.incorrectCountry.flagUrl,alt:"".concat(e.details.incorrectCountry.name," (Incorrect)"),title:"".concat(e.details.incorrectCountry.name," (Incorrect)"),className:"flag-image incorrect-flag"},"flag-incorrect-".concat(e.details.incorrectCountry.id||e.details.incorrectCountry.name)),(0,Re.jsx)("span",{role:"img","aria-label":"View game details",className:"click-indicator",title:"Click for details",children:"\ud83d\udd0d"})]}):e.gameHistoryId?(0,Re.jsx)("span",{role:"img","aria-label":"View game details",className:"click-indicator",title:"Click for details",children:"\ud83d\udd0d"}):(0,Re.jsx)("span",{children:"-"})})]},e.id||t)})})]})}):(0,Re.jsx)("p",{children:"No entries yet for this category."})]})};return(0,Re.jsxs)("div",{className:"leaderboard-page",children:[(0,Re.jsx)(DT,{title:"Global Leaderboards",description:"Check the top scores for Sortly. See who knows their geography best in population, area, and Gini index categories."}),(0,Re.jsx)("h2",{children:"Classic Leaderboards"}),n?(0,Re.jsx)("p",{children:"Loading leaderboards..."}):BI.map(t=>o(t,e[t])),(0,Re.jsx)("button",{onClick:()=>s("/"),className:"button button-secondary",style:{marginTop:"20px"},children:"Go Home"})]})},WI=e=>{let{avatarOptions:t,selectedAvatar:n,onSelect:r,onClose:i}=e;return(0,Re.jsx)("div",{className:"avatar-selector",children:(0,Re.jsx)("div",{className:"avatar-grid",children:t.map(e=>(0,Re.jsxs)("div",{className:"avatar-option ".concat(n===e.url?"selected":""),onClick:()=>r(e.url),children:[(0,Re.jsx)("img",{src:e.url,alt:e.name}),(0,Re.jsx)("span",{children:e.name})]},e.id))})})},GI=e=>{let{profile:t,currentUser:n,avatarOptions:i,onSubmit:s}=e;const[o,a]=(0,r.useState)({nickname:(null===t||void 0===t?void 0:t.nickname)||"",country:(null===t||void 0===t?void 0:t.country)||"",avatarUrl:(null===t||void 0===t?void 0:t.avatarUrl)||i[0].url}),[l,c]=(0,r.useState)(!1),[u,h]=(0,r.useState)(!1),d=e=>{const{name:t,value:n}=e.target;a(e=>is(is({},e),{},{[t]:n})),h(!0)};return(0,Re.jsxs)("div",{className:"profile-header",children:[(0,Re.jsxs)("div",{className:"avatar-container",children:[(0,Re.jsx)("img",{src:o.avatarUrl,alt:"Profile",className:"profile-avatar",onClick:()=>c(!0)}),l&&(0,Re.jsx)(WI,{avatarOptions:i,selectedAvatar:o.avatarUrl,onSelect:e=>{a(t=>is(is({},t),{},{avatarUrl:e})),c(!1),h(!0)},onClose:()=>c(!1)})]}),(0,Re.jsx)("div",{className:"profile-info",children:(0,Re.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await s(o),h(!1)}catch(ow){console.error("Error saving profile:",ow)}},className:"profile-form",children:[(0,Re.jsx)("div",{className:"form-group",children:(0,Re.jsx)("input",{type:"text",name:"nickname",value:o.nickname,onChange:d,placeholder:"Set your nickname",className:"inline-input"})}),(0,Re.jsx)("div",{className:"form-group",children:(0,Re.jsx)("input",{type:"text",name:"country",value:o.country,onChange:d,placeholder:"Set your country",className:"inline-input"})}),(0,Re.jsx)("div",{className:"email-display",children:n.email}),u&&(0,Re.jsx)("button",{type:"submit",className:"save-button",children:"Save Changes"})]})})]})},KI=e=>{let{achievement:t,isUnlocked:n,unlockDate:r}=e;return(0,Re.jsxs)("div",{className:"achievement-card ".concat(n?"unlocked":"locked"),children:[(0,Re.jsxs)("div",{className:"achievement-content",children:[(0,Re.jsx)("div",{className:"achievement-icon",children:t.icon}),(0,Re.jsxs)("div",{className:"achievement-info",children:[(0,Re.jsx)("h3",{children:t.title}),(0,Re.jsx)("p",{children:t.description}),n&&r&&(0,Re.jsxs)("div",{className:"achievement-date",children:["Unlocked: ",qI(r)]})]})]}),(0,Re.jsx)("div",{className:"achievement-status",children:n?"\u2713":"\ud83d\udd12"})]})},QI=e=>{let{achievementDefinitions:t,achievements:n}=e;const r=(e=>{const t=[];return Object.entries(e).forEach(e=>{let[n,r]=e;Object.entries(r.sorting).forEach(e=>{let[r,i]=e;t.push(is(is({},i),{},{category:n,type:"sorting"}))}),r.gameCount&&t.push(is(is({},r.gameCount),{},{category:n,type:"gameCount"}))}),t})(t);return(0,Re.jsxs)("div",{className:"achievements-section",children:[(0,Re.jsx)("h2",{children:"Achievements"}),(0,Re.jsx)("div",{className:"achievements-grid",children:r.map(e=>{var t,r,i;return(0,Re.jsx)(KI,{achievement:e,isUnlocked:null!==(t=null===n||void 0===n||null===(r=n[e.id])||void 0===r?void 0:r.unlocked)&&void 0!==t&&t,unlockDate:null===n||void 0===n||null===(i=n[e.id])||void 0===i?void 0:i.unlockedAt},e.id)})})]})},YI=e=>{var t,n;let{game:r,index:i,onClick:s}=e;return(0,Re.jsxs)("div",{className:"game-history-item",onClick:()=>s(r.id),children:[(0,Re.jsxs)("div",{className:"game-rank",children:["#",i+1]}),(0,Re.jsxs)("div",{className:"game-score",children:["Score: ",r.score]}),(0,Re.jsxs)("div",{className:"game-mode",children:[r.category.charAt(0).toUpperCase()+r.category.slice(1)," Mode"]}),(0,Re.jsx)("div",{className:"game-date",children:null!==(t=r.timestamp)&&void 0!==t&&t.toDate?qI(r.timestamp):"Date unavailable"}),(0,Re.jsx)("div",{className:"game-countries",children:null===(n=r.countries)||void 0===n?void 0:n.map((e,t)=>(0,Re.jsxs)("div",{className:"country-item",children:[(0,Re.jsx)("img",{src:e.flagUrl,alt:e.name,className:"country-flag"}),(0,Re.jsx)("span",{children:e.name})]},t))})]})},$I=e=>{let{gameHistory:t}=e;const n=ne(),i=(0,r.useMemo)(()=>{if(!t||0===Object.keys(t).length)return[];const e=Object.entries(t).flatMap(e=>{let[t,n]=e;return n.map(e=>is(is({},e),{},{category:t}))}).filter((e,t,n)=>t===n.findIndex(t=>t.id===e.id));return e.sort((e,t)=>t.score-e.score).slice(0,5)},[t]),s=e=>{n("/game-review/".concat(e))};return t?0===Object.keys(t).length?(0,Re.jsxs)("div",{className:"game-history-section",children:[(0,Re.jsx)("h2",{children:"Best 5 Games"}),(0,Re.jsx)("p",{children:"No games played yet. Start playing to see your best games here!"})]}):(0,Re.jsxs)("div",{className:"game-history-section",children:[(0,Re.jsx)("h2",{children:"Best 5 Games"}),(0,Re.jsx)("div",{className:"game-history-list",children:i.map((e,t)=>(0,Re.jsx)(YI,{game:e,index:t,onClick:s},e.id))})]}):(0,Re.jsxs)("div",{className:"game-history-section",children:[(0,Re.jsx)("h2",{children:"Best 5 Games"}),(0,Re.jsx)("p",{children:"Loading game history..."})]})},XI=()=>{const{currentUser:e}=ST(),t=ne(),[n,i]=(0,r.useState)(null),[s,o]=(0,r.useState)(null),[a,l]=(0,r.useState)(null),[c,u]=(0,r.useState)(!0),[h,d]=(0,r.useState)(""),[f,p]=(0,r.useState)(!1),[g,m]=(0,r.useState)(!1),[y,v]=(0,r.useState)({nickname:"",country:"",avatarUrl:""}),_=TT.getAvatarOptions(),w=RI.getAchievementDefinitions(),b=null===e||void 0===e?void 0:e.uid,E=(0,r.useCallback)(async()=>{if(b)try{const[e,t,n]=await Promise.all([kT.getUserProfile(b),RI.getUserAchievements(b),VI.getAllTopGames(b)]);e&&(i(e),v({nickname:e.nickname||"",country:e.country||"",avatarUrl:e.avatarUrl||_[0].url})),o(t),l(n)}catch(h){d("Failed to load profile: "+h.message)}finally{u(!1)}},[b,_]);(0,r.useEffect)(()=>{e&&E()},[e,E]);return e?c?(0,Re.jsx)("div",{className:"profile-page",children:"Loading..."}):(0,Re.jsx)("div",{className:"profile-page",children:(0,Re.jsxs)("div",{className:"profile-content",children:[(0,Re.jsx)(GI,{profile:n,currentUser:e,editing:f,formData:y,avatarOptions:_,showAvatarSelector:g,onEdit:()=>p(!0),onAvatarSelect:e=>{v(t=>is(is({},t),{},{avatarUrl:e})),m(!1)},onAvatarSelectorToggle:()=>m(!g),onSubmit:async t=>{try{d(""),await kT.updateUserProfile(e.uid,t),i(e=>is(is({},e),t)),p(!1)}catch(h){d("Failed to update profile: "+h.message)}},onChange:e=>{const{name:t,value:n}=e.target;v(e=>is(is({},e),{},{[t]:n}))},onCancel:()=>p(!1)}),h&&(0,Re.jsx)("div",{className:"error-message",children:h}),(0,Re.jsx)(QI,{achievementDefinitions:w,achievements:s}),(0,Re.jsx)($I,{gameHistory:a})]})}):(t("/"),null)},JI="lobbies";const ZI=new class{constructor(){this.lobbiesRef=rT(bT,JI)}async createLobby(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"cooperation";const r=rT(bT,"".concat(JI,"/").concat(e));return await oT(r,{players:[t],status:"waiting",gameMode:n,createdAt:Date.now(),lastUpdated:Date.now()}),e}async joinLobby(e,t){const n=rT(bT,"".concat(JI,"/").concat(e)),r=(await lT(n)).val();if(!r)throw new Error("Lobby not found");{const i=r.players||[];if(i.some(e=>e.id===t.id))return void console.warn("Player ".concat(t.id," already in lobby ").concat(e,"."));await aT(n,{players:[...i,t],lastUpdated:Date.now()})}}async leaveLobby(e,t){const n=rT(bT,"".concat(JI,"/").concat(e)),r=(await lT(n)).val();if(r){const i=(r.players||[]).filter(e=>e.id!==t);if(0===i.length)console.log("Last player left lobby ".concat(e,". Deleting lobby.")),await sT(n);else{let e={players:i,lastUpdated:Date.now()};await aT(n,e)}}else console.warn("Attempted to leave non-existent or already deleted lobby: ".concat(e))}subscribeToLobby(e,t){const n=rT(bT,"".concat(JI,"/").concat(e)),r=dT(n,e=>{const n=e.val();t(n)},n=>{console.error("Error subscribing to lobby ".concat(e,":"),n),t(null)});return()=>fT(n,"value",r)}async startGame(e){const t=rT(bT,"".concat(JI,"/").concat(e));await aT(t,{status:"playing",startedAt:Date.now(),lastUpdated:Date.now()})}async endGame(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=rT(bT,"".concat(JI,"/").concat(e));await aT(n,{status:"completed",result:t,endedAt:Date.now(),lastUpdated:Date.now()})}async cleanupLobby(e){console.log("Cleaning up lobby: ".concat(e));const t=rT(bT,"".concat(JI,"/").concat(e));await sT(t)}},ek={cooperation:{minPlayers:2,maxPlayers:4,service:wI,name:"Cooperation Mode"},battleRoyale:{minPlayers:2,maxPlayers:8,service:CI,name:"Battle Royale Mode"}};const tk=function(e){let{gameMode:t}=e;const{currentUser:n}=ST(),{category:i}=re(),[s,o]=(0,r.useState)(""),[a,l]=(0,r.useState)([]),[c,u]=(0,r.useState)(!1),[h,d]=(0,r.useState)(""),[f,p]=(0,r.useState)(""),g=ne(),[m]=Ae(),y=(0,r.useRef)(""),v=(0,r.useRef)(null);(0,r.useEffect)(()=>{if(!t||!n||!i)return void(i||d("Game category not specified in URL."));let e=null,r=!0;return(async()=>{try{let h="";try{const e=await kT.getUserProfile(n.uid);h=(null===e||void 0===e?void 0:e.nickname)||""}catch(s){console.error("Error fetching user profile:",s)}const f=m.get("lobby");let p="",_={id:n.uid,name:h||(f?"Player ".concat(Math.floor(100*Math.random())):"Player 1"),email:n.email};if(v.current=_,f){p=f,y.current=p,r&&(o(p),u(!1));try{await ZI.joinLobby(p,_)}catch(a){return console.error("Error joining lobby:",a),void(r&&d(a.message||"Failed to join lobby"))}}else{p=Math.random().toString(36).substring(2,8).toUpperCase(),y.current=p,r&&(o(p),u(!0));try{await ZI.createLobby(p,_,t,i)}catch(c){return console.error("Error creating lobby:",c),void(r&&d(c.message||"Failed to create lobby"))}}e=ZI.subscribeToLobby(p,e=>{if(r)if(e){var s;l(e.players||[]),u(e.players&&(null===(s=e.players[0])||void 0===s?void 0:s.id)===n.uid);const r=e.category;if(r&&r!==i&&console.warn("Lobby category (".concat(r,") doesn't match URL category (").concat(i,")")),"playing"===e.status)if(t&&i){const e="/game/".concat(i,"/").concat(t);try{console.log("Navigating to ".concat(e," with mode ").concat(t," and category ").concat(i)),g(e,{state:{lobbyId:p}})}catch(o){console.error("Navigation error:",o)}}else console.error("Cannot navigate, gameMode prop or category param is missing."),d("Error determining game mode/category for navigation.")}else d("Lobby not found or has been closed")})}catch(h){console.error("Error initializing lobby:",h),r&&d("Failed to initialize lobby")}})(),()=>{r=!1,e&&e(),y.current&&v.current&&ZI.leaveLobby(y.current,v.current.id)}},[t,m,n,g,i]);const _=async()=>{if(!t||!y.current||!i)return;const e=window.location.origin,n="".concat(e,"/#/game/").concat(i,"/").concat(t,"?lobby=").concat(encodeURIComponent(y.current));try{await navigator.clipboard.writeText(n),p("Copied!"),setTimeout(()=>p(""),2e3)}catch(r){const e=document.createElement("textarea");e.value=n,e.style.position="fixed",e.style.left="-9999px",document.body.appendChild(e),e.focus(),e.select();try{document.execCommand("copy"),p("Copied!"),setTimeout(()=>p(""),2e3)}catch(s){p("Failed to copy"),console.error("Fallback copy failed: ",s)}document.body.removeChild(e)}};if(!t)return(0,Re.jsx)("div",{className:"game-lobby",children:"Error: Game mode not provided."});if(!i)return(0,Re.jsxs)("div",{className:"game-lobby",children:["Error: Game category not specified in URL. ",h&&(0,Re.jsx)("p",{className:"error-message",children:h})]});if(!n)return(0,Re.jsx)("div",{className:"game-lobby",children:"Loading user..."});const w=ek[t];return(0,Re.jsxs)("div",{className:"game-lobby",children:[(0,Re.jsxs)("div",{className:"lobby-header",children:[(0,Re.jsxs)("h2",{children:[(null===w||void 0===w?void 0:w.name)||"Game Lobby"," - ",i.toUpperCase()]}),s&&(0,Re.jsxs)("p",{className:"lobby-id-display",children:["Lobby ID: ",(0,Re.jsx)("strong",{children:s})]})]}),h&&(0,Re.jsx)("p",{className:"error-message",children:h}),(0,Re.jsxs)("div",{className:"player-list-container",children:[(0,Re.jsxs)("h3",{children:["Players (",a.length," / ",(null===w||void 0===w?void 0:w.maxPlayers)||"N/A","):"]}),(0,Re.jsx)("ul",{className:"player-list",children:a.map((e,t)=>(0,Re.jsxs)("li",{className:"player-item",children:[(0,Re.jsx)("span",{className:"player-name",children:e.name||"Player ".concat(t+1)}),e.id===n.uid&&(0,Re.jsx)("span",{className:"player-tag you-tag",children:" (You)"}),0===t&&(0,Re.jsx)("span",{className:"player-tag host-tag",children:" (Host)"})]},e.id))})]}),s&&(0,Re.jsx)("div",{className:"lobby-controls",children:c?(0,Re.jsxs)(Re.Fragment,{children:[(0,Re.jsx)("button",{className:"button button-secondary",onClick:_,disabled:"Copied!"===f||"Failed to copy"===f,children:f||"Copy Invite Link"}),(0,Re.jsx)("button",{className:"button button-primary",onClick:async()=>{if(!c||!t||!y.current||!i)return;const e=ek[t];if(e)if(a.length<e.minPlayers)d("Waiting for more players. Need at least ".concat(e.minPlayers,"."));else if(a.length>e.maxPlayers)d("Too many players. Maximum is ".concat(e.maxPlayers,"."));else try{d(""),await e.service.initializeGameState(y.current,a,i),await ZI.startGame(y.current)}catch(h){console.error("Error starting game:",h),d(h.message||"Failed to start game")}else d("Invalid game mode configuration.")},disabled:a.length<((null===w||void 0===w?void 0:w.minPlayers)||2),children:"Start Game"})]}):(0,Re.jsx)("button",{className:"button button-secondary",onClick:_,disabled:"Copied!"===f||"Failed to copy"===f,children:f||"Copy Invite Link"})})]})};function nk(){const{currentUser:e,login:t,signup:n,logout:i}=ST(),[s,o]=(0,r.useState)(""),[a,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[h,d]=(0,r.useState)(!1),[f,p]=(0,r.useState)(null);return(0,Re.jsxs)("div",{style:{padding:"20px"},children:[(0,Re.jsx)("h2",{children:"Firebase Test"}),e?(0,Re.jsxs)("div",{children:[(0,Re.jsxs)("p",{children:["Logged in as: ",e.email]}),(0,Re.jsx)("button",{onClick:async function(){try{u(""),d(!0),await i()}catch(c){u("Failed to log out: "+c.message)}d(!1)},disabled:h,children:"Log Out"}),(0,Re.jsx)("button",{onClick:async function(){if(e)try{await OI.addScore(e.uid,e.email,100,"test"),p("Score added successfully!")}catch(c){p("Failed to add score: "+c.message)}},style:{marginLeft:"10px"},children:"Add Test Score"}),f&&(0,Re.jsx)("p",{children:f})]}):(0,Re.jsxs)("div",{children:[(0,Re.jsxs)("form",{onSubmit:async function(e){e.preventDefault();try{u(""),d(!0),await n(s,a)}catch(c){u("Failed to create an account: "+c.message)}d(!1)},children:[(0,Re.jsx)("input",{type:"email",value:s,onChange:e=>o(e.target.value),placeholder:"Email",required:!0}),(0,Re.jsx)("input",{type:"password",value:a,onChange:e=>l(e.target.value),placeholder:"Password",required:!0}),(0,Re.jsx)("button",{type:"submit",disabled:h,children:"Sign Up"})]}),(0,Re.jsx)("form",{onSubmit:async function(e){e.preventDefault();try{u(""),d(!0),await t(s,a)}catch(c){u("Failed to log in: "+c.message)}d(!1)},style:{marginTop:"10px"},children:(0,Re.jsx)("button",{type:"submit",disabled:h,children:"Log In"})})]}),c&&(0,Re.jsx)("p",{style:{color:"red"},children:c})]})}const rk=function(){const{gameId:e}=re(),t=ne(),[n,i]=(0,r.useState)(null),[s,o]=(0,r.useState)(!0),[a,l]=(0,r.useState)(null);if((0,r.useEffect)(()=>{(async()=>{if(!e)return l("No game ID provided."),void o(!1);o(!0);try{console.log("Fetching game details for ID: ".concat(e));const t=await VI.getGameDetails(e);t?(console.log("Fetched game data:",t),t.correctlySortedList||(t.correctlySortedList=[]),t.incorrectCountry||(t.incorrectCountry=null),i(t)):l("Game with ID ".concat(e," not found."))}catch(t){console.error("Error fetching game details:",t),l("Failed to load game details. Please try again later.")}finally{o(!1)}})()},[e]),s)return(0,Re.jsx)("div",{className:"game-review-page loading",children:"Loading game review..."});if(a)return(0,Re.jsxs)("div",{className:"game-review-page error",children:[(0,Re.jsx)("h2",{children:"Error"}),(0,Re.jsx)("p",{children:a}),(0,Re.jsx)("button",{onClick:()=>t("/leaderboard"),className:"button button-secondary",children:"Back to Leaderboard"})]});if(!n)return(0,Re.jsx)("div",{className:"game-review-page",children:"Game data could not be loaded."});const c="classic"===n.mode&&n.correctlySortedList&&n.incorrectCountry,u="gini"===n.category?"Gini Index":yI(n.category||"Unknown");return(0,Re.jsxs)("div",{className:"game-review-page",children:[(0,Re.jsxs)("h2",{children:["Game Review - ",yI(n.mode||"Game")," (",u,")"]}),(0,Re.jsxs)("p",{children:["Score: ",n.score]}),(0,Re.jsxs)("p",{children:["Played on: ",n.timestamp?qI(n.timestamp):"Date unknown"]}),c?(0,Re.jsxs)("div",{className:"review-section final-order-display",children:[(0,Re.jsx)("h3",{children:"Your Final Correct Sequence & Mistake:"}),(0,Re.jsxs)("div",{className:"country-list combined-list",children:[n.correctlySortedList.map(e=>(0,Re.jsx)(VT,{country:e,isClickable:!1,highlight:"correct",mode:n.category,statisticValue:e.value,isFlippable:!0},"correct-".concat(e.id||e.name))),n.incorrectCountry&&(0,Re.jsx)(VT,{country:n.incorrectCountry,isClickable:!1,highlight:"incorrect",mode:n.category,statisticValue:n.incorrectCountry.value,isFlippable:!0},"incorrect-".concat(n.incorrectCountry.id||n.incorrectCountry.name))]})]}):(0,Re.jsxs)("div",{className:"general-game-info review-section",children:[(0,Re.jsx)("h3",{children:"Game Summary"}),n.userAttemptList&&n.userAttemptList.length>0?(0,Re.jsx)("div",{className:"country-list",children:n.userAttemptList.map(e=>(0,Re.jsx)(VT,{country:e,isClickable:!1,mode:n.category,statisticValue:e.value,isFlippable:!0},"attempt-".concat(e.id||e.name)))}):(0,Re.jsx)("p",{children:"Basic game data is available, but detailed review for this mode might not be fully implemented."})]}),(0,Re.jsxs)("div",{className:"navigation-buttons",style:{marginTop:"30px"},children:[(0,Re.jsx)("button",{onClick:()=>t("/leaderboard"),className:"button button-secondary",children:"Back to Leaderboard"}),(0,Re.jsx)(Pe,{to:"/",className:"button button-secondary",children:"Go Home"})]})]})};const ik=function(){var e,t;const n=Z(),i=ee("/game/:category/:mode"),s=ee("/game/:category/:mode/*"),o=(null===i||void 0===i||null===(e=i.params)||void 0===e?void 0:e.category)||(null===s||void 0===s||null===(t=s.params)||void 0===t?void 0:t.category);let a="";return"population"===o?a="bg-population":"area"===o?a="bg-area":"gini"===o&&(a="bg-gini"),(0,r.useEffect)(()=>{Gr.Ay.initialize("G-9679TPXEBR")},[]),(0,r.useEffect)(()=>{Gr.Ay.send({hitType:"pageview",page:n.pathname})},[n.pathname]),(0,Re.jsx)(jr,{children:(0,Re.jsx)(CT,{children:(0,Re.jsxs)("div",{className:"App ".concat(a),children:[(0,Re.jsx)(PT,{}),(0,Re.jsx)("div",{className:"content",children:(0,Re.jsxs)(we,{children:[(0,Re.jsx)(ve,{path:"/",element:(0,Re.jsx)(jT,{})}),(0,Re.jsx)(ve,{path:"/game/:category/cooperation",element:(0,Re.jsx)(tk,{gameMode:"cooperation"})}),(0,Re.jsx)(ve,{path:"/game/:category/battleroyale",element:(0,Re.jsx)(tk,{gameMode:"battleRoyale"})}),(0,Re.jsx)(ve,{path:"/game/:category/:mode",element:(0,Re.jsx)(NI,{})}),(0,Re.jsx)(ve,{path:"/gameover",element:(0,Re.jsx)(zI,{})}),(0,Re.jsx)(ve,{path:"/leaderboard",element:(0,Re.jsx)(HI,{})}),(0,Re.jsx)(ve,{path:"/profile",element:(0,Re.jsx)(XI,{})}),(0,Re.jsx)(ve,{path:"/test",element:(0,Re.jsx)(nk,{})}),(0,Re.jsx)(ve,{path:"/game-review/:gameId",element:(0,Re.jsx)(rk,{})})]})}),(0,Re.jsx)(OT,{})]})})})};s.createRoot(document.getElementById("root")).render((0,Re.jsx)(r.StrictMode,{children:(0,Re.jsx)(ke,{children:(0,Re.jsx)(Kt,{backend:(e,t,n)=>new gn(e,t,n),options:Yn,children:(0,Re.jsx)(ik,{})})})}))})()})();
//# sourceMappingURL=main.d4cf352a.js.map